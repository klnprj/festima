<div class='page-header'>
  <h1 ng-bind="vm.building.name">&nbsp;</h1>
</div>

<es-building-form building="vm.building">
  <es-building-address building="vm.building" on-address-selected="vm.onSelectAddress(address)"></es-building-address>
</es-building-form>

<h2>Контакты</h2>
<div class="panel panel-default">
  <div class="panel-heading">
    <div class="row">
      <es-add-contact on-contact-added="vm.addContact(newContact)"></es-add-contact>
    </div>
  </div>
  <div class="panel-body">
    <es-building-contacts contacts="vm.contacts" on-remove-contact="vm.removeContact(contact)"></es-building-contacts>
  </div>
</div>

<h2>Позиции</h2>

<div ng-repeat="(dealerId, dealerMap) in vm.dealersPositionsMap">
  <es-dealer-positions positions="dealerMap.positions" new-position="{building: vm.building, dealerId: dealerId}"
                       on-delete-position="vm.removeDealerPosition(dealerId, position)"
                       on-add-position="vm.addDealerPosition(dealerId, position)"
                       on-update-position="vm.updateDealerPosition(dealerId, position)">

    <h4 ng-bind="dealerMap.name"></h4>
  </es-dealer-positions>
</div>

<es-add-dealer-button on-add-dealer="vm.addDealer(dealer)"
                      on-check-added="vm.isAddedDealer(dealer)"></es-add-dealer-button>

<hr>

<div class="panel panel-default">
  <div class="panel-body">
    <button class="btn btn-lg btn-success" ng-click="vm.saveChanges()">Сохранить изменения</button>
    <a ng-href="#/building/show/{{vm.building.id}}" class="btn">Отмена</a>
  </div>
</div>

