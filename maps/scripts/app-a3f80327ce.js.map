{"version":3,"sources":["scripts/app-a3f80327ce.js"],"names":["angular","module","webDevTec","getTec","data","title","url","description","logo","this","service","app","SearchController","vm","q","Object","defineProperty","get","_q","set","value","onSearchChanged","component","templateUrl","bindings","controllerAs","controller","acmeNavbar","NavbarController","moment","session","profile","then","user","relativeDate","creationDate","fromNow","$inject","directive","restrict","scope","bindToController","$scope","$uibModalInstance","position","messages","onNewMessage","ok","close","cancel","dismiss","addNewMessage","newMessage","$uibModal","$log","Message","messagesManager","openMessages","modalInstance","loadAllMessages","id","open","animation","size","resolve","addMessage","result","selectedItem","info","Date","_message","msg","extend","positionId","save","getMessage","message","push","acmeMalarkey","malarkey","linkFunc","el","attr","watcher","typist","typeSpeed","deleteSpeed","pauseDelay","loop","postfix","addClass","forEach","extraValues","type","pause","$watch","contributors","contributor","login","$on","MalarkeyController","githubContributor","activate","getContributors","template","link","$http","limit","getContributorsComplete","response","getContributorsFailed","error","toJson","apiHost","factory","DictionaryAutocompleteLink","element","attrs","key","name","DictionaryAutocompleteController","$sce","dictionaries","items","trustAsHtml","refreshItems","itemsByKey","undefined","selected","DictionaryComponentController","$q","newItem","currentPage","itemsPerPage","add","item","addItem","pageChanged","count","countItemsByKey","all","totalItems","DealerPositionsController","types","statuses","addNewPosition","newPosition","copy","inputPosition","onAddPosition","dealerId","removePosition","onDeletePosition","dealer","activePosition","removed","positions","transclude","CommentsController","newComment","addNewComment","onAddComment","comment","text","comments","CommentController","BuildingsNearbyController","maps","addresses","toastr","findNearbyBuildings","address","latLng","centroidToLatlng","geometry","centroid","listWithinRadius","buildings","_","isEmpty","_address","newVal","StatusesService","code","label","list","BuildingStatusController","getStatusLabel","find","e","statusCode","BuildingFormController","building","BuildingFilterPanel","users","dealers","loadUsers","usersList","loadStatuses","loadDealers","listAll","dealersList","itemsPerPageValues","filters","status","criteria","applyFilters","onApplyFilters","buildingPositions","dealerList","_dealers","buildingDealersMap","dealersMap","loadPositions","buildingId","list1","i","length","console","log","savePositions","dealerMap","create1","resp","index","map","indexOf","splice","addDealerPosition","removeDealerPosition","refreshDealers","addDealer","keys","BuildingContactsController","removeContact","contact","onRemoveContact","contacts","setSelected","asyncSelected","latLng0","isDefined","DG","location","initMap","marker","getMarker","addTo","on","latlng","lat","lng","searchCoords","removeLayer","attributes","buildingname","bindPopup","locationFullName","full_name","number","latLngToWkt","onAddressSelected","searchAddress","addLayer","panTo","getLocation","suggestions","onSelect","itemData","model","search","hint","setZoom","detailedZoom","AddressInputController","onCheckAdded","onAddDealer","findAllByQuery","AddContactController","appConfig","initNewContact","_contactType","newValue","getContacts","getContactTypes","apiUrl","contactTypes","addContact","newContact","typeName","contactType","contactName","contactId","onContactAdded","User","cachedPromises","usersManager","_pool","_retrieveInstance","instance","setData","_search","getUser","isUndefined","loadAllUsers","deferred","defer","success","itemsArray","reject","promise","setUser","prototype","post","delete","update","put","_load","author","params","setMessage","self","estimaModule","dgis","configMap","zoom","overviewZoom","center","geoclicker","showPhotos","showBooklet","wkt","point","Wkt","toPoints","initDgisContainer","ready","estima","container","ajax","key2gis","output","region_id","getById","fields","version","getMarkerPromise","saveContact","MainController","$timeout","getWebDevTec","classAnimation","showToastr","awesomeThings","awesomeThing","rank","Math","random","$state","$rootScope","$cookies","OAuth","OAuthToken","loadCurrentUser","userId","currentUserPromise","credentials","options","getAccessToken","logout","remove","go","getUserId","isAuthenticated","checkLoggedIn","skipLoggedIn","spinnerService","username","email","password","loginForm","$setPristine","res","err","$setValidity","$stateParams","loadByKey","dictionary","offset","max","loadItem","radius","searchAddresses","authorId","from.lastUpdated","lastUpdatedFrom","$location","buildingsPromise","positionBuildingsOnMap","allMarkersLayers","clearLayers","markers","$apply","path","target","layerGroup","searchAndDisplayBuildingsOnMap","mapPromise","results","filtersOpen","onSelectAddress","addressObject","when","UsersService","listAllByBuilding","createPosition","positionData","filter","mapAll","listByIds","ids","createComment","commentData","Building","buildingsManager","getBuilding","loadAllBuildings","setBuilding","Buildings","BuildingDealer","buildingDealersManager","unsavedId","min","_unsaved","unsaved","Number","getBuildingDealer","loadAllBuildingDealers","setBuildingDealer","getDealersPositionsMap","dealerPositionsMap","mapOfDealers","saveDealerPositions","positionsList","savedPosition","loadComments","addComment","total","getBuildingDealers","d","join","require","ngModel","$parsers","val","parseInt","$formatters","buildingDealersService","updateBuildingContacts","contactList","promises","mapOfDealersPositions","dealersPositionsMap","dealerPositions","isAddedDealer","String","saveChanges","runBlock","debug","run","$window","event","rejection","getRefreshToken","href","routerConfig","$stateProvider","$urlRouterProvider","loadBuilding","state","abstract","views","loggedin","loggedout","container@private","container@public","otherwise","config","constant","window","$logProvider","toastrConfig","debugEnabled","allowHtml","timeOut","positionClass","preventDuplicates","progressBar","authInterceptor","responseError","OAuthProvider","configure","grantPath","revokePath","baseUrl","clientId","secure","OAuthTokenProvider","$httpProvider","interceptors","$injector","$templateCache"],"mappings":"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","file":"scripts/app-a3f80327ce.js","sourcesContent":["(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('festima', ['ngMessages', 'ngAnimate', 'ngRoute', 'ui.router', 'ngAnimate', 'ngSanitize', 'ui.bootstrap', 'toastr', 'ui.select',\r\n      'angular-oauth2', 'angularSpinners']);\r\n\r\n})();\r\n\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n      .module('festima')\r\n      .service('webDevTec', webDevTec);\r\n\r\n  /** @ngInject */\r\n  function webDevTec() {\r\n    var data = [\r\n      {\r\n        'title': 'AngularJS',\r\n        'url': 'https://angularjs.org/',\r\n        'description': 'HTML enhanced for web apps!',\r\n        'logo': 'angular.png'\r\n      },\r\n      {\r\n        'title': 'BrowserSync',\r\n        'url': 'http://browsersync.io/',\r\n        'description': 'Time-saving synchronised browser testing.',\r\n        'logo': 'browsersync.png'\r\n      },\r\n      {\r\n        'title': 'GulpJS',\r\n        'url': 'http://gulpjs.com/',\r\n        'description': 'The streaming build system.',\r\n        'logo': 'gulp.png'\r\n      },\r\n      {\r\n        'title': 'Jasmine',\r\n        'url': 'http://jasmine.github.io/',\r\n        'description': 'Behavior-Driven JavaScript.',\r\n        'logo': 'jasmine.png'\r\n      },\r\n      {\r\n        'title': 'Karma',\r\n        'url': 'http://karma-runner.github.io/',\r\n        'description': 'Spectacular Test Runner for JavaScript.',\r\n        'logo': 'karma.png'\r\n      },\r\n      {\r\n        'title': 'Protractor',\r\n        'url': 'https://github.com/angular/protractor',\r\n        'description': 'End to end test framework for AngularJS applications built on top of WebDriverJS.',\r\n        'logo': 'protractor.png'\r\n      },\r\n      {\r\n        'title': 'Bootstrap',\r\n        'url': 'http://getbootstrap.com/',\r\n        'description': 'Bootstrap is the most popular HTML, CSS, and JS framework for developing responsive, mobile first projects on the web.',\r\n        'logo': 'bootstrap.png'\r\n      },\r\n      {\r\n        'title': 'Angular UI Bootstrap',\r\n        'url': 'http://angular-ui.github.io/bootstrap/',\r\n        'description': 'Bootstrap components written in pure AngularJS by the AngularUI Team.',\r\n        'logo': 'ui-bootstrap.png'\r\n      }\r\n    ];\r\n\r\n    this.getTec = getTec;\r\n\r\n    function getTec() {\r\n      return data;\r\n    }\r\n  }\r\n\r\n})();\r\n\n(function(app) {\r\n  'use strict';\r\n\r\n  app.component('esSearch', {\r\n    templateUrl: 'app/components/search/search.html',\r\n    bindings: {\r\n      onSearchChanged: '&'\r\n    },\r\n    controllerAs: 'searchVm',\r\n    controller: SearchController\r\n  });\r\n\r\n  function SearchController() {\r\n    var vm = this;\r\n\r\n    var q = vm.q;\r\n    Object.defineProperty(this, 'q', {\r\n      get: function() {\r\n        return this._q;\r\n      },\r\n      set: function(value) {\r\n        this._q = value;\r\n        vm.onSearchChanged({q: value});\r\n      }\r\n    })\r\n  }\r\n\r\n}(angular.module('festima')));\r\n\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('festima')\r\n    .directive('acmeNavbar', acmeNavbar);\r\n\r\n  /** @ngInject */\r\n  function acmeNavbar() {\r\n    var directive = {\r\n      restrict: 'E',\r\n      templateUrl: 'app/components/navbar/navbar.html',\r\n      scope: {\r\n          creationDate: '='\r\n      },\r\n      controller: NavbarController,\r\n      controllerAs: 'vm',\r\n      bindToController: true\r\n    };\r\n\r\n    return directive;\r\n\r\n    /** @ngInject */\r\n    function NavbarController(moment, session) {\r\n      var vm = this;\r\n\r\n      session.profile().then(function(user) {\r\n        vm.user = user;\r\n      });\r\n\r\n      // \"vm.creation\" is avaible by directive option \"bindToController: true\"\r\n      vm.relativeDate = moment(vm.creationDate).fromNow();\r\n\r\n\r\n    }\r\n  }\r\n\r\n})();\r\n\nangular.module('festima')\r\n  .controller('MessagesModalController', function ($scope, $uibModalInstance, position, messages, onNewMessage) {\r\n    var vm = this;\r\n\r\n    vm.messages = messages;\r\n    vm.onNewMessage = onNewMessage;\r\n\r\n    vm.ok = function () {\r\n      // $uibModalInstance.close($scope.selected.item);\r\n      $uibModalInstance.close(position);\r\n    };\r\n\r\n    vm.cancel = function () {\r\n      $uibModalInstance.dismiss('cancel');\r\n    };\r\n\r\n    vm.addNewMessage = function() {\r\n      vm.onNewMessage(vm.newMessage);\r\n      vm.newMessage = {};\r\n    };\r\n  }\r\n);\r\n\nangular.module('festima')\r\n  .controller('MessagesButtonController', function($uibModal, $log, moment, Message, messagesManager, session) {\r\n    var vm = this;\r\n\r\n    vm.openMessages = function () {\r\n      // var _messages;\r\n      var modalInstance;\r\n\r\n      messagesManager.loadAllMessages(vm.position.id).then(function(data) {\r\n        vm.messages = data;\r\n\r\n        modalInstance = $uibModal.open({\r\n          animation: true,\r\n          templateUrl: 'app/components/messagesButton/messages-modal.html',\r\n          controller: 'MessagesModalController',\r\n          controllerAs: 'messagesModalVm',\r\n          size: 'lg',\r\n          resolve: {\r\n            position: function () {\r\n              return vm.position;\r\n            },\r\n            messages: function() {\r\n              return vm.messages;\r\n            },\r\n            onNewMessage: function() {\r\n              return vm.addMessage;\r\n            }\r\n          }\r\n        });\r\n\r\n        modalInstance.result.then(function (selectedItem) {\r\n          // $scope.selected = selectedItem;\r\n        }, function () {\r\n          $log.info('Modal dismissed at: ' + new Date());\r\n        });\r\n      });\r\n    };\r\n\r\n    vm.addMessage = function(_message) {\r\n      var msg = new Message(angular.extend(_message, {positionId: vm.position.id}));\r\n\r\n      msg.save().then(function(id) {\r\n        // messagesManager.loadAllMessages(vm.position.id).then(function(data) {\r\n        //   angular.copy(data, vm.messages);\r\n        // });\r\n        messagesManager.getMessage(id).then(function(message) {\r\n          vm.messages.push(message);\r\n        });\r\n      });\r\n    };\r\n  }\r\n);\r\n\nangular.module('festima').component('messagesButton', {\r\n  templateUrl: 'app/components/messagesButton/messages-button.html',\r\n  bindings: {\r\n    position: '<'\r\n  },\r\n  controller: 'MessagesButtonController',\r\n  controllerAs: 'messagesButtonVm'\r\n});\r\n\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('festima')\r\n    .directive('acmeMalarkey', acmeMalarkey);\r\n\r\n  /** @ngInject */\r\n  function acmeMalarkey(malarkey) {\r\n    var directive = {\r\n      restrict: 'E',\r\n      scope: {\r\n        extraValues: '='\r\n      },\r\n      template: '&nbsp;',\r\n      link: linkFunc,\r\n      controller: MalarkeyController,\r\n      controllerAs: 'vm'\r\n    };\r\n\r\n    return directive;\r\n\r\n    function linkFunc(scope, el, attr, vm) {\r\n      var watcher;\r\n      var typist = malarkey(el[0], {\r\n        typeSpeed: 40,\r\n        deleteSpeed: 40,\r\n        pauseDelay: 800,\r\n        loop: true,\r\n        postfix: ' '\r\n      });\r\n\r\n      el.addClass('acme-malarkey');\r\n\r\n      angular.forEach(scope.extraValues, function(value) {\r\n        typist.type(value).pause().delete();\r\n      });\r\n\r\n      watcher = scope.$watch('vm.contributors', function() {\r\n        angular.forEach(vm.contributors, function(contributor) {\r\n          typist.type(contributor.login).pause().delete();\r\n        });\r\n      });\r\n\r\n      scope.$on('$destroy', function () {\r\n        watcher();\r\n      });\r\n    }\r\n\r\n    /** @ngInject */\r\n    function MalarkeyController($log, githubContributor) {\r\n      var vm = this;\r\n\r\n      vm.contributors = [];\r\n\r\n      activate();\r\n\r\n      function activate() {\r\n        return getContributors().then(function() {\r\n          $log.info('Activated Contributors View');\r\n        });\r\n      }\r\n\r\n      function getContributors() {\r\n        return githubContributor.getContributors(10).then(function(data) {\r\n          vm.contributors = data;\r\n\r\n          return vm.contributors;\r\n        });\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n})();\r\n\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('festima')\r\n    .factory('githubContributor', githubContributor);\r\n\r\n  /** @ngInject */\r\n  function githubContributor($log, $http) {\r\n    var apiHost = 'https://api.github.com/repos/Swiip/generator-gulp-angular';\r\n\r\n    var service = {\r\n      apiHost: apiHost,\r\n      getContributors: getContributors\r\n    };\r\n\r\n    return service;\r\n\r\n    function getContributors(limit) {\r\n      if (!limit) {\r\n        limit = 30;\r\n      }\r\n\r\n      return $http.get(apiHost + '/contributors?per_page=' + limit)\r\n        .then(getContributorsComplete)\r\n        .catch(getContributorsFailed);\r\n\r\n      function getContributorsComplete(response) {\r\n        return response.data;\r\n      }\r\n\r\n      function getContributorsFailed(error) {\r\n        $log.error('XHR Failed for getContributors.\\n' + angular.toJson(error.data, true));\r\n      }\r\n    }\r\n  }\r\n})();\r\n\n(function(app) {\r\n  'use strict';\r\n\r\n  app.component('esDictionaryAutocomplete', {\r\n    templateUrl: 'app/components/dictionaryAutocomplete/dictionary-autocomplete.html',\r\n    bindings: {\r\n      key: '@',\r\n      selected: '='\r\n    },\r\n    controller: DictionaryAutocompleteController,\r\n    controllerAs: 'vm'\r\n  });\r\n\r\n  /** @ngInject */\r\n  function DictionaryAutocompleteLink(scope, element, attrs, controller) {\r\n    controller.key = attrs[this.name];\r\n  }\r\n\r\n  /** @ngInject */\r\n  function DictionaryAutocompleteController($sce, dictionaries) {\r\n    var vm = this;\r\n\r\n    vm.items = [];\r\n\r\n    vm.trustAsHtml = function(value) {\r\n      return $sce.trustAsHtml(value);\r\n    };\r\n\r\n    vm.refreshItems = function(q) {\r\n      dictionaries.itemsByKey(vm.key, undefined, undefined, q).then(function(items) {\r\n        vm.items = items;\r\n      });\r\n    };\r\n\r\n    vm.refreshItems();\r\n  }\r\n\r\n} (angular.module('festima')));\r\n\n(function(app) {\r\n\r\n  app.component('esDictionary', {\r\n    templateUrl: 'app/components/dictionary/dictionary.html',\r\n    bindings: {\r\n      // dictionary: '<',\r\n      key: '<'\r\n    },\r\n    controllerAs: 'dictionaryVm',\r\n    controller: DictionaryComponentController\r\n  });\r\n\r\n  function DictionaryComponentController($q, dictionaries) {\r\n    var vm = this;\r\n\r\n    vm.items = [];\r\n    vm.newItem = {};\r\n    vm.currentPage = 1;\r\n    vm.itemsPerPage = 10;\r\n\r\n    vm.add = function(item) {\r\n      dictionaries.addItem(vm.key, item).then(function(item) {\r\n        vm.newItem = {};\r\n        vm.pageChanged();  // update items\r\n      });\r\n    };\r\n\r\n    vm.pageChanged = function() {\r\n      var items = dictionaries.itemsByKey(vm.key, (vm.currentPage - 1) * vm.itemsPerPage, vm.itemsPerPage);\r\n      var count = dictionaries.countItemsByKey(vm.key);\r\n\r\n      $q.all({items: items, count: count}).then(function(result) {\r\n        vm.items = result.items;\r\n        vm.totalItems = result.count;\r\n      });\r\n    };\r\n\r\n    vm.pageChanged();\r\n  }\r\n\r\n} (angular.module('festima')));\r\n\n(function(app) {\r\n  'use strict';\r\n\r\n  app.component('esDealerPositions', {\r\n    templateUrl: 'app/components/dealerPositions/dealer-positions.html',\r\n    bindings: {\r\n      positions: '<',\r\n      newPosition: '<',\r\n      onAddPosition: '&',\r\n      onDeletePosition: '&'\r\n    },\r\n    controller: DealerPositionsController,\r\n    controllerAs: 'positionsVm',\r\n    transclude: true\r\n  });\r\n\r\n  /** @ngInject */\r\n  function DealerPositionsController() {\r\n    var vm = this;\r\n\r\n    vm.types = ['фасады', 'интерьеры'];\r\n    vm.statuses = ['на согласовании', 'утвержден', 'отгружен','не согласован'];\r\n    // vm.statuses = [\r\n    //   { code: 'PRESALE', label: 'на согласовании' },\r\n    //   { code: 'APPROVED', label: 'утвержден' },\r\n    //   { code: 'SHIPPED', label: 'отгружен' },\r\n    //   { code: 'REJECTED', label: 'не согласован' }\r\n    // ];\r\n\r\n    angular.extend(vm, {\r\n\r\n      addNewPosition: function() {\r\n        var newPosition = angular.copy(vm.newPosition);\r\n        angular.extend(newPosition, vm.inputPosition);\r\n        vm.inputPosition = {};\r\n        vm.onAddPosition({dealerId: newPosition.dealerId, position: newPosition});\r\n      },\r\n\r\n      removePosition: function(position) {\r\n        vm.onDeletePosition({dealerId: position.dealer.id, position: position});\r\n      },\r\n\r\n      activePosition: function(item) {\r\n        return item.removed === undefined;\r\n      }\r\n\r\n    });\r\n  }\r\n\r\n}(angular.module('festima')));\r\n\n(function(app) {\r\n  'use strict';\r\n\r\n  app.component('esComments', {\r\n    templateUrl: 'app/components/comments/comments.html',\r\n    bindings: {\r\n      comments: '<',\r\n      onAddComment: '&'\r\n    },\r\n    controllerAs: 'commentsVm',\r\n    controller: CommentsController\r\n  });\r\n\r\n  function CommentsController() {\r\n    var vm = this;\r\n    vm.newComment = {};\r\n\r\n    vm.addNewComment = function() {\r\n      vm.onAddComment({comment: vm.newComment.text});\r\n      vm.newComment = {};\r\n    }\r\n  }\r\n\r\n}(angular.module('festima')));\r\n\n(function(app) {\r\n  'use strict';\r\n\r\n  app.component('esComment', {\r\n    templateUrl: 'app/components/comment/comment.html',\r\n    bindings: {\r\n      comment: '<'\r\n    },\r\n    controllerAs: 'commentVm',\r\n    controller: CommentController\r\n  });\r\n\r\n  function CommentController() {\r\n\r\n  }\r\n\r\n}(angular.module('festima')));\r\n\n(function(app){\r\n  'use strict';\r\n\r\n  app.component('esBuildingsNearby', {\r\n    templateUrl: 'app/components/buildingsNearby/buildings-nearby.html',\r\n    bindings: {\r\n      address: '<'\r\n    },\r\n    controllerAs: 'vm',\r\n    controller: BuildingsNearbyController\r\n  });\r\n\r\n  function BuildingsNearbyController(maps, addresses, toastr) {\r\n    var vm = this;\r\n\r\n    var findNearbyBuildings = function(address) {\r\n      var latLng;\r\n\r\n      if (address) {\r\n        latLng = maps.centroidToLatlng(address.geometry.centroid);\r\n        addresses.listWithinRadius(latLng, 1000).then(\r\n          function(buildings) {\r\n            if (!_.isEmpty(buildings)) {\r\n              toastr.error('Найдены объекты в радиусе 1 км!');\r\n            }\r\n            vm.buildings = buildings;\r\n          }\r\n        );\r\n      }\r\n    };\r\n\r\n    Object.defineProperty(vm, 'address', {\r\n      get: function() {\r\n        return vm._address;\r\n      },\r\n      set: function(newVal) {\r\n        vm._address = newVal;\r\n        findNearbyBuildings(newVal);\r\n      }\r\n    });\r\n  }\r\n\r\n}(angular.module('festima')));\r\n\n(function(app) {\r\n  'use strict';\r\n\r\n  app.service('statuses', StatusesService);\r\n\r\n  function StatusesService() {\r\n    var statuses = [\r\n      { code: 'ACTIVE', label: 'в работе' },\r\n      { code: 'SHIPPED', label: 'отгружен' },\r\n      { code: 'SUSPEND', label: 'заморожен' },\r\n      { code: 'FAILED', label: 'проигран' }\r\n    ];\r\n\r\n    this.list = function() {\r\n      return statuses;\r\n    };\r\n  }\r\n\r\n}(angular.module('festima')));\r\n\n(function(app) {\r\n  'use strict';\r\n\r\n  app.component('esBuildingStatus', {\r\n    templateUrl: 'app/components/buildingStatus/building-status.html',\r\n    bindings: {\r\n      statusCode: '<'\r\n    },\r\n    controllerAs: 'statusVm',\r\n    controller: BuildingStatusController\r\n  });\r\n\r\n  function BuildingStatusController(statuses) {\r\n    var vm = this;\r\n\r\n    vm.getStatusLabel = function() {\r\n      return _.find(statuses.list(), function(e) { return e.code === vm.statusCode; }).label;\r\n    };\r\n  }\r\n\r\n}(angular.module('festima')));\r\n\n(function(app) {\r\n  'use strict';\r\n\r\n  app.component('esBuildingForm', {\r\n    templateUrl: 'app/components/buildingForm/building-form.html',\r\n    bindings: {\r\n      building: '<'\r\n    },\r\n    controller: BuildingFormController,\r\n    controllerAs: 'buildingFormVm',\r\n    transclude: true\r\n  });\r\n\r\n  function BuildingFormController(statuses) {\r\n    var vm = this;\r\n\r\n    vm.statuses = statuses.list();\r\n  }\r\n\r\n}(angular.module('festima')));\r\n\n(function(app) {\n  'use strict';\n\n  app.component('esBuildingFilterPanel', {\n    templateUrl: 'app/components/buildingFilterPanel/building-filter-panel.html',\n    bindings: {\n      onApplyFilters: '&'\n    },\n    controllerAs: 'filterPanelVm',\n    controller: BuildingFilterPanel\n  });\n\n  function BuildingFilterPanel(users, statuses, dealers) {\n    var vm = this;\n\n    vm.users = [];\n    vm.statuses = [];\n    vm.dealers = [];\n    vm.itemsPerPageValues = [50, 100, 200];\n    vm.filters = {status: []};\n    // vm.filters = {status: ['ACTIVE']};\n    vm.criteria = {};\n    vm.criteria.currentPage = 1;\n    vm.criteria.itemsPerPage = 100;\n\n    function loadUsers() {\n      users.list().then(function(usersList) {\n        vm.users = usersList;\n      });\n    }\n\n    function loadStatuses() {\n      vm.statuses = statuses.list();\n    }\n\n    function loadDealers() {\n      dealers.listAll().then(function(dealersList) {\n        vm.dealers = dealersList;\n      });\n    }\n\n    loadUsers();\n    loadStatuses();\n    loadDealers();\n\n    vm.applyFilters = function() {\n      vm.onApplyFilters({criteria: vm.criteria, filters: vm.filters});\n    }\n  }\n\n}(angular.module('festima')));\n\n'use strict';\r\n\r\nangular.module('festima')\r\n  .service('buildingDealersService1', function (dealers, positions) {\r\n      var buildingDealersMap = {};  // map dealer name and positions to their ids\r\n      var dealersMap = {};          // map dealers to their ids\r\n      var buildingPositions;\r\n      var dealerList;\r\n      var _dealers;\r\n\r\n      angular.extend(this, {\r\n        buildingDealersMap: buildingDealersMap,\r\n\r\n        loadPositions: function (buildingId) {\r\n          positions.list1(buildingId).then(function (response) {\r\n            buildingPositions = response.data;\r\n\r\n            var dealerId;\r\n            for (var i = 0; i < buildingPositions.length; i++) {\r\n              dealerId = buildingPositions[i].dealerId;\r\n\r\n              if (buildingDealersMap[dealerId] === undefined) {\r\n                buildingDealersMap[dealerId] = {name: dealersMap[dealerId].name, positions: []};\r\n              }\r\n\r\n              buildingDealersMap[dealerId].positions.push(buildingPositions[i]);\r\n            }\r\n          }, function (response) {\r\n            console.log(\"couldn't load positions\");\r\n          });\r\n        },\r\n\r\n        savePositions: function () {\r\n          var dealerMap;\r\n          var position;\r\n          // save changes in dealers positions\r\n          for (var dealerId in buildingDealersMap) {\r\n            dealerMap = buildingDealersMap[dealerId];\r\n\r\n            for (var i = 0; i < dealerMap.positions.length; i++) {\r\n              position = dealerMap.positions[i];\r\n\r\n              if (position.buildingId === undefined) {\r\n                position.buildingId = position.building.id;\r\n                delete position['building'];\r\n              }\r\n\r\n              if (position.id === undefined) {\r\n                positions.create1(position).then(function (resp) {\r\n                  position.id = resp.data.id;\r\n                  console.log('Saved position ' + position.id);\r\n                });\r\n              }\r\n\r\n              if (position.removed === true) {\r\n                positions.delete(position.id).then(function (resp) {\r\n                  var index = dealerMap.positions.map(function (e) {\r\n                    return e.id;\r\n                  }).indexOf(position.id);\r\n                  dealerMap.positions.splice(index, 1);\r\n                });\r\n              }\r\n            }\r\n          }\r\n        },\r\n\r\n        addDealerPosition: function (dealerId, position) {\r\n          buildingDealersMap[dealerId].positions.push(position);\r\n        },\r\n\r\n        removeDealerPosition: function (dealerId, position) {\r\n          var dealerMap = buildingDealersMap[dealerId];\r\n\r\n          if (position.id === undefined) {\r\n            var index = dealerMap.positions.indexOf(position);\r\n            if (index !== -1) {\r\n              dealerMap.positions.splice(index, 1);\r\n            }\r\n          } else {\r\n            position.removed = true;\r\n          }\r\n        },\r\n\r\n        dealers: _dealers,\r\n\r\n        loadDealers: function () {\r\n          dealers.list().then(function (resp) {\r\n            dealerList = resp.data;\r\n\r\n            var dealer;\r\n            // todo: If dealers not loaded yet?\r\n            for (var i = 0; i < dealerList.length; i++) {\r\n              dealer = dealerList[i];\r\n              if (dealersMap[dealer.id] === undefined) {\r\n                dealersMap[dealer.id] = dealer;\r\n              }\r\n            }\r\n          })\r\n        },\r\n\r\n        refreshDealers: function (q) {\r\n          dealers.list().then(function (resp) {\r\n            _dealers = resp.data;\r\n            // angular.copy(_dealers, resp.data);\r\n\r\n            var dealer;\r\n            for (var i = 0; i < _dealers.length; i++) {\r\n              dealer = _dealers[i];\r\n              if (dealersMap[dealer.id] === undefined) {\r\n                dealersMap[dealer.id] = dealer;\r\n              }\r\n            }\r\n          })\r\n        },\r\n        \r\n        addDealer: function(dealer) {\r\n          var index = Object.keys(buildingDealersMap).indexOf(dealer.id);\r\n\r\n          if (index === -1) {\r\n            buildingDealersMap[dealer.id] = {name: dealer.name, positions: []};\r\n          }\r\n        }\r\n      });\r\n    }\r\n  );\r\n\n(function(app) {\r\n  'use strict';\r\n\r\n  app.component('esBuildingContacts', {\r\n    templateUrl: 'app/components/buildingContacts/building-contacts.html',\r\n    bindings: {\r\n      contacts: '<',\r\n      onRemoveContact: '&'\r\n    },\r\n    controllerAs: 'buildingContactsVm',\r\n    controller: BuildingContactsController\r\n  });\r\n\r\n  function BuildingContactsController() {\r\n    var vm = this;\r\n\r\n    vm.removeContact = function(contact) {\r\n      vm.onRemoveContact({contact: contact});\r\n    };\r\n  }\r\n\r\n}(angular.module('festima')));\r\n\nangular.module('festima')\r\n  .controller('BuildingAddressController', function (maps) {\r\n      var vm = this;\r\n\r\n      var latLng0;\r\n\r\n      if (angular.isDefined(vm.building)) {\r\n        setSelected(vm.building.address);\r\n      }\r\n\r\n      function setSelected(address) {\r\n        vm.asyncSelected = address;\r\n      }\r\n\r\n      DG.then(function () {\r\n\r\n        if (angular.isDefined(vm.building) && angular.isDefined(vm.building.location)) {\r\n          latLng0 = maps.centroidToLatlng(vm.building.location);\r\n        }\r\n\r\n        maps.initMap(latLng0).then(function (map) {\r\n          vm.map = map;\r\n\r\n          if (angular.isDefined(latLng0)) {\r\n            vm.marker = maps.getMarker(latLng0);\r\n            vm.marker.addTo(vm.map);\r\n          }\r\n\r\n          vm.map.on('click', function (e) {\r\n            var latLng = [e.latlng.lat, e.latlng.lng];\r\n            console.log(latLng);\r\n\r\n            maps.searchCoords(latLng).then(function (location) {\r\n              vm.location = location;\r\n              vm.address = location.name;\r\n\r\n              if (typeof vm.marker !== 'undefined') {\r\n                vm.map.removeLayer(vm.marker);\r\n              }\r\n\r\n              vm.marker = maps.getMarker(latLng);\r\n              var text = location.name + '.<br />';\r\n\r\n              text += location.attributes.buildingname;\r\n              vm.marker.bindPopup(text);\r\n              vm.marker.addTo(vm.map);\r\n\r\n              var locationFullName = location.name;\r\n\r\n              var item = {geometry: {}};\r\n              item.full_name = locationFullName;\r\n              item.geometry.centroid = location.centroid;\r\n\r\n              if (_.isEmpty(location.attributes.number)) {\r\n                console.log('No building number!');\r\n                item.geometry.centroid = maps.latLngToWkt(latLng);\r\n              }\r\n\r\n              setSelected(locationFullName);\r\n              vm.onAddressSelected({address: item});\r\n            });\r\n          });\r\n        });\r\n      });\r\n\r\n      vm.searchAddress = function (q) {\r\n        maps.searchAddress(q).then(function (latLng) {\r\n\r\n          if (typeof vm.marker !== 'undefined') {\r\n            vm.map.removeLayer(vm.marker);\r\n          }\r\n\r\n          // создаем и добавляем маркер на карту\r\n          vm.marker = maps.getMarker(latLng);\r\n          vm.map.addLayer(vm.marker);\r\n\r\n          // центрируем карту в координаты маркера\r\n          vm.map.panTo(latLng);\r\n        });\r\n      };\r\n\r\n      vm.getLocation = function (q) {\r\n        return maps.suggestions(q).then(function (items) {\r\n          return items.map(function (item) {\r\n            return item;\r\n          });\r\n        });\r\n      };\r\n\r\n      vm.onSelect = function (itemData, model, label) {\r\n        maps.search(itemData.hint.text).then(function (items) {\r\n          var item = items[0];\r\n\r\n          if (typeof vm.marker !== 'undefined') {\r\n            vm.map.removeLayer(vm.marker);\r\n          }\r\n\r\n          var latLng = maps.centroidToLatlng(item.geometry.centroid);\r\n\r\n          // создаем и добавляем маркер на карту\r\n          vm.marker = maps.getMarker(latLng);\r\n          vm.map.addLayer(vm.marker);\r\n\r\n          // центрируем карту в координаты маркера\r\n          vm.map.setZoom(maps.detailedZoom);\r\n          vm.map.panTo(latLng);\r\n\r\n          setSelected(item.full_name);\r\n          vm.onAddressSelected({address: item});\r\n        });\r\n      };\r\n    }\r\n  );\r\n\r\n// angular.module('festima')\r\n//   .controller('BuildingAddressController', function($q, maps) {\r\n//     var vm = this;\r\n//\r\n//     if (angular.isDefined(vm.building)) {\r\n//       setSelected(vm.building.address);\r\n//     }\r\n//\r\n//     function setSelected(address) {\r\n//       vm.asyncSelected = address;\r\n//     }\r\n//\r\n//     var _building = vm.building;\r\n//     Object.defineProperty(vm, 'building', {\r\n//       get: function() {\r\n//         return _building;\r\n//       },\r\n//       set: function(building) {\r\n//         _building = building;\r\n//         loadMap(building);\r\n//       }\r\n//     });\r\n//\r\n//     function displayLocation(latLng0) {\r\n//\r\n//       if (angular.isDefined(latLng0)) {\r\n//         maps.getMarkerPromise(latLng0).then(function(marker) {\r\n//           vm.marker = marker;\r\n//           vm.marker.addTo(vm.map);\r\n//         });\r\n//       }\r\n//\r\n//       vm.map.on('click', function (e) {\r\n//         var latLng = [e.latlng.lat, e.latlng.lng];\r\n//         console.log(latLng);\r\n//\r\n//         maps.searchCoords(latLng).then(function (location) {\r\n//           vm.location = location;\r\n//           vm.address = location.name;\r\n//\r\n//           if (typeof vm.marker !== 'undefined') {\r\n//             vm.map.removeLayer(vm.marker);\r\n//           }\r\n//\r\n//           maps.getMarkerPromise(latLng).then(function(marker) {\r\n//             vm.marker = marker;\r\n//             var text = location.name + '.<br />';\r\n//\r\n//             text += location.attributes.buildingname;\r\n//             vm.marker.bindPopup(text);\r\n//             vm.marker.addTo(vm.map);\r\n//           });\r\n//\r\n//           var locationFullName = location.name;\r\n//\r\n//           var item = {geometry: {}};\r\n//           item.full_name = locationFullName;\r\n//           item.geometry.centroid = location.centroid;\r\n//\r\n//           if (_.isEmpty(location.attributes.number)) {\r\n//             console.log('No building number!');\r\n//             item.geometry.centroid = maps.latLngToWkt(latLng);\r\n//           }\r\n//\r\n//           setSelected(locationFullName);\r\n//           vm.onAddressSelected({address: item});\r\n//         });\r\n//       });\r\n//     }\r\n//\r\n//     function loadMap(building) {\r\n//\r\n//       maps.initDgisContainer().then(function(container) {\r\n//         var latLng;\r\n//\r\n//         if (angular.isDefined(building) && angular.isDefined(building.location)) {\r\n//           latLng = container.dgis.estima.centroidToLatlng(building.location);\r\n//         }\r\n//\r\n//         var mapConfig = container.dgis.estima.configMap(latLng);\r\n//\r\n//         if (angular.isUndefined(vm.map)) {\r\n//           vm.map = container.dgis.map('map', mapConfig);\r\n//         } else {\r\n//           var elem = vm.map.getContainer();\r\n//           var elemParent = elem.parentNode;\r\n//           var newElem = elem.cloneNode(false);\r\n//           elemParent.replaceChild(newElem, elem);\r\n//           vm.map = container.dgis.map(newElem, mapConfig);\r\n//         }\r\n//\r\n//         displayLocation(latLng);\r\n//       });\r\n//     }\r\n//\r\n//     function initializeMap() {\r\n//       loadMap(vm.building);\r\n//     }\r\n//\r\n//     initializeMap();\r\n//\r\n//     vm.searchAddress = function(q) {\r\n//       maps.searchAddress(q).then(function(latLng){\r\n//\r\n//         if (typeof vm.marker !== 'undefined') {\r\n//           vm.map.removeLayer(vm.marker);\r\n//         }\r\n//\r\n//         // создаем и добавляем маркер на карту\r\n//         vm.marker = maps.getMarker(latLng);\r\n//         vm.map.addLayer(vm.marker);\r\n//\r\n//         // центрируем карту в координаты маркера\r\n//         vm.map.panTo(latLng);\r\n//       });\r\n//     };\r\n//\r\n//     vm.getLocation = function(q) {\r\n//       return maps.suggestions(q).then(function(items){\r\n//         return items.map(function(item){\r\n//           return item;\r\n//         });\r\n//       });\r\n//     };\r\n//\r\n//     vm.onSelect = function(itemData, model, label) {\r\n//       maps.search(itemData.hint.text).then(function(items) {\r\n//         var item = items[0];\r\n//\r\n//         if (typeof vm.marker !== 'undefined') {\r\n//           vm.map.removeLayer(vm.marker);\r\n//         }\r\n//\r\n//         var latLng = maps.centroidToLatlng(item.geometry.centroid);\r\n//\r\n//         // создаем и добавляем маркер на карту\r\n//         vm.marker = maps.getMarker(latLng);\r\n//         vm.map.addLayer(vm.marker);\r\n//\r\n//         // центрируем карту в координаты маркера\r\n//         vm.map.setZoom(maps.detailedZoom);\r\n//         vm.map.panTo(latLng);\r\n//\r\n//         setSelected(item.full_name);\r\n//         vm.onAddressSelected({address: item});\r\n//       });\r\n//     };\r\n//   }\r\n// );\r\n\nangular.module('festima')\r\n  .component('esBuildingAddress', {\r\n    templateUrl: 'app/components/buildingAddress/building-address.html',\r\n    bindings: {\r\n      building: '<',\r\n      onAddressSelected: '&'\r\n    },\r\n    controllerAs: 'addressVm',\r\n    controller: 'BuildingAddressController'\r\n  }\r\n);\r\n\n(function(app) {\r\n  'use strict';\r\n\r\n  app.component('esAddressInput', {\r\n    templateUrl: 'app/components/addressInput/address-input.html',\r\n    bindings: {\r\n      onAddressSelected: '&'\r\n    },\r\n    controllerAs: 'addressInputVm',\r\n    controller: AddressInputController\r\n  });\r\n\r\n  function AddressInputController(maps) {\r\n    var vm = this;\r\n\r\n    vm.getLocation = function(q) {\r\n      return maps.suggestions(q).then(function(items){\r\n        return items.map(function(item){\r\n          return item;\r\n        });\r\n      });\r\n    };\r\n\r\n    vm.onSelect = function(itemData, model, label) {\r\n      maps.search(itemData.hint.text).then(function(items) {\r\n        var item = items[0];\r\n\r\n        vm.onAddressSelected({address: item});\r\n      });\r\n    };\r\n  }\r\n\r\n}(angular.module('festima')));\r\n\nangular.module('festima')\r\n  .controller('AddDealerButtonController', function(dealers){\r\n    var vm = this;\r\n\r\n    vm.addDealer = function() {\r\n      if ( !vm.onCheckAdded({dealer: vm.dealer})) {\r\n        vm.onAddDealer({dealer: vm.dealer});\r\n      }\r\n\r\n      vm.dealer = undefined;\r\n    };\r\n\r\n    vm.refreshDealers = function (q) {\r\n      dealers.findAllByQuery().then(function (dealers) {\r\n        vm.dealers = dealers;\r\n      })\r\n    };\r\n\r\n  }\r\n);\r\n\nangular.module('festima').component('esAddDealerButton', {\r\n  templateUrl: 'app/components/addDealerButton/add-dealer-button.html',\r\n  bindings: {\r\n    onAddDealer: '&',\r\n    onCheckAdded: '&'\r\n  },\r\n  controller: 'AddDealerButtonController',\r\n  controllerAs: 'addDealerVm'\r\n});\r\n\n(function(app) {\r\n  'use strict';\r\n\r\n  app.component('esAddContact', {\r\n    templateUrl: 'app/components/addContact/add-contact.html',\r\n    bindings: {\r\n      onContactAdded: '&'\r\n    },\r\n    controllerAs: 'addContactVm',\r\n    controller: AddContactController\r\n  });\r\n\r\n  function AddContactController(appConfig, $http) {\r\n    var vm = this;\r\n\r\n    function initNewContact() {\r\n      vm.newItem = {};\r\n      vm.contacts = [];\r\n\r\n      Object.defineProperty(vm.newItem, 'contactType', {\r\n        get: function() {\r\n          return vm.newItem._contactType;\r\n        },\r\n        set: function(newValue) {\r\n          vm.newItem._contactType = newValue;\r\n          getContacts(newValue).then(function(contacts) {\r\n            vm.contacts = contacts;\r\n          });\r\n        }\r\n      });\r\n    }\r\n\r\n    function getContactTypes() {\r\n      return $http.get(appConfig.apiUrl + '/dictionaries').then(function(response) {\r\n        return response.data;\r\n      })\r\n    }\r\n\r\n    function getContacts(key) {\r\n      return $http.get(appConfig.apiUrl + '/dictionaries/' + key + '/items').then(function(response) {\r\n        return response.data;\r\n      });\r\n    }\r\n\r\n    initNewContact();\r\n\r\n    getContactTypes().then(function(contactTypes) {\r\n      vm.contactTypes = contactTypes;\r\n    });\r\n\r\n    vm.addContact = function(newContact) {\r\n      newContact.typeName = _.find(vm.contactTypes, function(type) { return type.key == newContact.contactType; }).name;\r\n      newContact.contactName = _.find(vm.contacts, function(contact) { return contact.id == newContact.contactId; }).title;\r\n      vm.onContactAdded({newContact: newContact});\r\n      initNewContact();\r\n    };\r\n  }\r\n\r\n}(angular.module('festima')));\r\n\nangular.module('festima')\r\n  .factory('usersManager', ['$http', '$q', 'appConfig', 'User', function ($http, $q, appConfig, User) {\r\n    var cachedPromises = {};\r\n    var usersManager = {\r\n      _pool: {},\r\n      _retrieveInstance: function (id, data) {\r\n        var instance = this._pool[id];\r\n\r\n        if (instance) {\r\n          instance.setData(data);\r\n        } else {\r\n          instance = new User(data);\r\n          this._pool[id] = instance;\r\n        }\r\n\r\n        return instance;\r\n      },\r\n\r\n      _search: function (id) {\r\n        return this._pool[id];\r\n      },\r\n\r\n      getUser: function (id) {\r\n        if (angular.isUndefined(cachedPromises[id])) {\r\n          cachedPromises[id] = $http.get(appConfig.apiUrl + '/users/' + id).then(function(response) {\r\n              return response.data;\r\n            })\r\n        }\r\n\r\n        return cachedPromises[id];\r\n      },\r\n\r\n      loadAllUsers: function () {\r\n        var deferred = $q.defer();\r\n        var scope = this;\r\n        $http.get(appConfig.apiUrl + '/users')\r\n          .success(function (itemsArray) {\r\n            var items = [];\r\n            itemsArray.forEach(function (itemData) {\r\n              var item = scope._retrieveInstance(itemData.id, itemData);\r\n              items.push(item);\r\n            });\r\n\r\n            deferred.resolve(items);\r\n          })\r\n          .error(function () {\r\n            deferred.reject();\r\n          });\r\n        return deferred.promise;\r\n      },\r\n\r\n      setUser: function (data) {\r\n        var scope = this;\r\n        var item = this._search(data.id);\r\n        if (item) {\r\n          item.setData(data);\r\n        } else {\r\n          item = scope._retrieveInstance(data);\r\n        }\r\n        return item;\r\n      }\r\n    };\r\n\r\n    return usersManager;\r\n  }]);\r\n\nangular.module('festima')\r\n  .factory('User', ['$http', 'appConfig', function ($http, appConfig) {\r\n      function User(data) {\r\n        if (data) {\r\n          this.setData(data);\r\n        }\r\n        // some init\r\n      };\r\n\r\n      User.prototype = {\r\n        setData: function (data) {\r\n          angular.extend(this, data);\r\n        },\r\n        save: function () {\r\n          return $http.post(appConfig.apiUrl + '/users', this);\r\n        },\r\n        delete: function () {\r\n          $http.delete(appConfig.apiUrl + '/users/' + this.id);\r\n        },\r\n        update: function () {\r\n          $http.put(appConfig.apiUrl + '/users/' + this.id, this);\r\n        },\r\n      };\r\n      return User;\r\n    }]\r\n  );\r\n\nangular.module('festima')\r\n  .factory('messagesManager', ['$http', '$q', 'Message', 'usersManager', 'appConfig', function ($http, $q, Message, usersManager, appConfig) {\r\n    var messagesManager = {\r\n      _pool: {},\r\n      _retrieveInstance: function (id, data) {\r\n        var instance = this._pool[id];\r\n\r\n        if (instance) {\r\n          instance.setData(data);\r\n        } else {\r\n          instance = new Message(data);\r\n          this._pool[id] = instance;\r\n        }\r\n\r\n        return instance;\r\n      },\r\n      _search: function (id) {\r\n        return this._pool[id];\r\n      },\r\n      _load: function (id, deferred) {\r\n        var scope = this;\r\n\r\n        $http.get(appConfig.apiUrl + '/messages/' + id)\r\n          .success(function (data) {\r\n            var itemData = data;\r\n            var item;\r\n\r\n            usersManager.getUser(itemData.author.id).then(function(data) {\r\n              // delete itemData.authorId;\r\n              itemData.author = data;\r\n              item = scope._retrieveInstance(itemData.id, itemData);\r\n              deferred.resolve(item);\r\n            });\r\n          })\r\n          .error(function () {\r\n            deferred.reject();\r\n          });\r\n      },\r\n\r\n      getMessage: function (id) {\r\n        var deferred = $q.defer();\r\n        var item = this._search(id);\r\n        if (item) {\r\n          deferred.resolve(item);\r\n        } else {\r\n          this._load(id, deferred);\r\n        }\r\n        return deferred.promise;\r\n      },\r\n\r\n      loadAllMessages: function (positionId) {\r\n        var deferred = $q.defer();\r\n        var scope = this;\r\n        $http.get(appConfig.apiUrl + '/messages', {params: {positionId: positionId}})\r\n          .success(function (itemsArray) {\r\n            var items = [];\r\n            var item;\r\n\r\n            if (itemsArray.length == 0) {\r\n              deferred.resolve([]);\r\n              return;\r\n            }\r\n\r\n            itemsArray.forEach(function (itemData) {\r\n              usersManager.getUser(itemData.author.id).then(function(data) {\r\n                // delete itemData.authorId;\r\n                itemData.author = data;\r\n                item = scope._retrieveInstance(itemData.id, itemData);\r\n                items.push(item);\r\n              }).then(function() {\r\n                deferred.resolve(items);\r\n              });\r\n            });\r\n          })\r\n          .error(function () {\r\n            deferred.reject();\r\n          });\r\n        return deferred.promise;\r\n      },\r\n\r\n      setMessage: function (data) {\r\n        var scope = this;\r\n        var item = this._search(data.id);\r\n        if (item) {\r\n          item.setData(data);\r\n        } else {\r\n          item = scope._retrieveInstance(data);\r\n        }\r\n        return item;\r\n      }\r\n    };\r\n\r\n    return messagesManager;\r\n  }]);\r\n\nangular.module('festima')\r\n  .service('messages', function($http) {\r\n    angular.extend(this, {\r\n      // list: function(positionId) {\r\n        // return $http.get('http://localhost:3000/api/messages', {params: {positionId: positionId}});\r\n      // }\r\n    });\r\n  }\r\n);\r\n\nangular.module('festima')\r\n  .factory('Message', ['$http', '$q', 'appConfig', function ($http, $q, appConfig) {\r\n      function Message(data) {\r\n        if (data) {\r\n          this.setData(data);\r\n        }\r\n        // some init\r\n      };\r\n\r\n      Message.prototype = {\r\n        setData: function (data) {\r\n          angular.extend(this, data);\r\n        },\r\n        save: function () {\r\n          var deferred = $q.defer();\r\n          var self = this;\r\n\r\n          if (this.id === undefined) {\r\n            $http.post(appConfig.apiUrl + '/messages', this).then(\r\n              function(response) {\r\n                angular.extend(self, response.data);\r\n                deferred.resolve(self.id)\r\n              },\r\n              function(response) {\r\n                deferred.reject();\r\n              }\r\n            );\r\n          } else {\r\n            this.update();\r\n            deferred.resolve(this.id);\r\n          }\r\n\r\n          return deferred.promise;\r\n        },\r\n        delete: function () {\r\n          $http.delete(appConfig.apiUrl + '/messages/' + this.id);\r\n        },\r\n        update: function () {\r\n          $http.put(appConfig.apiUrl + '/messages/' + this.id, this);\r\n        },\r\n      };\r\n      return Message;\r\n    }]\r\n  );\r\n\n(function (app) {\r\n  'use strict';\r\n\r\n  app.service('maps', ['$q', 'appConfig', function ($q, appConfig) {\r\n      var dgis;\r\n\r\n      function estimaModule(dgis) {\r\n\r\n        function configMap(latLng) {\r\n          var zoom = this.detailedZoom;\r\n\r\n          if (angular.isUndefined(latLng)) {\r\n            latLng = [55.752142, 37.617067];\r\n            zoom = this.overviewZoom;\r\n          }\r\n\r\n          return {\r\n            center: latLng,\r\n            zoom: zoom,\r\n            geoclicker: true,\r\n            showPhotos: false,\r\n            showBooklet: false\r\n          };\r\n        }\r\n\r\n        function centroidToLatlng(wkt) {\r\n          var point = dgis.Wkt.toPoints(wkt);\r\n          return [point[1], point[0]];\r\n        }\r\n\r\n        return {\r\n          detailedZoom: 16,\r\n          overviewZoom: 9,\r\n          configMap: configMap,\r\n          centroidToLatlng: centroidToLatlng\r\n        };\r\n      }\r\n\r\n      function initDgisContainer() {\r\n        var deferred = $q.defer();\r\n\r\n        if (DG.ready === false) {\r\n          DG.then(function () {\r\n\r\n            DG.estima = estimaModule(DG);\r\n\r\n            deferred.resolve({dgis: DG});\r\n          });\r\n        } else {\r\n          deferred.resolve({dgis: DG});\r\n        }\r\n\r\n        return deferred.promise;\r\n      }\r\n\r\n      angular.extend(this, {\r\n\r\n        detailedZoom: 16,\r\n        overviewZoom: 9,\r\n\r\n        initDgisContainer: initDgisContainer,\r\n\r\n        initMap: function (latLng) {\r\n          var zoom = this.detailedZoom;\r\n\r\n          if (angular.isUndefined(latLng)) {\r\n            latLng = [55.752142, 37.617067];\r\n            zoom = this.overviewZoom;\r\n          }\r\n\r\n          return initDgisContainer().then(function (container) {\r\n            dgis = container.dgis;\r\n            var map = container.dgis.map('map', {\r\n              center: latLng,\r\n              zoom: zoom,\r\n              geoclicker: true,\r\n              showPhotos: false,\r\n              showBooklet: false\r\n            });\r\n\r\n            return map;\r\n          })\r\n        },\r\n\r\n        suggestions: function (q) {\r\n          var deferred = $q.defer();\r\n\r\n          dgis.ajax({\r\n            url: 'http://catalog.api.2gis.ru/2.0/suggest/list',\r\n            data: {\r\n              key: appConfig.key2gis,\r\n              output: 'json',\r\n              region_id: 32,\r\n              q: q\r\n            },\r\n            type: 'GET',\r\n            success: function (data) {\r\n              deferred.resolve(data.result.items);\r\n            },\r\n            error: function (error) {\r\n              console.log(error);\r\n              deferred.reject();\r\n            }\r\n          });\r\n\r\n          return deferred.promise;\r\n        },\r\n\r\n        getById: function (id) {\r\n          var deferred = $q.defer();\r\n\r\n          dgis.ajax({\r\n            url: 'http://catalog.api.2gis.ru/2.0/geo/get',\r\n            data: {\r\n              key: appConfig.key2gis,\r\n              id: id,\r\n              fields: 'items.geometry.centroid'\r\n            },\r\n            type: 'GET',\r\n            success: function (data) {\r\n              deferred.resolve(data.result.items[0]);\r\n            },\r\n            error: function (error) {\r\n              console.log(error);\r\n              deferred.reject();\r\n            }\r\n          });\r\n\r\n          return deferred.promise;\r\n        },\r\n\r\n        searchAddress: function (q) {\r\n          var point, lng, lat;\r\n          var deferred = $q.defer();\r\n\r\n          dgis.ajax({\r\n            url: 'http://catalog.api.2gis.ru/geo/search',\r\n            data: {\r\n              key: appConfig.key2gis,\r\n              version: 1.3,\r\n              q: q\r\n            },\r\n            type: 'GET',\r\n            success: function (data) {\r\n              // считываем строку в WKT-формате и возвращаем объект Point\r\n              point = dgis.Wkt.toPoints(data.result[0].centroid);\r\n\r\n              // извлекаем координаты для маркера\r\n              lng = point[0];\r\n              lat = point[1];\r\n\r\n              deferred.resolve([lat, lng]);\r\n            },\r\n            error: function (error) {\r\n              console.log(error);\r\n              deferred.reject();\r\n            }\r\n          });\r\n\r\n          return deferred.promise;\r\n        },\r\n\r\n        searchCoords: function (latLng) {\r\n          var deferred = $q.defer();\r\n\r\n          dgis.ajax({\r\n            url: 'http://catalog.api.2gis.ru/geo/search',\r\n            data: {\r\n              key: appConfig.key2gis,\r\n              version: 1.3,\r\n              q: latLng[1] + ',' + latLng[0]\r\n            },\r\n            success: function (data) {\r\n\r\n              deferred.resolve(data.result[0]);\r\n            },\r\n            error: function (error) {\r\n              console.log(error);\r\n              deferred.reject();\r\n            }\r\n          });\r\n\r\n          return deferred.promise;\r\n        },\r\n\r\n        getMarker: function (latLng) {\r\n          return dgis.marker(latLng);\r\n        },\r\n        getMarkerPromise: function (latLng) {\r\n          return initDgisContainer().then(function (container) {\r\n            return container.dgis.marker(latLng);\r\n          });\r\n        },\r\n        centroidToLatlng: function (wkt) {\r\n          var point = DG.Wkt.toPoints(wkt);\r\n\r\n          return [point[1], point[0]];\r\n        },\r\n\r\n        latLngToWkt: function (latLng) {\r\n          return \"POINT(\" + latLng[1] + \" \" + latLng[0] + \")\";\r\n        },\r\n\r\n        search: function (q) {\r\n          var deferred = $q.defer();\r\n\r\n          dgis.ajax({\r\n            url: 'http://catalog.api.2gis.ru/2.0/geo/search',\r\n\r\n            data: {\r\n              key: appConfig.key2gis,\r\n              q: q,\r\n              region_id: 32,\r\n              fields: 'hash,search_attributes,items.address,items.adm_div,items.geometry.centroid,items.geometry.selection,items.geometry.style,items.floors,items.group'\r\n            },\r\n            success: function (data) {\r\n\r\n              deferred.resolve(data.result.items);\r\n            },\r\n            error: function (error) {\r\n              console.log(error);\r\n              deferred.reject();\r\n            }\r\n          });\r\n\r\n          return deferred.promise;\r\n        }\r\n      });\r\n    }]\r\n  );\r\n}(angular.module('festima')));\r\n\n(function (app) {\r\n  'use strict';\r\n\r\n  app.service('contacts', ['$http', 'appConfig', function ($http, appConfig) {\r\n\r\n    angular.extend(this, {\r\n      saveContact: function (contact) {\r\n        return $http.post(appConfig.apiUrl + '/buildings/' + contact.building.id + '/contacts', contact).then(function (resp) {\r\n          return resp.data;\r\n        });\r\n      },\r\n\r\n      delete: function(contact) {\r\n        return $http.delete(appConfig.apiUrl + '/buildings/' + contact.building.id + '/contacts/' + contact.id).then(function(resp) {\r\n          return resp.data;\r\n        });\r\n      }\r\n    })\r\n  }]);\r\n\r\n}(angular.module('festima')));\r\n\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('festima')\r\n    .controller('MainController', MainController);\r\n\r\n  /** @ngInject */\r\n  function MainController($timeout, webDevTec, toastr) {\r\n    var vm = this;\r\n\r\n    vm.awesomeThings = [];\r\n    vm.classAnimation = '';\r\n    vm.creationDate = 1457814815376;\r\n    vm.showToastr = showToastr;\r\n\r\n    activate();\r\n\r\n    function activate() {\r\n      getWebDevTec();\r\n      $timeout(function() {\r\n        vm.classAnimation = 'rubberBand';\r\n      }, 4000);\r\n    }\r\n\r\n    function showToastr() {\r\n      toastr.info('Уведомление...');\r\n      vm.classAnimation = '';\r\n    }\r\n\r\n    function getWebDevTec() {\r\n      vm.awesomeThings = webDevTec.getTec();\r\n\r\n      angular.forEach(vm.awesomeThings, function(awesomeThing) {\r\n        awesomeThing.rank = Math.random();\r\n      });\r\n    }\r\n  }\r\n})();\r\n\n'use strict';\r\n\r\n/**\r\n * @ngdoc function\r\n * @name festimaApp.controller:AboutController\r\n * @description\r\n * # AboutController\r\n * Controller of the festimaApp\r\n */\r\nangular.module('festima')\r\n  .controller('AboutController', function () {\r\n\r\n  });\r\n\n(function(app) {\r\n  'use strict';\r\n\r\n  app.service('session', function($http, $log, $q, $state, $rootScope, $timeout, $cookies, appConfig, OAuth, OAuthToken) {\r\n    var currentUserPromise;\r\n    var userId;\r\n\r\n    function loadCurrentUser() {\r\n      return $http.get(appConfig.apiUrl + '/users/profile').then(function(response) {\r\n        var user = response.data;\r\n\r\n        userId = user.id;\r\n        return user;\r\n      });\r\n    }\r\n\r\n    // $rootScope.$on('$stateChangeError', function () {\r\n    //   $state.go('public.login');\r\n    // });\r\n\r\n    angular.extend(this, {\r\n      login: function(credentials) {\r\n        var options = {};\r\n\r\n        angular.extend(credentials, {scope: 'read'});\r\n\r\n        return OAuth.getAccessToken(credentials, options).then(function(response) {\r\n          currentUserPromise = loadCurrentUser();\r\n        }).catch(function(e) {\r\n          $log.error('Auth error: ', e);\r\n          return $q.reject(e);\r\n        });\r\n      },\r\n\r\n      logout: function() {\r\n        // OAuth.revokeToken();\r\n        $cookies.remove('token');\r\n        return $timeout(function () {\r\n          $state.go('public.login');\r\n        });\r\n      },\r\n\r\n      getUserId: function() {\r\n        return userId;\r\n      },\r\n\r\n      profile: function() {\r\n        if (!currentUserPromise) {\r\n          currentUserPromise = loadCurrentUser();\r\n        }\r\n        return currentUserPromise;\r\n      },\r\n\r\n      isAuthenticated: function() {\r\n        return OAuth.isAuthenticated();\r\n      },\r\n\r\n      checkLoggedIn: function() {\r\n        var deferred = $q.defer();\r\n\r\n        if (this.isAuthenticated()) {\r\n          deferred.resolve();\r\n        } else {\r\n          $timeout(function () {\r\n            $state.go('public.login');\r\n          });\r\n          deferred.reject();\r\n        }\r\n\r\n        return deferred.promise;\r\n      },\r\n\r\n      skipLoggedIn: function() {\r\n        var deferred = $q.defer();\r\n\r\n        if (this.isAuthenticated()) {\r\n          deferred.reject();\r\n        } else {\r\n          deferred.resolve();\r\n        }\r\n\r\n        return deferred.promise;\r\n      }\r\n    });\r\n  });\r\n\r\n} (angular.module('festima')));\r\n\n(function(app) {\r\n  'use strict';\r\n\r\n  app.controller('LoginController', function($http, $state, toastr, appConfig, OAuth, OAuthToken, spinnerService, session) {\r\n    var vm = this;\r\n\r\n    vm.login = function() {\r\n      var credentials = {username: vm.email, password: vm.password};\r\n\r\n      vm.loginForm.$setPristine();\r\n      // spinnerService.show(\"authSpinner\");\r\n\r\n      session.login(credentials).then(function(res) {\r\n        $state.go('private.main');\r\n      }).catch(function(err) {\r\n        toastr.error(\"Неверная комбинация email/пароль!\");\r\n\r\n        vm.loginForm.password.$setValidity(\"required\", false);\r\n        vm.password = '';\r\n      }).finally(function() {\r\n        // spinnerService.hide('authSpinner');\r\n      });\r\n    };\r\n\r\n    vm.logout = function() {\r\n      session.logout();\r\n    };\r\n  });\r\n\r\n\r\n} (angular.module('festima')));\r\n\n(function(app) {\r\n  'use strict';\r\n\r\n  app.controller('DictionaryShowController', function($stateParams, dictionaries) {\r\n    var vm = this;\r\n\r\n    console.log(\"State params: \", $stateParams.key);\r\n    vm.key = $stateParams.key;\r\n    dictionaries.loadByKey($stateParams.key).then(function(dictionary) {\r\n      vm.dictionary = dictionary;\r\n    });\r\n  });\r\n\r\n} (angular.module('festima')));\r\n\n(function(app) {\r\n  'use strict';\r\n\r\n  app.service('dictionaries', function($q, $http, appConfig) {\r\n\r\n    angular.extend(this, {\r\n      listAll: function() {\r\n        return $http.get(appConfig.apiUrl + '/dictionaries').then(function(response) {\r\n          return response.data;\r\n        });\r\n      },\r\n\r\n      loadByKey: function(key) {\r\n        return $http.get(appConfig.apiUrl + '/dictionaries/' + key).then(function(response) {\r\n          return response.data;\r\n        });\r\n      },\r\n\r\n      itemsByKey: function(key, offset, max, q) {\r\n        return $http.get(appConfig.apiUrl + '/dictionaries/' + key + '/items', {params: {offset: offset, max: max, q: q}}).then(function(response) {\r\n          return response.data;\r\n        });\r\n      },\r\n\r\n      countItemsByKey: function(key) {\r\n        return $http.get(appConfig.apiUrl + '/dictionaries/' + key + '/count').then(function(response) {\r\n          return response.data;\r\n        });\r\n      },\r\n\r\n      addItem: function(key, item) {\r\n        return $http.post(appConfig.apiUrl + '/dictionaries/' + key + '/items', {data: item}).then(function(response) {\r\n          return response.data;\r\n        });\r\n      },\r\n\r\n      loadItem: function(id) {\r\n        return $http.get(appConfig.apiUrl + '/dictionaries/items/' + id).then(function(response) {\r\n          return response.data;\r\n        });\r\n      }\r\n    });\r\n  });\r\n\r\n} (angular.module('festima')));\r\n\n(function(app) {\r\n  'use strict';\r\n\r\n  app.controller('DictionaryListController', function(dictionaries) {\r\n    var vm = this;\r\n\r\n    dictionaries.listAll().then(function(dictionaries) {\r\n      vm.dictionaries = dictionaries;\r\n    });\r\n  });\r\n\r\n} (angular.module('festima')));\r\n\n(function(app) {\n  'use strict';\n\n  app.service('addresses', function($http, appConfig) {\n\n    angular.extend(this, {\n      listWithinRadius: function(latlng, radius) {\n\n        return this.searchAddresses({latlng: latlng, radius: radius}, {});\n      },\n\n      searchAddresses: function(location, filters) {\n        return $http.get(appConfig.apiUrl + '/locations', {params: {latlng: location.latlng, radius: location.radius,\n          authorId: filters.authorId, status: filters.status, 'from.lastUpdated': filters.lastUpdatedFrom, q: filters.q, dealerId: filters.dealerId}}).then(\n          function(response) {\n            return response.data;\n          }\n        );\n      }\n    });\n  });\n}) (angular.module('festima'));\n\n(function(app) {\r\n  'use strict';\r\n\r\n  app.controller('AddressListController', function($q, $location, $rootScope, _, maps, addresses) {\r\n    var vm = this;\r\n    var allMarkersLayers;\r\n\r\n    vm.filtersOpen = false;\r\n    vm.buildings = [];\r\n\r\n    function findNearbyBuildings(address, filters) {\r\n      var latLng;\r\n      var buildingsPromise;\r\n\r\n      if (address) {\r\n        latLng = maps.centroidToLatlng(address.geometry.centroid);\r\n        buildingsPromise = addresses.listWithinRadius(latLng, 1000);\r\n      } else {\r\n        buildingsPromise = addresses.searchAddresses({}, filters);\r\n      }\r\n\r\n      return buildingsPromise;\r\n    }\r\n\r\n    function positionBuildingsOnMap(buildings, map) {\r\n      if (allMarkersLayers) {\r\n        allMarkersLayers.clearLayers();\r\n      }\r\n      var markers = [];\r\n      buildings.forEach(function(building) {\r\n        var latLng = maps.centroidToLatlng(building.location);\r\n\r\n        var marker = DG.marker(latLng, {\r\n          label: building.name\r\n        });\r\n\r\n        markers.push(marker);\r\n\r\n        marker['buildingId'] = building.id;\r\n        marker['buildingName'] = building.name;\r\n\r\n        marker.on('dblclick', function(e) {\r\n          $rootScope.$apply( function(){$location.path('/building/show/' + e.target.buildingId); } );\r\n        });\r\n      });\r\n\r\n      allMarkersLayers = DG.layerGroup(markers);\r\n      allMarkersLayers.addTo(map);\r\n    }\r\n\r\n    DG.then(function() {\r\n      var mapPromise = maps.initMap();\r\n      searchAndDisplayBuildingsOnMap(mapPromise, {});\r\n    });\r\n\r\n    function searchAndDisplayBuildingsOnMap(mapPromise, filters) {\r\n      var buildingsPromise = findNearbyBuildings(null, filters);\r\n\r\n      $q.all({map: mapPromise, buildings: buildingsPromise}).then(function(results) {\r\n        vm.map = results.map;\r\n        vm.buildings = results.buildings;\r\n\r\n        positionBuildingsOnMap(results.buildings, results.map);\r\n      });\r\n    }\r\n\r\n    vm.onSelectAddress = function(item) {\r\n      var latLng = maps.centroidToLatlng(item.geometry.centroid);\r\n\r\n      vm.addressObject = item;\r\n\r\n      vm.map.setZoom(maps.detailedZoom);\r\n      vm.map.panTo(latLng);\r\n    };\r\n\r\n    vm.onApplyFilters = function(criteria, filters) {\r\n      searchAndDisplayBuildingsOnMap($q.when(vm.map), filters);\r\n    };\r\n  });\r\n\r\n}) (angular.module('festima'));\r\n\n(function(app) {\r\n  'use strict';\r\n\r\n  app.service('users', UsersService);\r\n\r\n  function UsersService($http, appConfig) {\r\n    angular.extend(this, {\r\n      list: function() {\r\n        return $http.get(appConfig.apiUrl + '/users').then(function(response) {\r\n          return response.data;\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n}(angular.module('festima')));\r\n\n'use strict';\r\n\r\nangular.module('festima')\r\n  .service('positions', function($http, appConfig) {\r\n    angular.extend(this, {\r\n      listAllByBuilding: function(buildingId) {\r\n        return $http.get(appConfig.apiUrl + '/positions', {params: {buildingId: buildingId}});\r\n      },\r\n      createPosition: function(positionData) {\r\n        return $http.post(appConfig.apiUrl + '/positions', positionData).then(function(resp) { return resp.data; });\r\n      },\r\n      delete: function(positionId) {\r\n        return $http.delete(appConfig.apiUrl + '/positions/' + positionId);\r\n      }\r\n    });\r\n  }\r\n);\r\n\n(function(app) {\r\n  'use strict';\r\n\r\n  app.filter('notRemoved', function () {\r\n    return function (items) {\r\n      return _.filter(items, function(item) { return item.removed === undefined; })\r\n    };\r\n  });\r\n\r\n}(angular.module('festima')));\r\n\n'use strict';\r\n\r\nangular.module('festima')\r\n  .service('dealers', function($http, appConfig) {\r\n    angular.extend(this, {\r\n\r\n      findAllByQuery: function(q) {\r\n        return $http.get(appConfig.apiUrl + '/dictionaries/dealers/items', {params: {q: q}}).then(function(resp) { return resp.data; });\r\n      },\r\n\r\n      listAll: function() {\r\n        return $http.get(appConfig.apiUrl + '/dictionaries/dealers/items', {params: {max: 500}}).then(function(response) { return response.data; });\r\n      },\r\n\r\n      mapAll: function() {\r\n        return this.listAll().then(function(dealerList) {\r\n          var dealersMap = {};\r\n          var dealer;\r\n\r\n          for (var i = 0; i < dealerList.length; i++) {\r\n            dealer = dealerList[i];\r\n            if (angular.isUndefined(dealersMap[dealer.id])) {\r\n              dealersMap[dealer.id] = dealer;\r\n            }\r\n          }\r\n\r\n          return dealersMap;\r\n        });\r\n      },\r\n\r\n      listByIds: function(ids) {\r\n        var params = '?';\r\n\r\n        for(var i=0; i<ids.length; i++) {\r\n          params += '&id=' + ids[i];\r\n        }\r\n\r\n        return $http.get(appConfig.apiUrl + '/dictionaries/dealers/items' + params);\r\n      }\r\n    });\r\n});\r\n\n(function(app) {\r\n  'use strict';\r\n\r\n  app.service('comments', ['$http', 'appConfig', function($http, appConfig) {\r\n    angular.extend(this, {\r\n      listAllByBuilding: function(buildingId) {\r\n        return $http.get(appConfig.apiUrl + '/buildings/' + buildingId + '/comments').then(function(response) {\r\n          return response.data;\r\n        });\r\n      },\r\n\r\n      createComment: function(buildingId, commentData) {\r\n        return $http.post(appConfig.apiUrl + '/buildings/' + buildingId + '/comments', commentData).then(function(response) {\r\n          return response.data;\r\n        });\r\n      }\r\n    });\r\n  }]);\r\n\r\n} (angular.module('festima')));\r\n\nangular.module('festima')\r\n  .factory('buildingsManager', ['$http', '$q', 'appConfig', 'Building', 'usersManager', 'dictionaries', function($http, $q, appConfig, Building, usersManager, dictionaries) {\r\n  var buildingsManager = {\r\n    _pool: {},\r\n    _retrieveInstance: function(id, data) {\r\n      var instance = this._pool[id];\r\n\r\n      if (instance) {\r\n        instance.setData(data);\r\n      } else {\r\n        instance = new Building(data);\r\n        this._pool[id] = instance;\r\n      }\r\n\r\n      return instance;\r\n    },\r\n    _search: function(id) {\r\n      return this._pool[id];\r\n    },\r\n    _load: function(id, deferred) {\r\n      var scope = this;\r\n\r\n      $http.get(appConfig.apiUrl + '/buildings/' + id)\r\n        .success(function(data) {\r\n          var itemData = data;\r\n          var item = scope._retrieveInstance(itemData.id, itemData);\r\n\r\n          deferred.resolve(item);\r\n        })\r\n        .error(function() {\r\n          deferred.reject();\r\n        });\r\n    },\r\n\r\n    getBuilding: function(id) {\r\n      var deferred = $q.defer();\r\n      var item = this._search(id);\r\n      if (item) {\r\n        deferred.resolve(item);\r\n      } else {\r\n        if (id === undefined) {\r\n          deferred.resolve(this._retrieveInstance(null));\r\n        } else {\r\n          this._load(id, deferred);\r\n        }\r\n      }\r\n      return deferred.promise;\r\n    },\r\n\r\n    loadAllBuildings: function() {\r\n      var deferred = $q.defer();\r\n      var scope = this;\r\n      $http.get(appConfig.apiUrl + '/buildings')\r\n        .success(function(itemsArray) {\r\n          var items = [];\r\n          var item;\r\n\r\n            if (itemsArray.length == 0) {\r\n              deferred.resolve([]);\r\n              return;\r\n            }\r\n\r\n            itemsArray.forEach(function (itemData) {\r\n              item = scope._retrieveInstance(itemData.id, itemData);\r\n              items.push(item);\r\n              deferred.resolve(items);\r\n            });\r\n        })\r\n        .error(function() {\r\n          deferred.reject();\r\n        });\r\n      return deferred.promise;\r\n    },\r\n\r\n    setBuilding: function(data) {\r\n      var scope = this;\r\n      var item = this._search(data.id);\r\n      if (item) {\r\n        item.setData(data);\r\n      } else {\r\n        item = scope._retrieveInstance(data);\r\n      }\r\n      return item;\r\n    }\r\n  };\r\n\r\n  return buildingsManager;\r\n}]);\r\n\n(function(app) {\n  'use strict';\n\n  app.service('buildings', ['$http', 'appConfig', function($http, appConfig) {\n    angular.extend(this, {\n      list: function(offset, limit, q, authorId, status, lastUpdatedFrom, dealerId) {\n        var params = {offset: offset, max: limit, q: q, authorId: authorId, status: status, 'from.lastUpdated': lastUpdatedFrom, dealerId: dealerId};\n        return $http.get(appConfig.apiUrl + '/buildings', {params: params}).then(function(resp) {\n          return resp.data;\n        });\n      },\n\n      get: function(id) {\n        return $http.get(appConfig.apiUrl + '/buildings/' + id).then(function(response) {\n          return response.data;\n        });\n      },\n\n      update: function(building) {\n        building.contacts = []; // do not resave\n        return $http.put(appConfig.apiUrl + '/buildings/' + building.id, building).then(function(response) {\n          return response.data;\n        });\n      }\n    });\n  }]);\n\n}(angular.module('festima')));\n\n(function(app) {\r\n  'use strict';\r\n\r\n  app.factory('Buildings', ['$http', 'appConfig', function($http, appConfig) {\r\n    function Buildings(offset, limit) {\r\n      this.offset = offset;\r\n      this.limit = limit;\r\n    }\r\n\r\n    // Buildings.prototype = {\r\n    //   list: function() {\r\n    //     return $http.get(appConfig.apiUrl + '/buildings', {params: {offset: this.offset, limit: this.limit}}).then(function(resp) {\r\n    //       return resp.data;\r\n    //     });\r\n    //   }\r\n    // };\r\n\r\n    return Buildings;\r\n  }]);\r\n\r\n}(angular.module('festima')));\r\n\nangular.module('festima')\r\n  .factory('buildingDealersManager', ['$http', '$q', 'BuildingDealer', 'dealers', function ($http, $q, BuildingDealer, dealers) {\r\n\r\n    var buildingDealersManager = {\r\n      _pool: {},\r\n      _retrieveInstance: function (id, data) {\r\n        var instance = this._pool[id];\r\n\r\n        if (instance) {\r\n          instance.setData(data);\r\n        } else {\r\n          instance = new BuildingDealer(data);\r\n          if (id) {\r\n            this._pool[id] = instance;\r\n          } else {\r\n            var unsavedId = Math.min(-1, Math.min(Object.keys(this._pool)));\r\n            instance.id = unsavedId;\r\n            this._pool[unsavedId] = instance;\r\n          }\r\n\r\n        }\r\n\r\n        return instance;\r\n      },\r\n      _unsaved: function() {\r\n        var unsaved = [];\r\n        var scope = this;\r\n\r\n        Object.keys(this._pool).forEach(function(id) {\r\n          if (Number(id) < 0) {\r\n            unsaved.push(scope._pool[id]);\r\n          }\r\n        });\r\n\r\n        return unsaved;\r\n      },\r\n      _search: function (id) {\r\n        return this._pool[id];\r\n      },\r\n      _load: function (id, deferred) {\r\n        var scope = this;\r\n\r\n        $http.get('http://localhost:3000/api/buildingDealers/' + id)\r\n          .success(function (data) {\r\n            var item = scope._retrieveInstance(data.id, data);\r\n\r\n            $http.get('http://localhost:3000/api/dealers/' + data.dealerId).then(\r\n              function (response) {\r\n                item.dealer = response.data;\r\n              }\r\n            );\r\n\r\n            deferred.resolve(item);\r\n          })\r\n          .error(function () {\r\n            deferred.reject();\r\n          });\r\n      },\r\n\r\n      getBuildingDealer: function (id) {\r\n        var deferred = $q.defer();\r\n        var item = this._search(id);\r\n        if (item) {\r\n          deferred.resolve(item);\r\n        } else {\r\n          this._load(id, deferred);\r\n        }\r\n        return deferred.promise;\r\n      },\r\n      loadAllBuildingDealers: function (id) {\r\n        var deferred = $q.defer();\r\n        var scope = this;\r\n        $http.get('http://localhost:3000/api/buildingDealers', {params: {buildingId: id}})\r\n          .success(function (itemsArray) {\r\n            var items = [];\r\n            var map = {};\r\n            itemsArray.forEach(function (itemData) {\r\n              var item = scope._retrieveInstance(itemData.id, itemData);\r\n              items.push(item);\r\n              map[item.dealerId] = item;\r\n            });\r\n\r\n            return dealers.listByIds(Object.keys(map)).then(\r\n              function (response) {\r\n                var list = response.data;\r\n\r\n                list.forEach(function (item) {\r\n                  map[item.id].dealer = item;\r\n                });\r\n\r\n                deferred.resolve(items);\r\n              }\r\n            )\r\n          })\r\n          .error(function () {\r\n            deferred.reject();\r\n          });\r\n        return deferred.promise;\r\n      },\r\n      setBuildingDealer: function (data) {\r\n        var scope = this;\r\n        var item = this._search(data.id);\r\n        if (item) {\r\n          item.setData(data);\r\n        } else {\r\n          item = scope._retrieveInstance(null, data);\r\n        }\r\n        return item;\r\n      }\r\n    };\r\n\r\n    return buildingDealersManager;\r\n  }]);\r\n\n'use strict';\r\n\r\nangular.module('festima')\r\n  .service('buildingDealersService', function (dealers, positions) {\r\n\r\n      angular.extend(this, {\r\n\r\n        getDealersPositionsMap: function(buildingId) {\r\n          return positions.listAllByBuilding(buildingId).then(function(response) {\r\n            var dealerPositionsMap = {};\r\n            var buildingPositions = response.data;\r\n\r\n            return dealers.mapAll().then(function(mapOfDealers) {\r\n\r\n              var dealerId;\r\n              for (var i = 0; i < buildingPositions.length; i++) {\r\n                dealerId = buildingPositions[i].dealer.id;\r\n\r\n                if (angular.isUndefined(dealerPositionsMap[dealerId])) {\r\n                  dealerPositionsMap[dealerId] = {name: mapOfDealers[dealerId].title, positions: []};\r\n                }\r\n\r\n                dealerPositionsMap[dealerId].positions.push(buildingPositions[i]);\r\n              }\r\n\r\n              return dealerPositionsMap;\r\n            });\r\n          })\r\n        },\r\n\r\n        saveDealerPositions: function(dealerId, positionsList) {\r\n          var position;\r\n\r\n          for (var i = 0; i < positionsList.length; i++) {\r\n            position = positionsList[i];\r\n\r\n            if (position.removed === true) {\r\n              positions.delete(position.id).then(function () {\r\n                var index = positionsList.map(function (e) {\r\n                  return e.id;\r\n                }).indexOf(position.id);\r\n                positionsList.splice(index, 1);\r\n              });\r\n            }\r\n\r\n            if (angular.isUndefined(position.buildingId)) {\r\n              position.buildingId = position.building.id;\r\n              delete position['building'];\r\n            }\r\n\r\n            if (angular.isUndefined(position.id)) {\r\n              positions.createPosition(position).then(function (savedPosition) {\r\n                position.id = savedPosition.id;\r\n                console.log('Saved position ' + position.id);\r\n              });\r\n            }\r\n\r\n          }\r\n\r\n          // return changedPositions;\r\n        },\r\n\r\n      });\r\n    }\r\n  );\r\n\nangular.module('festima').factory('BuildingDealer', ['$http', function($http) {\r\n  function BuildingDealer(data) {\r\n    if (data) {\r\n      this.setData(data);\r\n    }\r\n    // Some other initializations related to book\r\n  };\r\n  BuildingDealer.prototype = {\r\n    setData: function(data) {\r\n      angular.extend(this, data);\r\n    },\r\n    save: function() {\r\n      if (this.id === undefined) {\r\n        $http.post('http://localhost:3000/api/buildingDealers', this);\r\n        $http.get('http://localhost:3000/api/buildingDealers').then(\r\n          function(response) {\r\n            angular.extend(this, response.data);\r\n          }\r\n        )\r\n      } else {\r\n        this.update();\r\n      }\r\n    },\r\n    delete: function() {\r\n      $http.delete('http://localhost:3000/api/buildingDealers/' + id);\r\n    },\r\n    update: function() {\r\n      $http.put('http://localhost:3000/api/buildingDealers/' + id, this);\r\n    },\r\n    // getImageUrl: function(width, height) {\r\n    //   return 'our/image/service/' + this.book.id + '/width/height';\r\n    // },\r\n    // isAvailable: function() {\r\n    //   if (!this.book.stores || this.book.stores.length === 0) {\r\n    //     return false;\r\n    //   }\r\n    //   return this.book.stores.some(function(store) {\r\n    //     return store.quantity > 0;\r\n    //   });\r\n    // }\r\n  };\r\n  return BuildingDealer;\r\n}]);\r\n\n'use strict';\r\n\r\nangular.module('festima')\r\n  .controller('BuildingShowController', function ($stateParams, toastr, buildingsManager, buildings, maps, comments, contacts, building) {\r\n    var id = $stateParams.buildingId;\r\n    var vm = this;\r\n\r\n    vm.contacts = [];\r\n    vm.comments = [];\r\n    loadComments();\r\n\r\n    function loadComments() {\r\n      comments.listAllByBuilding(id).then(function(comments) {\r\n        vm.comments = comments;\r\n      });\r\n    }\r\n\r\n    function addNewComment(text) {\r\n      comments.createComment(id, {text: text}).then(function(newComment) {\r\n        toastr.success('Комментарий добавлен.');\r\n        loadComments();\r\n      });\r\n    }\r\n\r\n    vm.addComment = addNewComment;\r\n\r\n    // buildings.get(id).then(function (building) {\r\n      vm.building = building;\r\n      vm.contacts = vm.building.contacts;\r\n\r\n      DG.then(function () {\r\n        var map, point, lat, lng, marker;\r\n\r\n        var latLng = maps.centroidToLatlng(vm.building.location);\r\n        lat = latLng[0];\r\n        lng = latLng[1];\r\n\r\n        map = DG.map('map', {\r\n          center: latLng,\r\n          zoom: 16\r\n        });\r\n\r\n        DG.marker(latLng).addTo(map).bindPopup('Вы кликнули по мне!');\r\n\r\n      // maps.initDgisContainer().then(function (container) {\r\n      //   var latLng = container.dgis.estima.centroidToLatlng(vm.building.location);\r\n      //   var map = container.dgis.map('map', {\r\n      //     center: latLng,\r\n      //     zoom: 16\r\n      //   });\r\n      //\r\n      //   container.dgis.marker(latLng).addTo(map).bindPopup('Вы кликнули по мне!');\r\n\r\n\r\n          // DG.ajax({\r\n          //   url: 'http://catalog.api.2gis.ru/geo/search',\r\n          //   data: {\r\n          //     key: 'ruczoy1743',\r\n          //     version: 1.3,\r\n          //     q: 'Москва, Красная площадь, 2'\r\n          //   },\r\n          //   type: 'GET',\r\n          //   success: function(data) {\r\n          //     if (typeof marker !== 'undefined') {\r\n          //       map.removeLayer(marker);\r\n          //     }\r\n          //\r\n          //     // считываем строку в WKT-формате и возвращаем объект Point\r\n          //     point = DG.Wkt.toPoints(data.result[0].centroid);\r\n          //\r\n          //     // извлекаем координаты для маркера\r\n          //     lng = point[0];\r\n          //     lat = point[1];\r\n          //\r\n          //     // создаем и добавляем маркер на карту\r\n          //     marker = DG.marker([lat, lng]);\r\n          //     map.addLayer(marker);\r\n          //\r\n          //     // центрируем карту в координаты маркера\r\n          //     map.panTo([lat, lng]);\r\n          //   },\r\n          //   error: function(error) {\r\n          //     console.log(error);\r\n          //   }\r\n          // });\r\n        });\r\n    //   }\r\n    // );\r\n  }\r\n);\r\n\nangular.module('festima').factory('Building', ['$http', 'appConfig', function($http, appConfig) {\r\n\r\n  function Building(data) {\r\n    if (data) {\r\n      this.setData(data);\r\n    }\r\n    // some init\r\n  };\r\n  Building.prototype = {\r\n    setData: function(data) {\r\n      angular.extend(this, data);\r\n    },\r\n    save: function() {\r\n      return $http.post(appConfig.apiUrl + '/buildings', this).then(function(resp) {\r\n        return resp.data;\r\n      });\r\n    },\r\n    delete: function() {\r\n      $http.delete(appConfig.apiUrl + '/buildings/' + this.id);\r\n    },\r\n    update: function() {\r\n      return $http.put(appConfig.apiUrl + '/buildings/' + this.id, this);\r\n    },\r\n  };\r\n  return Building;\r\n}]);\r\n\n(function(app) {\n  'use strict';\n\n  app.controller('BuildingListController', function ($scope, buildings, users, statuses) {\n    var vm = this;\n\n    vm.filtersOpen = false;\n\n    vm.buildings = [];\n    vm.itemsPerPageValues = [50, 100, 200];\n    vm.currentPage = 1;\n    vm.itemsPerPage = 100;\n\n    vm.pageChanged = function() {\n      applyFilters({currentPage: vm.currentPage, itemsPerPage: vm.itemsPerPage}, {});\n    };\n\n    function applyFilters(criteria, filters) {\n      buildings.list((criteria.currentPage - 1) * criteria.itemsPerPage, criteria.itemsPerPage, filters.q, filters.authorId, filters.status, filters.lastUpdatedFrom, filters.dealerId).then(function(result) {\n        vm.buildings = result.items;\n        vm.totalItems = result.total;\n      });\n    }\n\n    vm.onApplyFilters = applyFilters;\n\n    vm.search = function(q) {\n      vm.q = q;\n      console.log(\"Searched for: \", q);\n      applyFilters({currentPage: vm.currentPage, itemsPerPage: vm.itemsPerPage}, {q: q});\n    };\n\n    vm.getBuildingDealers = function(building) {\n      return building.dealers.map(function(d) {return d.title;}).join(', ');\n    };\n\n    vm.pageChanged();\n  });\n\n  app.directive('convertToNumber', function() {\n    return {\n      require: 'ngModel',\n      link: function(scope, element, attrs, ngModel) {\n        ngModel.$parsers.push(function(val) {\n          return parseInt(val, 10);\n        });\n        ngModel.$formatters.push(function(val) {\n          return '' + val;\n        });\n      }\n    };\n  });\n\n}(angular.module('festima')));\n\n\n'use strict';\r\n\r\nangular.module('festima')\r\n  .controller('BuildingEditController', function ($stateParams, $location, $q, toastr, buildingsManager, buildings, buildingDealersService, contacts, building) {\r\n    var vm = this;\r\n\r\n    vm.buildingId = $stateParams.buildingId;\r\n\r\n    vm.building = building;\r\n    vm.contacts = vm.building.contacts;\r\n\r\n    buildingDealersService.getDealersPositionsMap(vm.buildingId).then(function (mapOfDealersPositions) {\r\n      vm.dealersPositionsMap = mapOfDealersPositions;\r\n    });\r\n\r\n    vm.addDealerPosition = function (dealerId, position) {\r\n      vm.dealersPositionsMap[dealerId].positions.push(position);\r\n    };\r\n\r\n    vm.removeDealerPosition = function (dealerId, position) {\r\n      var dealerPositions = vm.dealersPositionsMap[dealerId].positions;\r\n\r\n      if (position.id === undefined) {\r\n        var index = dealerPositions.indexOf(position);\r\n        if (index !== -1) {\r\n          dealerPositions.splice(index, 1);\r\n        }\r\n      } else {\r\n        position.removed = true;\r\n      }\r\n    };\r\n\r\n    vm.addDealer = function (dealer) {\r\n      if (!vm.isAddedDealer(dealer)) {\r\n        vm.dealersPositionsMap[dealer.id] = {name: dealer.title, positions: []};\r\n      }\r\n    };\r\n\r\n    vm.isAddedDealer = function (dealer) {\r\n      var index = Object.keys(vm.dealersPositionsMap).indexOf(String(dealer.id));\r\n\r\n      return index >= 0;\r\n    };\r\n\r\n    vm.saveChanges = function () {\r\n      $q.all([buildings.update(vm.building), updateBuildingContacts(vm.contacts)]).then(function(response) {\r\n        $location.path('/building/show/' + vm.building.id);\r\n      });\r\n\r\n      for (var dealerId in vm.dealersPositionsMap) {\r\n        buildingDealersService.saveDealerPositions(dealerId, vm.dealersPositionsMap[dealerId].positions);\r\n      }\r\n    };\r\n\r\n    vm.onSelectAddress = function(address) {\r\n      vm.building.address = address.full_name;\r\n      vm.building.location = address.geometry.centroid;\r\n    };\r\n\r\n    vm.contacts = [];\r\n\r\n    function addContact(newContact) {\r\n      vm.contacts.push({contact: {title: newContact.contactName, dictionary: {name: newContact.typeName}}, info: newContact.info, building: {id: vm.buildingId}, contactId: newContact.contactId});\r\n    }\r\n\r\n    function removeContact(contact) {\r\n      if (contact.id === undefined) {\r\n        var index = vm.contacts.indexOf(contact);\r\n        if (index !== -1) {\r\n          vm.contacts.splice(index, 1);\r\n        }\r\n      } else {\r\n        contact.removed = true;\r\n      }\r\n    }\r\n\r\n    vm.addContact = addContact;\r\n    vm.removeContact = removeContact;\r\n\r\n    function updateBuildingContacts(contactList) {\r\n      var contact;\r\n      var promises = [];\r\n\r\n      if (_.isEmpty(contactList)) {\r\n        return $q.when(null);\r\n      }\r\n\r\n      for(var i=0; i<contactList.length; i++) {\r\n        contact = contactList[i];\r\n\r\n        if (contact.removed === true) {\r\n          promises.push(contacts.delete(contact));\r\n        }\r\n\r\n        if (contact.id === undefined) {\r\n          promises.push(contacts.saveContact(contact));\r\n        }\r\n      }\r\n\r\n      return $q.all(promises);\r\n    }\r\n  }\r\n);\r\n\n'use strict';\r\n\r\nangular.module('festima')\r\n  .controller('BuildingCreateController', function($location, Building, toastr) {\r\n    var vm = this;\r\n\r\n    vm.building = new Building();\r\n\r\n    vm.saveChanges = function () {\r\n      vm.building.save().then(function (building) {\r\n        vm.buildingId = building.id;\r\n        vm.building = building;\r\n        $location.path('/building/show/' + vm.building.id);\r\n      });\r\n\r\n      toastr.success('Новый объект \"' + vm.building.name + '\" добавлен!');\r\n    };\r\n\r\n    vm.onSelectAddress = function(address) {\r\n      vm.addressObject = address;\r\n      vm.building.address = address.full_name;\r\n      vm.building.location = address.geometry.centroid;\r\n    };\r\n  }\r\n);\r\n\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('festima')\r\n    .run(runBlock)\r\n    .run(['$rootScope', '$window', '$state', 'OAuth', 'toastr', function($rootScope, $window, $state, OAuth, toastr) {\r\n      // $rootScope.$on('$stateChangeError', function(event, toState, toParams, fromState, fromParams, error) {\r\n      //   event.preventDefault();\r\n      //   toastr.error('Объект не найден');\r\n      //   $state.go('private.buildinglist');\r\n      // });\r\n\r\n      $rootScope.$on('oauth:error', function(event, rejection) {\r\n        // Ignore `invalid_grant` error - should be catched on `LoginController`.\r\n        if ('invalid_grant' === rejection.data.error) {\r\n          return;\r\n        }\r\n\r\n        // Refresh token when a `invalid_token` error occurs.\r\n        if ('invalid_token' === rejection.data.error) {\r\n          return OAuth.getRefreshToken();\r\n        }\r\n\r\n        // Redirect to `/login` with the `error_reason`.\r\n        return $window.location.href = '/login?error_reason=' + rejection.data.error;\r\n      });\r\n    }]);\r\n\r\n  /** @ngInject */\r\n  function runBlock($log) {\r\n\r\n    $log.debug('runBlock end');\r\n  }\r\n\r\n})();\r\n\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('festima')\r\n    .config(routerConfig);\r\n\r\n  /** @ngInject */\r\n  function routerConfig($stateProvider, $urlRouterProvider) {\r\n\r\n    $stateProvider\r\n      .state('private',{\r\n        url: '',\r\n        abstract: true,\r\n        views: {\r\n          app: {templateUrl: 'app/layouts/private-layout.html'}\r\n        },\r\n        resolve: {\r\n          loggedin: function(session) { return session.checkLoggedIn(); }\r\n        }\r\n      })\r\n      .state(\"private.logout\", {\r\n        url: \"/logout\",\r\n        resolve: {\r\n          loggedout: function(session) { return session.logout(); }\r\n        }\r\n      })\r\n      .state(\"private.main\", {\r\n        url: \"/\",\r\n        views: {\r\n          'container@private': { templateUrl: \"app/main/main.html\", controller: 'MainController', controllerAs: 'main' }\r\n        }\r\n      })\r\n      .state(\"private.buildinglist\", {\r\n        url: \"/building/list\",\r\n        views: {\r\n          'container@private': {templateUrl: 'app/building/building-list.html', controller: 'BuildingListController', controllerAs: 'vm'}\r\n        }\r\n      })\r\n      .state(\"private.buildingshow\", {\r\n        url: \"/building/show/:buildingId\",\r\n        views: {\r\n          'container@private': { templateUrl: 'app/building/building-show.html', controller: 'BuildingShowController', controllerAs: 'buildingVm' }\r\n        },\r\n        resolve: {\r\n          building: loadBuilding\r\n        },\r\n      })\r\n      .state(\"private.buildingedit\", {\r\n        url: \"/building/edit/:buildingId\",\r\n        views: {\r\n          'container@private': { templateUrl: 'app/building/building-edit.html', controller: 'BuildingEditController', controllerAs: 'vm' }\r\n        },\r\n        resolve: {\r\n          building: loadBuilding\r\n        }\r\n      })\r\n      .state(\"private.buildingcreate\", {\r\n        url: \"/building/create\",\r\n        views: {\r\n          'container@private': { templateUrl: 'app/building/building-create.html', controller: 'BuildingCreateController', controllerAs: 'vm' }\r\n        }\r\n      })\r\n      .state(\"private.addresslist\", {\r\n        url: \"/address/list\",\r\n        views: {\r\n          'container@private': { templateUrl: 'app/address/address-list.html', controller: 'AddressListController', controllerAs: 'vm' }\r\n        }\r\n      })\r\n      .state(\"private.dictionarieslist\", {\r\n        url: \"/dictionaries/list\",\r\n        views: {\r\n          'container@private': { templateUrl: 'app/dictionary/dictionary-list.html', controller: 'DictionaryListController', controllerAs: 'vm' }\r\n        }\r\n      })\r\n      .state(\"private.dictionaryshow\", {\r\n        url: \"/dictionaries/:key\",\r\n        views: {\r\n          'container@private': { templateUrl: 'app/dictionary/dictionary-show.html', controller: 'DictionaryShowController', controllerAs: 'vm' }\r\n        }\r\n      })\r\n      .state(\"public\", {\r\n        url: '',\r\n        abstract: true,\r\n        views: {\r\n          app: {templateUrl: 'app/layouts/public-layout.html'}\r\n        }\r\n      })\r\n      .state(\"public.login\", {\r\n        url: \"/login\",\r\n        views: {\r\n          'container@public': {templateUrl: \"app/login/login.html\", controller: \"LoginController\", controllerAs: 'vm'}\r\n        },\r\n        resolve: {\r\n          skipLoggedIn: function(session) { return session.skipLoggedIn(); }\r\n        }\r\n      })\r\n      .state(\"public.about\", {\r\n        url: \"/about\",\r\n        views: {\r\n          'container@public': {templateUrl: 'app/main/about.html', controller: 'AboutController', controllerAs: 'about'}\r\n        }\r\n      });\r\n\r\n    function loadBuilding(buildings, $stateParams, $state, $rootScope, toastr) {\r\n      // $rootScope.$on('$stateChangeError', function(event, toState, toParams, fromState, fromParams, error) {\r\n      //   event.preventDefault();\r\n      //   toastr.error('Объект не найден');\r\n      //   $state.go('private.buildinglist');\r\n      // });\r\n      return buildings.get($stateParams.buildingId);\r\n    }\r\n\r\n    $urlRouterProvider.otherwise('/');\r\n  }\r\n\r\n})();\r\n\n/* global malarkey:false, moment:false */\r\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('festima')\r\n    .constant('malarkey', malarkey)\r\n    .constant('moment', moment)\r\n    .constant('_', window._)\r\n    .constant('appConfig', {\r\n      'key2gis': 'rutnpt3272',\r\n      'apiUrl': 'http://138.201.116.95:8080/api'\r\n      // 'apiUrl': 'http://localhost:8080/api'\r\n    });\r\n\r\n})();\r\n\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('festima')\r\n    .config(config)\r\n    .config(['OAuthProvider', function(OAuthProvider) {\r\n      OAuthProvider.configure({\r\n        grantPath: '/oauth/token',\r\n        revokePath: '/oauth/revoke',\r\n        // baseUrl: 'http://localhost:8080',\r\n        baseUrl: 'http://138.201.116.95:8080',\r\n        clientId: 'estima-client',\r\n        options: {\r\n          secure: false\r\n        }\r\n      });\r\n    }])\r\n    .config(['OAuthTokenProvider', function(OAuthTokenProvider) {\r\n      OAuthTokenProvider.configure({\r\n        name: 'token',\r\n        options: {\r\n          secure: false\r\n        }\r\n      });\r\n    }]).config(['$httpProvider', function($httpProvider) {\r\n      $httpProvider.interceptors.push([\r\n        '$injector',\r\n        function ($injector) {\r\n          return $injector.get('AuthInterceptor');\r\n        }\r\n      ]);\r\n    }]).factory('AuthInterceptor', authInterceptor);\r\n\r\n  /** @ngInject */\r\n  function config($logProvider, toastrConfig) {\r\n    // Enable log\r\n    $logProvider.debugEnabled(true);\r\n\r\n    // Set options third-party lib\r\n    toastrConfig.allowHtml = true;\r\n    toastrConfig.timeOut = 3000;\r\n    toastrConfig.positionClass = 'toast-top-right';\r\n    toastrConfig.preventDuplicates = false;\r\n    toastrConfig.progressBar = true;\r\n  }\r\n\r\n  function authInterceptor($q, $location) {\r\n    return {\r\n      response: function (response) {\r\n        // do something on success\r\n        return response;\r\n      },\r\n      responseError: function (response) {\r\n        if (response.status === 401) {\r\n          $location.url('/login');\r\n        }\r\n        return $q.reject(response);\r\n      }\r\n    };\r\n  }\r\n\r\n})();\r\n\nangular.module(\"festima\").run([\"$templateCache\", function($templateCache) {$templateCache.put(\"app/address/address-list.html\",\"<div class=\\\"page-header\\\"><div class=\\\"btn-toolbar pull-right\\\"><button type=\\\"button\\\" class=\\\"btn btn-default\\\" uib-btn-checkbox=\\\"\\\" ng-model=\\\"vm.filtersOpen\\\"><i class=\\\"fa fa-cogs\\\"></i></button></div><h1 class=\\\"form-inline\\\">Адреса <small class=\\\"pull-right\\\"><es-address-input on-address-selected=\\\"vm.onSelectAddress(address)\\\"></es-address-input></small></h1></div><div uib-collapse=\\\"!vm.filtersOpen\\\"><es-building-filter-panel on-apply-filters=\\\"vm.onApplyFilters(criteria, filters)\\\"></es-building-filter-panel></div><div id=\\\"map\\\" style=\\\"width:100%; height:500px;\\\"></div><es-buildings-nearby address=\\\"vm.addressObject\\\"></es-buildings-nearby>\");\n$templateCache.put(\"app/building/building-create.html\",\"<div class=\\\"page-header\\\"><h1>Новый объект</h1></div><es-building-form building=\\\"vm.building\\\"><es-building-address building=\\\"vm.building\\\" on-address-selected=\\\"vm.onSelectAddress(address)\\\"></es-building-address></es-building-form><es-buildings-nearby address=\\\"vm.addressObject\\\"></es-buildings-nearby><hr><div class=\\\"panel panel-default\\\"><div class=\\\"panel-body\\\"><button class=\\\"btn btn-lg btn-success\\\" ng-click=\\\"vm.saveChanges()\\\">Создать</button> <a ng-href=\\\"#/building/list\\\" class=\\\"btn\\\">Отмена</a></div></div>\");\n$templateCache.put(\"app/building/building-edit.html\",\"<div class=\\\"page-header\\\"><h1 ng-bind=\\\"vm.building.name\\\">&nbsp;</h1></div><es-building-form building=\\\"vm.building\\\"><es-building-address building=\\\"vm.building\\\" on-address-selected=\\\"vm.onSelectAddress(address)\\\"></es-building-address></es-building-form><h2>Контакты</h2><div class=\\\"panel panel-default\\\"><div class=\\\"panel-heading\\\"><div class=\\\"row\\\"><es-add-contact on-contact-added=\\\"vm.addContact(newContact)\\\"></es-add-contact></div></div><div class=\\\"panel-body\\\"><es-building-contacts contacts=\\\"vm.contacts\\\" on-remove-contact=\\\"vm.removeContact(contact)\\\"></es-building-contacts></div></div><h2>Позиции</h2><div ng-repeat=\\\"(dealerId, dealerMap) in vm.dealersPositionsMap\\\"><es-dealer-positions positions=\\\"dealerMap.positions\\\" new-position=\\\"{building: vm.building, dealerId: dealerId}\\\" on-delete-position=\\\"vm.removeDealerPosition(dealerId, position)\\\" on-add-position=\\\"vm.addDealerPosition(dealerId, position)\\\"><h4 ng-bind=\\\"dealerMap.name\\\"></h4></es-dealer-positions></div><es-add-dealer-button on-add-dealer=\\\"vm.addDealer(dealer)\\\" on-check-added=\\\"vm.isAddedDealer(dealer)\\\"></es-add-dealer-button><hr><div class=\\\"panel panel-default\\\"><div class=\\\"panel-body\\\"><button class=\\\"btn btn-lg btn-success\\\" ng-click=\\\"vm.saveChanges()\\\">Сохранить изменения</button> <a ng-href=\\\"#/building/show/{{vm.building.id}}\\\" class=\\\"btn\\\">Отмена</a></div></div>\");\n$templateCache.put(\"app/building/building-list.html\",\"<div class=\\\"page-header\\\"><div class=\\\"btn-toolbar pull-right\\\"><button type=\\\"button\\\" class=\\\"btn btn-default\\\" uib-btn-checkbox=\\\"\\\" ng-model=\\\"vm.filtersOpen\\\"><i class=\\\"fa fa-cogs\\\"></i></button><div class=\\\"btn-group\\\"><a ng-href=\\\"#/building/create\\\" class=\\\"btn btn-primary\\\"><i class=\\\"fa fa-plus-square\\\"></i> Добавить объект</a></div></div><h1 class=\\\"form-inline\\\">Список объектов <small ng-bind=\\\"vm.totalItems\\\"></small> <small class=\\\"pull-right\\\"><es-search on-search-changed=\\\"vm.search(q)\\\"></es-search></small></h1></div><div uib-collapse=\\\"!vm.filtersOpen\\\"><es-building-filter-panel on-apply-filters=\\\"vm.onApplyFilters(criteria, filters)\\\"></es-building-filter-panel></div><table class=\\\"table table-bordered table-striped\\\"><thead><tr><th class=\\\"col-md-3\\\">Название</th><th class=\\\"col-md-4\\\">Адрес</th><th class=\\\"col-md-2\\\">Дилеры</th><th class=\\\"col-md-1\\\"><abbr title=\\\"Дата создания 1й позиции\\\">Создано</abbr></th><th class=\\\"col-md-1\\\"><abbr title=\\\"Дата обновления позиций\\\">Обновлено</abbr></th><th class=\\\"col-md-1\\\">Менеджер</th></tr></thead><tbody><tr ng-repeat=\\\"building in vm.buildings track by building.id\\\"><th scope=\\\"row\\\"><a href=\\\"#/building/show/{{::building.id}}\\\" style=\\\"font-weight: normal;\\\" ng-bind-html=\\\"building.name | highlight: vm.q\\\"></a></th><td><small ng-bind-html=\\\"building.address | highlight: vm.q\\\"></small></td><td>{{vm.getBuildingDealers(building)}}</td><td><small ng-bind=\\\"building.dateCreated | date: \\'dd.MM.yyyy HH:mm\\'\\\"></small></td><td><small ng-bind=\\\"building.lastUpdated | date : \\'dd.MM.yyyy HH:mm\\'\\\"></small></td><td ng-bind=\\\"building.author.name\\\"></td></tr></tbody></table><ul uib-pagination=\\\"\\\" total-items=\\\"vm.totalItems\\\" items-per-page=\\\"vm.itemsPerPage\\\" ng-model=\\\"vm.currentPage\\\" ng-change=\\\"vm.pageChanged()\\\"></ul>\");\n$templateCache.put(\"app/building/building-show.html\",\"<div class=\\\"page-header\\\"><div class=\\\"btn-toolbar pull-right\\\"><div class=\\\"btn-group\\\"><a href=\\\"#/building/edit/{{buildingVm.building.id}}\\\" class=\\\"btn btn-primary\\\"><i class=\\\"fa fa-edit\\\"></i> Редактировать</a></div></div><h1 ng-bind=\\\"buildingVm.building.name\\\">&nbsp;</h1></div><div class=\\\"row\\\"><div class=\\\"col-sm-12 col-md-6\\\"><div id=\\\"map\\\" style=\\\"width:500px; height:400px\\\"></div></div><div class=\\\"col-sm-12 col-md-6\\\"><address ng-bind=\\\"buildingVm.building.address\\\"></address><dl class=\\\"dl-horizontal no-margin pull-left\\\"><dt>Статус</dt><dd><es-building-status status-code=\\\"buildingVm.building.status\\\"></es-building-status></dd><dt>Менеджер</dt><dd ng-bind=\\\"buildingVm.building.author.name\\\">&nbsp;</dd><dt ng-bind=\\\"contact.contact.dictionary.name\\\" ng-repeat-start=\\\"contact in buildingVm.contacts track by contact.id\\\">&nbsp;</dt><dd ng-bind=\\\"contact.contact.name\\\">&nbsp;</dd><dt>&nbsp;</dt><dd ng-bind=\\\"contact.info\\\" ng-repeat-end=\\\"\\\"></dd></dl></div></div><es-comments comments=\\\"buildingVm.comments\\\" on-add-comment=\\\"buildingVm.addComment(comment)\\\"></es-comments>\");\n$templateCache.put(\"app/dictionary/dictionary-list.html\",\"<div class=\\\"page-header\\\"><h1>Справочники</h1></div><table class=\\\"table table-bordered table-striped\\\"><thead><tr><th class=\\\"col-md-4\\\">Название</th><th class=\\\"col-md-8\\\"></th></tr></thead><tbody><tr ng-repeat=\\\"dictionary in vm.dictionaries\\\"><td><a href=\\\"#/dictionaries/{{::dictionary.key}}\\\" ng-bind=\\\"dictionary.name\\\"></a></td><td>hello</td></tr></tbody></table>\");\n$templateCache.put(\"app/dictionary/dictionary-show.html\",\"<div class=\\\"page-header\\\"><h1 ng-bind=\\\"vm.dictionary.name\\\"></h1></div><es-dictionary key=\\\"vm.key\\\"></es-dictionary>\");\n$templateCache.put(\"app/layouts/private-layout.html\",\"<div><acme-navbar creation-date=\\\"main.creationDate\\\"></acme-navbar></div><div ui-view=\\\"container\\\"></div>\");\n$templateCache.put(\"app/layouts/public-layout.html\",\"<div ui-view=\\\"container\\\"></div>\");\n$templateCache.put(\"app/login/login.html\",\"<div class=\\\"container\\\"><form class=\\\"form-signin\\\" name=\\\"vm.loginForm\\\" ng-submit=\\\"vm.login(vm.loginForm.$valid)\\\" novalidate=\\\"\\\"><h2 class=\\\"form-signin-heading\\\">Вход в систему</h2><div class=\\\"form-group\\\" ng-class=\\\"{ \\'has-error\\': vm.loginForm.email.$touched && vm.loginForm.email.$invalid }\\\"><label for=\\\"inputEmail\\\" class=\\\"sr-only\\\">Email</label> <input type=\\\"email\\\" id=\\\"inputEmail\\\" name=\\\"email\\\" class=\\\"form-control\\\" placeholder=\\\"Email\\\" required=\\\"\\\" autofocus=\\\"\\\" ng-model=\\\"vm.email\\\" ng-click=\\\"$event.stopPropagation()\\\"><p ng-show=\\\"vm.loginForm.email.$invalid && vm.loginForm.email.$touched\\\" class=\\\"help-block\\\">Неправильный email.</p></div><div class=\\\"form-group\\\" ng-class=\\\"{ \\'has-error\\': vm.loginForm.password.$touched && vm.loginForm.password.$invalid }\\\"><label for=\\\"inputPassword\\\" class=\\\"sr-only\\\">Пароль</label> <input type=\\\"password\\\" id=\\\"inputPassword\\\" name=\\\"password\\\" class=\\\"form-control\\\" placeholder=\\\"Пароль\\\" required=\\\"\\\" ng-model=\\\"vm.password\\\" ng-click=\\\"$event.stopPropagation()\\\"><div class=\\\"help-block\\\" ng-messages=\\\"vm.loginForm.password.$error\\\" ng-if=\\\"vm.loginForm.password.$invalid && vm.loginForm.password.$touched\\\"><p ng-message=\\\"minlength\\\">Your name is too short.</p><p ng-message=\\\"maxlength\\\">Your name is too long.</p><p ng-message=\\\"required\\\">Неверный пароль.</p></div></div><div class=\\\"form-group\\\"><div class=\\\"checkbox\\\"><label><input type=\\\"checkbox\\\" value=\\\"remember-me\\\"> Запомнить меня</label></div></div><button class=\\\"btn btn-lg btn-primary btn-block\\\" type=\\\"submit\\\" ng-disabled=\\\"!vm.loginForm.$submitted && vm.loginForm.$invalid\\\">Войти</button></form></div>\");\n$templateCache.put(\"app/main/about.html\",\"<p>О системе</p>\");\n$templateCache.put(\"app/main/main.html\",\"<div class=\\\"jumbotron text-center\\\"><h1>Estima application</h1><p class=\\\"lead\\\"></p><button type=\\\"button\\\" class=\\\"btn btn-lg btn-success\\\" ng-click=\\\"main.showToastr()\\\">Уведомление</button><p></p></div><div class=\\\"row\\\"></div>\");\n$templateCache.put(\"app/components/addContact/add-contact.html\",\"<div class=\\\"col-sm-3\\\"><label class=\\\"sr-only\\\" for=\\\"contactType\\\">Тип контакта</label><select ng-model=\\\"addContactVm.newItem.contactType\\\" class=\\\"form-control\\\" id=\\\"contactType\\\"><option value=\\\"\\\" disabled=\\\"\\\" selected=\\\"\\\">Выбрать тип контакта...</option><option ng-repeat=\\\"option in addContactVm.contactTypes\\\" value=\\\"{{::option.key}}\\\">{{::option.name}}</option></select></div><div class=\\\"col-sm-3\\\"><label class=\\\"sr-only\\\" for=\\\"contactName\\\">Контакт</label><select class=\\\"form-control\\\" id=\\\"contactName\\\" ng-model=\\\"addContactVm.newItem.contactId\\\"><option value=\\\"\\\" disabled=\\\"\\\" selected=\\\"\\\">Выбрать контакт...</option><option ng-repeat=\\\"option in addContactVm.contacts\\\" value=\\\"{{::option.id}}\\\">{{::option.title}}</option></select></div><div class=\\\"col-sm-4\\\"><label class=\\\"sr-only\\\" for=\\\"contactInfo\\\">Информация</label> <textarea class=\\\"form-control\\\" id=\\\"contactInfo\\\" ng-model=\\\"addContactVm.newItem.info\\\" placeholder=\\\"Информация\\\"></textarea></div><div class=\\\"col-sm-2\\\"><button type=\\\"submit\\\" class=\\\"btn btn-success pull-right\\\" ng-click=\\\"addContactVm.addContact(addContactVm.newItem)\\\" ng-disabled=\\\"!addContactVm.newItem.contactId\\\">Добавить</button></div>\");\n$templateCache.put(\"app/components/addDealerButton/add-dealer-button.html\",\"<div class=\\\"input-group\\\"><es-dictionary-autocomplete key=\\\"dealers\\\" selected=\\\"addDealerVm.dealer\\\"></es-dictionary-autocomplete><div class=\\\"input-group-btn\\\"><button class=\\\"btn btn-primary\\\" ng-click=\\\"addDealerVm.addDealer()\\\" ng-disabled=\\\"!addDealerVm.dealer\\\">Добавить</button></div></div>\");\n$templateCache.put(\"app/components/addressInput/address-input.html\",\"<input type=\\\"text\\\" id=\\\"address\\\" ng-model=\\\"addressInputVm.asyncSelected\\\" placeholder=\\\"Адрес...\\\" class=\\\"form-control\\\" ng-model-options=\\\"{ debounce: { default: 500, blur: 100 } }\\\" uib-typeahead=\\\"address.hint.text for address in addressInputVm.getLocation($viewValue)\\\" typeahead-loading=\\\"loadingLocations\\\" typeahead-no-results=\\\"noResults\\\" typeahead-on-select=\\\"addressInputVm.onSelect($item, $model, $label)\\\"> <i ng-show=\\\"loadingLocations\\\" class=\\\"glyphicon glyphicon-refresh\\\"></i><div ng-show=\\\"noResults\\\"><i class=\\\"glyphicon glyphicon-remove\\\"></i> No Results Found</div>\");\n$templateCache.put(\"app/components/buildingAddress/building-address.html\",\"<input type=\\\"text\\\" id=\\\"address\\\" ng-model=\\\"addressVm.asyncSelected\\\" placeholder=\\\"Адрес объекта...\\\" class=\\\"form-control\\\" ng-model-options=\\\"{ debounce: { default: 500, blur: 100 } }\\\" uib-typeahead=\\\"address.hint.text for address in addressVm.getLocation($viewValue)\\\" typeahead-loading=\\\"loadingLocations\\\" typeahead-no-results=\\\"noResults\\\" typeahead-on-select=\\\"addressVm.onSelect($item, $model, $label)\\\"> <i ng-show=\\\"loadingLocations\\\" class=\\\"glyphicon glyphicon-refresh\\\"></i><div ng-show=\\\"noResults\\\"><i class=\\\"glyphicon glyphicon-remove\\\"></i> No Results Found</div><br><div id=\\\"map\\\" style=\\\"width:500px; height:400px\\\"></div>\");\n$templateCache.put(\"app/components/buildingContacts/building-contacts.html\",\"<table class=\\\"table table-striped table-condensed table-vcenter\\\"><tbody><tr ng-repeat-start=\\\"contact in buildingContactsVm.contacts | notRemoved:contact\\\" ng-repeat-end=\\\"\\\"><td class=\\\"col-md-3 text-center\\\" ng-bind=\\\"contact.contact.dictionary.name\\\">&nbsp;</td><td class=\\\"col-md-3 text-center\\\" ng-bind=\\\"contact.contact.title\\\">&nbsp;</td><td class=\\\"col-md-4 text-center\\\" ng-bind=\\\"contact.info\\\">&nbsp;</td><td class=\\\"col-md-2 text-center\\\"><a class=\\\"btn text-danger\\\" ng-click=\\\"buildingContactsVm.removeContact(contact)\\\"><i class=\\\"fa fa-remove\\\"></i></a></td></tr></tbody></table>\");\n$templateCache.put(\"app/components/buildingFilterPanel/building-filter-panel.html\",\"<div class=\\\"well well-lg\\\"><div class=\\\"row\\\"><div class=\\\"col-sm-12 col-md-5\\\"><dl class=\\\"dl-horizontal\\\"><dt><label for=\\\"managerFilter\\\">Менеджер</label></dt><dd><select id=\\\"managerFilter\\\" class=\\\"form-control\\\" ng-model=\\\"filterPanelVm.filters.authorId\\\" ng-change=\\\"filterPanelVm.applyFilters()\\\" ng-options=\\\"user.id as user.name for user in filterPanelVm.users track by user.id\\\"><option value=\\\"\\\">-</option></select></dd><dt><label for=\\\"statusFilter\\\">Статус</label></dt><dd><select id=\\\"statusFilter\\\" class=\\\"form-control\\\" ng-model=\\\"filterPanelVm.filters.status\\\" ng-change=\\\"filterPanelVm.applyFilters()\\\" multiple=\\\"\\\"><option ng-repeat=\\\"status in filterPanelVm.statuses track by status.code\\\" value=\\\"{{::status.code}}\\\">{{::status.label}}</option></select></dd></dl></div><div class=\\\"col-sm-12 col-md-5\\\"><dl class=\\\"dl-horizontal\\\"><dt><label for=\\\"lastUpdatedFromFilter\\\">Обновлен после</label></dt><dd><input type=\\\"date\\\" id=\\\"lastUpdatedFromFilter\\\" name=\\\"lastUpdatedFrom\\\" ng-model=\\\"filterPanelVm.filters.lastUpdatedFrom\\\" placeholder=\\\"yyyy-MM-dd\\\" min=\\\"2015-01-01\\\" ng-change=\\\"filterPanelVm.applyFilters()\\\"><div role=\\\"alert\\\"><span class=\\\"error\\\" ng-show=\\\"lastUpdatedFrom.$error.date\\\">Некорректная дата!</span></div></dd><dt><label for=\\\"dealerFilter\\\">Дилер</label></dt><dd><select id=\\\"dealerFilter\\\" class=\\\"form-control\\\" ng-model=\\\"filterPanelVm.filters.dealerId\\\" ng-change=\\\"filterPanelVm.applyFilters()\\\" ng-options=\\\"dealer.id as dealer.title for dealer in filterPanelVm.dealers track by dealer.id\\\"><option value=\\\"\\\">-</option></select></dd></dl></div></div></div>\");\n$templateCache.put(\"app/components/buildingForm/building-form.html\",\"<div class=\\\"well\\\"><div class=\\\"row\\\"><div class=\\\"col-sm-12 col-md-6\\\"><div class=\\\"form-group\\\"><label for=\\\"name\\\">Название</label> <input type=\\\"text\\\" class=\\\"form-control\\\" ng-model=\\\"buildingFormVm.building.name\\\" id=\\\"name\\\" placeholder=\\\"Название\\\"></div><div class=\\\"form-group\\\"><label for=\\\"name\\\">Статус</label><select class=\\\"form-control\\\" ng-model=\\\"buildingFormVm.building.status\\\" ng-init=\\\"buildingFormVm.building.status = buildingFormVm.building.status || buildingFormVm.statuses[0].code\\\" ng-options=\\\"status.code as status.label for status in buildingFormVm.statuses\\\"></select></div><div class=\\\"form-group\\\"><label for=\\\"description\\\">Примечание</label> <textarea class=\\\"form-control\\\" rows=\\\"5\\\" ng-model=\\\"buildingFormVm.building.description\\\" id=\\\"description\\\" placeholder=\\\"Примечание\\\"></textarea></div></div><div class=\\\"col-sm-12 col-md-6\\\"><div class=\\\"form-group\\\"><label for=\\\"address\\\">Адрес</label><ng-transclude></ng-transclude></div></div></div></div>\");\n$templateCache.put(\"app/components/buildingStatus/building-status.html\",\"{{::statusVm.getStatusLabel()}}\");\n$templateCache.put(\"app/components/buildingsNearby/buildings-nearby.html\",\"<div ng-if=\\\"vm.buildings.length > 0\\\"><h2>Найдены объекты в радиусе 1 км</h2><div class=\\\"row\\\"></div><ul><li ng-repeat=\\\"building in vm.buildings\\\"><a href=\\\"#/building/show/{{::building.id}}\\\">{{building.name}} ({{building.address}})</a></li></ul></div><div ng-if=\\\"vm.buildings.length == 0\\\"><h2>Ничего не найдено в радиусе 1 км</h2></div>\");\n$templateCache.put(\"app/components/comment/comment.html\",\"<div class=\\\"well\\\"><div class=\\\"media\\\"><div class=\\\"media-body\\\"><h4 class=\\\"media-heading\\\">{{::commentVm.comment.author.name}} <small ng-bind=\\\"commentVm.comment.dateCreated | date: \\'dd.MM.yyyy HH:mm\\'\\\"></small></h4>{{::commentVm.comment.text}}</div></div></div>\");\n$templateCache.put(\"app/components/comments/comments.html\",\"<h2>Комментарии <small ng-bind=\\\"commentsVm.comments.length\\\"></small></h2><div class=\\\"well\\\"><h4>Новый комментарий:</h4><form role=\\\"form\\\"><div class=\\\"form-group\\\"><textarea class=\\\"form-control\\\" rows=\\\"3\\\" ng-model=\\\"commentsVm.newComment.text\\\"></textarea></div><button type=\\\"submit\\\" class=\\\"btn btn-primary\\\" ng-click=\\\"commentsVm.addNewComment()\\\">Добавить</button></form></div><hr><div ng-repeat=\\\"comment in commentsVm.comments\\\"><es-comment comment=\\\"comment\\\"></es-comment></div>\");\n$templateCache.put(\"app/components/dealerPositions/dealer-positions.html\",\"<div class=\\\"panel panel-default\\\"><div class=\\\"panel-heading\\\"><ng-transclude></ng-transclude><table class=\\\"table table-condensed table-vcenter table-noborder\\\"><thead><tr class=\\\"tr-noborder\\\"><th class=\\\"col-md-2 text-center\\\">Контакт</th><th class=\\\"col-md-1 text-center\\\">Тип</th><th class=\\\"col-md-2 text-center\\\">Спецификация</th><th class=\\\"col-md-1 text-center\\\">Количество</th><th class=\\\"col-md-1 text-center\\\"><abbr title=\\\"Цена на объекте\\\">Цена 1</abbr></th><th class=\\\"col-md-1 text-center\\\"><abbr title=\\\"Цена входящая для дилера\\\">Цена 2</abbr></th><th class=\\\"col-md-1 text-center\\\">Сумма</th><th class=\\\"col-md-1 text-center\\\">Статус</th><th class=\\\"col-md-1 text-center\\\">Отгрузка</th><th class=\\\"col-md-1 text-center\\\"></th></tr></thead><tbody><tr ng-form=\\\"\\\"><td class=\\\"col-md-2\\\"><input class=\\\"form-control\\\" type=\\\"text\\\" ng-model=\\\"positionsVm.inputPosition.contactName\\\"></td><td class=\\\"col-md-1\\\"><select class=\\\"form-control\\\" ng-model=\\\"positionsVm.inputPosition.type\\\" ng-options=\\\"type as type for type in positionsVm.types\\\"></select></td><td class=\\\"col-md-2\\\"><input class=\\\"form-control\\\" type=\\\"text\\\" ng-model=\\\"positionsVm.inputPosition.spec\\\"></td><td class=\\\"col-sm-1\\\"><input type=\\\"number\\\" class=\\\"form-control\\\" ng-model=\\\"positionsVm.inputPosition.quantity\\\"></td><td class=\\\"col-md-1\\\"><input class=\\\"form-control\\\" type=\\\"number\\\" ng-model=\\\"positionsVm.inputPosition.grossPrice\\\"></td><td class=\\\"col-md-1\\\"><input class=\\\"form-control\\\" type=\\\"number\\\" ng-model=\\\"positionsVm.inputPosition.dealerPrice\\\"></td><td class=\\\"col-md-1\\\"><span class=\\\"form-control\\\" disabled=\\\"\\\" ng-bind=\\\"(positionsVm.inputPosition.dealerPrice * positionsVm.inputPosition.quantity) || \\'?\\'\\\"></span></td><td class=\\\"col-md-1\\\"><select class=\\\"form-control\\\" ng-model=\\\"positionsVm.inputPosition.status\\\" ng-options=\\\"status as status for status in positionsVm.statuses\\\"></select></td><td class=\\\"col-md-1\\\"></td><td class=\\\"col-md-1\\\"><input class=\\\"form-control btn btn-success\\\" type=\\\"submit\\\" value=\\\"Добавить\\\" ng-click=\\\"positionsVm.addNewPosition()\\\"></td></tr></tbody></table></div><div class=\\\"panel-body\\\"><table class=\\\"table table-striped table-condensed table-vcenter\\\"><tbody><tr ng-repeat-start=\\\"position in positionsVm.positions | filter:positionsVm.activePosition\\\" ng-repeat-end=\\\"\\\"><td class=\\\"col-md-2 text-center\\\" ng-bind=\\\"position.contactName\\\">&nbsp;</td><td class=\\\"col-md-1 text-center\\\" ng-bind=\\\"position.type\\\">&nbsp;</td><td class=\\\"col-md-2 text-center\\\" ng-bind=\\\"position.spec\\\">&nbsp;</td><td class=\\\"col-md-1 text-center\\\" ng-bind=\\\"position.quantity\\\">&nbsp;</td><td class=\\\"col-md-1 text-center\\\" ng-bind=\\\"position.grossPrice\\\">&nbsp;</td><td class=\\\"col-md-1 text-center\\\" ng-bind=\\\"position.dealerPrice\\\">&nbsp;</td><td class=\\\"col-md-1 text-center\\\" ng-bind=\\\"(position.dealerPrice * position.quantity) || \\'?\\'\\\">&nbsp;</td><td class=\\\"col-md-1 text-center\\\" ng-bind=\\\"position.status\\\">&nbsp;</td><td class=\\\"col-md-1 text-center\\\" ng-bind=\\\"position.dateShipped\\\">&nbsp;</td><td class=\\\"col-md-1 text-center\\\"><a class=\\\"btn text-warning\\\"><i class=\\\"fa fa-pencil\\\"></i></a> <a class=\\\"btn text-danger\\\" ng-click=\\\"positionsVm.removePosition(position)\\\"><i class=\\\"fa fa-remove\\\"></i></a></td></tr></tbody></table></div></div>\");\n$templateCache.put(\"app/components/dictionary/dictionary.html\",\"<div class=\\\"container-fluid\\\"><div class=\\\"panel panel-default\\\"><div class=\\\"panel-body\\\"><form class=\\\"form-inline\\\"><div class=\\\"form-group\\\"><label class=\\\"sr-only\\\" for=\\\"title\\\">Название</label> <input type=\\\"text\\\" class=\\\"form-control\\\" id=\\\"title\\\" ng-model=\\\"dictionaryVm.newItem.title\\\" placeholder=\\\"Название\\\"></div><div class=\\\"form-group\\\"><label class=\\\"sr-only\\\" for=\\\"contactName\\\">Контактное лицо</label> <input type=\\\"text\\\" class=\\\"form-control\\\" id=\\\"contactName\\\" ng-model=\\\"dictionaryVm.newItem.contactName\\\" placeholder=\\\"Контактное лицо\\\"></div><div class=\\\"form-group\\\"><label class=\\\"sr-only\\\" for=\\\"contactPosition\\\">Должность</label> <input type=\\\"text\\\" class=\\\"form-control\\\" id=\\\"contactPosition\\\" ng-model=\\\"dictionaryVm.newItem.contactPosition\\\" placeholder=\\\"Должность\\\"></div><div class=\\\"form-group\\\"><label class=\\\"sr-only\\\" for=\\\"phone\\\">Телефон</label> <input type=\\\"text\\\" class=\\\"form-control\\\" id=\\\"phone\\\" ng-model=\\\"dictionaryVm.newItem.phone\\\" placeholder=\\\"Телефон\\\"></div><button type=\\\"submit\\\" class=\\\"btn btn-success pull-right\\\" ng-click=\\\"dictionaryVm.add(dictionaryVm.newItem)\\\">Добавить</button></form></div></div><table class=\\\"table table-bordered table-striped\\\"><thead><tr><th class=\\\"col-md-3\\\">Название</th><th class=\\\"col-md-3\\\">Контактное лицо</th><th class=\\\"col-md-3\\\">Должность</th><th class=\\\"col-md-3\\\">Телефон</th></tr></thead><tbody><tr ng-repeat=\\\"item in dictionaryVm.items\\\"><td class=\\\"col-md-3\\\" ng-bind=\\\"item.title\\\"></td><td class=\\\"col-md-3\\\" ng-bind=\\\"item.contactName\\\"></td><td class=\\\"col-md-3\\\" ng-bind=\\\"item.contactPosition\\\"></td><td class=\\\"col-md-3\\\" ng-bind=\\\"item.phone\\\"></td></tr></tbody></table><ul uib-pagination=\\\"\\\" total-items=\\\"dictionaryVm.totalItems\\\" items-per-page=\\\"dictionaryVm.itemsPerPage\\\" ng-model=\\\"dictionaryVm.currentPage\\\" ng-change=\\\"dictionaryVm.pageChanged()\\\"></ul></div>\");\n$templateCache.put(\"app/components/dictionaryAutocomplete/dictionary-autocomplete.html\",\"<ui-select ng-model=\\\"vm.selected\\\" theme=\\\"bootstrap\\\" ng-disabled=\\\"false\\\" reset-search-input=\\\"true\\\"><ui-select-match placeholder=\\\"Выбрать...\\\">{{$select.selected.title}}</ui-select-match><ui-select-choices repeat=\\\"item in vm.items track by $index\\\" refresh=\\\"vm.refreshItems($select.search)\\\" refresh-delay=\\\"0\\\"><div ng-bind-html=\\\"vm.trustAsHtml((item.title | highlight: $select.search))\\\"></div></ui-select-choices></ui-select>\");\n$templateCache.put(\"app/components/messagesButton/messages-button.html\",\"<button class=\\\"btn btn-default\\\" ng-click=\\\"messagesButtonVm.openMessages()\\\"><span class=\\\"fa fa-comments\\\"></span></button>\");\n$templateCache.put(\"app/components/messagesButton/messages-modal.html\",\"<div class=\\\"modal-header\\\"><button type=\\\"button\\\" class=\\\"close\\\" data-dismiss=\\\"modal\\\" ng-click=\\\"messagesModalVm.cancel()\\\">&times;</button><h4 class=\\\"modal-title\\\">Заметки по позиции</h4></div><div class=\\\"modal-body\\\"><div class=\\\"form-group\\\"><div class=\\\"input-group\\\"><textarea class=\\\"form-control\\\" row=\\\"3\\\" placeholder=\\\"Новое сообщение\\\" ng-model=\\\"messagesModalVm.newMessage.text\\\"></textarea> <span class=\\\"input-group-addon btn btn-primary input-lg\\\" ng-click=\\\"messagesModalVm.addNewMessage()\\\">Добавить</span></div></div><div ng-repeat=\\\"message in messagesModalVm.messages | orderBy:\\'dateCreated\\':true\\\" class=\\\"media\\\"><div class=\\\"media-left\\\"></div><div class=\\\"media-body\\\"><h4 class=\\\"media-heading\\\"><span ng-bind=\\\"message.author.name\\\"></span> <small>{{::message.dateCreated | date: \\'dd.MM.yyyy HH:mm\\'}}</small></h4>{{::message.text}}</div></div></div><div class=\\\"modal-footer\\\"><button type=\\\"button\\\" class=\\\"btn btn-default\\\" data-dismiss=\\\"modal\\\" ng-click=\\\"messagesModalVm.cancel()\\\">Close</button> <button type=\\\"button\\\" class=\\\"btn btn-primary\\\" data-dismiss=\\\"modal\\\" ng-click=\\\"messagesModalVm.ok()\\\">OK</button></div>\");\n$templateCache.put(\"app/components/navbar/navbar.html\",\"<nav class=\\\"navbar navbar-static-top navbar-inverse\\\"><div class=\\\"container-fluid\\\"><div class=\\\"navbar-header\\\"><a class=\\\"navbar-brand\\\" href=\\\"#/\\\">Estima</a></div><div class=\\\"collapse navbar-collapse\\\" id=\\\"bs-example-navbar-collapse-6\\\"><ul class=\\\"nav navbar-nav\\\"><li><a href=\\\"#/\\\" class=\\\"glyphicon glyphicon-home\\\"></a></li><li><a ng-href=\\\"#/building/list\\\">Объекты</a></li><li><a ng-href=\\\"#/address/list\\\">Адреса</a></li><li><a ng-href=\\\"#/dictionaries/list\\\">Справочники</a></li><li><a ng-href=\\\"#/about\\\">О системе</a></li></ul><ul class=\\\"nav navbar-nav navbar-right\\\"><li class=\\\"dropdown\\\" uib-dropdown=\\\"\\\"><a href=\\\"#\\\" class=\\\"dropdown-toggle\\\" uib-dropdown-toggle=\\\"\\\" role=\\\"button\\\" aria-haspopup=\\\"true\\\" aria-expanded=\\\"false\\\"><span ng-bind=\\\"vm.user.name\\\"></span> <span class=\\\"caret\\\"></span></a><ul class=\\\"dropdown-menu\\\" uib-dropdown-menu=\\\"\\\"><li><a href=\\\"#\\\">Личный кабинет</a></li><li role=\\\"separator\\\" class=\\\"divider\\\"></li><li><a href=\\\"#/logout\\\">Выход</a></li></ul></li></ul><span class=\\\"nav navbar-nav navbar-right\\\" style=\\\"padding-top: 10px;\\\"><spinner name=\\\"authSpinner\\\" img-src=\\\"assets/images/ajax-loader.gif\\\"></spinner></span></div></div></nav>\");\n$templateCache.put(\"app/components/search/search.html\",\"<input type=\\\"text\\\" placeholder=\\\"Поиск...\\\" class=\\\"form-control\\\" style=\\\"vertical-align: bottom;\\\" ng-model=\\\"searchVm.q\\\" ng-model-options=\\\"{ debounce: 1000 }\\\">\");}]);"],"sourceRoot":"/source/"}