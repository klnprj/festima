{"version":3,"sources":["scripts/app-95160f336b.js"],"names":["angular","module","webDevTec","getTec","data","title","url","description","logo","this","service","acmeNavbar","NavbarController","moment","session","vm","profile","then","user","relativeDate","creationDate","fromNow","$inject","directive","restrict","templateUrl","scope","controller","controllerAs","bindToController","$scope","$uibModalInstance","position","messages","onNewMessage","ok","close","cancel","dismiss","addNewMessage","newMessage","$uibModal","$log","Message","messagesManager","openMessages","modalInstance","loadAllMessages","id","open","animation","size","resolve","addMessage","result","selectedItem","info","Date","_message","msg","extend","authorId","userId","positionId","dateCreated","format","save","getMessage","message","push","component","bindings","acmeMalarkey","malarkey","linkFunc","el","attr","watcher","typist","typeSpeed","deleteSpeed","pauseDelay","loop","postfix","addClass","forEach","extraValues","value","type","pause","$watch","contributors","contributor","login","$on","MalarkeyController","githubContributor","activate","getContributors","template","link","$http","limit","getContributorsComplete","response","getContributorsFailed","error","toJson","get","apiHost","factory","app","DictionaryAutocompleteLink","element","attrs","key","name","DictionaryAutocompleteController","$sce","dictionaries","items","trustAsHtml","refreshItems","q","itemsByKey","undefined","selected","DictionaryComponentController","$q","newItem","currentPage","itemsPerPage","add","item","addItem","pageChanged","count","countItemsByKey","all","totalItems","addNewPosition","newPosition","copy","inputPosition","onAddPosition","dealerId","removePosition","onDeletePosition","dealer","activePosition","removed","positions","transclude","BuildingsNearbyController","maps","addresses","findNearbyBuildings","address","latLng","centroidToLatlng","geometry","centroid","listWithinRadius","buildings","Object","defineProperty","_address","set","newVal","building","dealers","buildingPositions","dealerList","_dealers","buildingDealersMap","dealersMap","loadPositions","buildingId","list1","i","length","console","log","savePositions","dealerMap","create1","resp","index","map","e","indexOf","splice","addDealerPosition","removeDealerPosition","loadDealers","list","refreshDealers","addDealer","keys","isDefined","asyncSelected","DG","location","initMap","on","latlng","lat","lng","searchCoords","marker","removeLayer","getMarker","text","attributes","buildingname","bindPopup","addTo","searchAddress","addLayer","panTo","getLocation","suggestions","onSelect","itemData","model","label","search","hint","full_name","onAddressSelected","onCheckAdded","onAddDealer","findAllByQuery","appConfig","User","cachedPromises","usersManager","_pool","_retrieveInstance","instance","setData","_search","getUser","isUndefined","apiUrl","loadAllUsers","deferred","defer","success","itemsArray","reject","promise","setUser","prototype","post","delete","update","put","_load","author","params","setMessage","self","dgis","center","zoom","geoclicker","showPhotos","showBooklet","ajax","output","region_id","getById","fields","point","version","Wkt","toPoints","wkt","MainController","$timeout","toastr","getWebDevTec","classAnimation","showToastr","awesomeThings","awesomeThing","rank","Math","random","$state","$rootScope","$cookies","OAuth","OAuthToken","fetchUser","email","currentUserPromise","userEmail","credentials","options","getAccessToken","username","logout","remove","go","isAuthenticated","checkLoggedIn","skipLoggedIn","spinnerService","password","$stateParams","loadByKey","dictionary","listAll","offset","max","loadItem","listAllByBuilding","createPosition","positionData","mapAll","listByIds","ids","Building","buildingsManager","getBuilding","loadAllBuildings","setBuilding","BuildingDealer","buildingDealersManager","unsavedId","min","_unsaved","unsaved","Number","getBuildingDealer","loadAllBuildingDealers","setBuildingDealer","getDealersPositionsMap","dealerPositionsMap","mapOfDealers","saveDealerPositions","positionsList","savedPosition","$location","buildingDealersService","mapOfDealersPositions","dealersPositionsMap","dealerPositions","isAddedDealer","String","saveChanges","path","onSelectAddress","addressObject","radius","_","runBlock","debug","run","$window","event","rejection","getRefreshToken","href","routerConfig","$stateProvider","$urlRouterProvider","state","abstract","views","loggedin","loggedout","container@private","container@public","otherwise","config","constant","window","$logProvider","toastrConfig","debugEnabled","allowHtml","timeOut","positionClass","preventDuplicates","progressBar","authInterceptor","responseError","status","OAuthProvider","configure","grantPath","revokePath","baseUrl","clientId","secure","OAuthTokenProvider","$httpProvider","interceptors","$injector","$templateCache"],"mappings":"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","file":"scripts/app-95160f336b.js","sourcesContent":["(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('festima', ['ngMessages', 'ngRoute', 'ui.router', 'ngAnimate', 'ngSanitize', 'ui.bootstrap', 'toastr', 'ui.select',\r\n      'angular-oauth2', 'angularSpinners']);\r\n\r\n})();\r\n\n(function() {\n  'use strict';\n\n  angular\n      .module('festima')\n      .service('webDevTec', webDevTec);\n\n  /** @ngInject */\n  function webDevTec() {\n    var data = [\n      {\n        'title': 'AngularJS',\n        'url': 'https://angularjs.org/',\n        'description': 'HTML enhanced for web apps!',\n        'logo': 'angular.png'\n      },\n      {\n        'title': 'BrowserSync',\n        'url': 'http://browsersync.io/',\n        'description': 'Time-saving synchronised browser testing.',\n        'logo': 'browsersync.png'\n      },\n      {\n        'title': 'GulpJS',\n        'url': 'http://gulpjs.com/',\n        'description': 'The streaming build system.',\n        'logo': 'gulp.png'\n      },\n      {\n        'title': 'Jasmine',\n        'url': 'http://jasmine.github.io/',\n        'description': 'Behavior-Driven JavaScript.',\n        'logo': 'jasmine.png'\n      },\n      {\n        'title': 'Karma',\n        'url': 'http://karma-runner.github.io/',\n        'description': 'Spectacular Test Runner for JavaScript.',\n        'logo': 'karma.png'\n      },\n      {\n        'title': 'Protractor',\n        'url': 'https://github.com/angular/protractor',\n        'description': 'End to end test framework for AngularJS applications built on top of WebDriverJS.',\n        'logo': 'protractor.png'\n      },\n      {\n        'title': 'Bootstrap',\n        'url': 'http://getbootstrap.com/',\n        'description': 'Bootstrap is the most popular HTML, CSS, and JS framework for developing responsive, mobile first projects on the web.',\n        'logo': 'bootstrap.png'\n      },\n      {\n        'title': 'Angular UI Bootstrap',\n        'url': 'http://angular-ui.github.io/bootstrap/',\n        'description': 'Bootstrap components written in pure AngularJS by the AngularUI Team.',\n        'logo': 'ui-bootstrap.png'\n      }\n    ];\n\n    this.getTec = getTec;\n\n    function getTec() {\n      return data;\n    }\n  }\n\n})();\n\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('festima')\r\n    .directive('acmeNavbar', acmeNavbar);\r\n\r\n  /** @ngInject */\r\n  function acmeNavbar() {\r\n    var directive = {\r\n      restrict: 'E',\r\n      templateUrl: 'app/components/navbar/navbar.html',\r\n      scope: {\r\n          creationDate: '='\r\n      },\r\n      controller: NavbarController,\r\n      controllerAs: 'vm',\r\n      bindToController: true\r\n    };\r\n\r\n    return directive;\r\n\r\n    /** @ngInject */\r\n    function NavbarController(moment, session) {\r\n      var vm = this;\r\n\r\n      session.profile().then(function(user) {\r\n        vm.user = user;\r\n      });\r\n\r\n      // \"vm.creation\" is avaible by directive option \"bindToController: true\"\r\n      vm.relativeDate = moment(vm.creationDate).fromNow();\r\n\r\n\r\n    }\r\n  }\r\n\r\n})();\r\n\nangular.module('festima')\n  .controller('MessagesModalController', function ($scope, $uibModalInstance, position, messages, onNewMessage) {\n    var vm = this;\n\n    vm.messages = messages;\n    vm.onNewMessage = onNewMessage;\n\n    vm.ok = function () {\n      // $uibModalInstance.close($scope.selected.item);\n      $uibModalInstance.close(position);\n    };\n\n    vm.cancel = function () {\n      $uibModalInstance.dismiss('cancel');\n    };\n\n    vm.addNewMessage = function() {\n      vm.onNewMessage(vm.newMessage);\n      vm.newMessage = {};\n    };\n  }\n);\n\nangular.module('festima')\r\n  .controller('MessagesButtonController', function($uibModal, $log, moment, Message, messagesManager, session) {\r\n    var vm = this;\r\n\r\n    vm.openMessages = function () {\r\n      // var _messages;\r\n      var modalInstance;\r\n\r\n      messagesManager.loadAllMessages(vm.position.id).then(function(data) {\r\n        vm.messages = data;\r\n\r\n        modalInstance = $uibModal.open({\r\n          animation: true,\r\n          templateUrl: 'app/components/messagesButton/messages-modal.html',\r\n          controller: 'MessagesModalController',\r\n          controllerAs: 'messagesModalVm',\r\n          size: 'lg',\r\n          resolve: {\r\n            position: function () {\r\n              return vm.position;\r\n            },\r\n            messages: function() {\r\n              return vm.messages;\r\n            },\r\n            onNewMessage: function() {\r\n              return vm.addMessage;\r\n            }\r\n          }\r\n        });\r\n\r\n        modalInstance.result.then(function (selectedItem) {\r\n          // $scope.selected = selectedItem;\r\n        }, function () {\r\n          $log.info('Modal dismissed at: ' + new Date());\r\n        });\r\n      });\r\n    };\r\n\r\n    vm.addMessage = function(_message) {\r\n      var msg = new Message(angular.extend(_message, {authorId: session.userId(), positionId: vm.position.id, dateCreated: moment().format()}));\r\n\r\n      msg.save().then(function(id) {\r\n        // messagesManager.loadAllMessages(vm.position.id).then(function(data) {\r\n        //   angular.copy(data, vm.messages);\r\n        // });\r\n        messagesManager.getMessage(id).then(function(message) {\r\n          vm.messages.push(message);\r\n        });\r\n      });\r\n    };\r\n  }\r\n);\r\n\nangular.module('festima').component('messagesButton', {\n  templateUrl: 'app/components/messagesButton/messages-button.html',\n  bindings: {\n    position: '<'\n  },\n  controller: 'MessagesButtonController',\n  controllerAs: 'messagesButtonVm'\n});\n\n(function() {\n  'use strict';\n\n  angular\n    .module('festima')\n    .directive('acmeMalarkey', acmeMalarkey);\n\n  /** @ngInject */\n  function acmeMalarkey(malarkey) {\n    var directive = {\n      restrict: 'E',\n      scope: {\n        extraValues: '='\n      },\n      template: '&nbsp;',\n      link: linkFunc,\n      controller: MalarkeyController,\n      controllerAs: 'vm'\n    };\n\n    return directive;\n\n    function linkFunc(scope, el, attr, vm) {\n      var watcher;\n      var typist = malarkey(el[0], {\n        typeSpeed: 40,\n        deleteSpeed: 40,\n        pauseDelay: 800,\n        loop: true,\n        postfix: ' '\n      });\n\n      el.addClass('acme-malarkey');\n\n      angular.forEach(scope.extraValues, function(value) {\n        typist.type(value).pause().delete();\n      });\n\n      watcher = scope.$watch('vm.contributors', function() {\n        angular.forEach(vm.contributors, function(contributor) {\n          typist.type(contributor.login).pause().delete();\n        });\n      });\n\n      scope.$on('$destroy', function () {\n        watcher();\n      });\n    }\n\n    /** @ngInject */\n    function MalarkeyController($log, githubContributor) {\n      var vm = this;\n\n      vm.contributors = [];\n\n      activate();\n\n      function activate() {\n        return getContributors().then(function() {\n          $log.info('Activated Contributors View');\n        });\n      }\n\n      function getContributors() {\n        return githubContributor.getContributors(10).then(function(data) {\n          vm.contributors = data;\n\n          return vm.contributors;\n        });\n      }\n    }\n\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('festima')\n    .factory('githubContributor', githubContributor);\n\n  /** @ngInject */\n  function githubContributor($log, $http) {\n    var apiHost = 'https://api.github.com/repos/Swiip/generator-gulp-angular';\n\n    var service = {\n      apiHost: apiHost,\n      getContributors: getContributors\n    };\n\n    return service;\n\n    function getContributors(limit) {\n      if (!limit) {\n        limit = 30;\n      }\n\n      return $http.get(apiHost + '/contributors?per_page=' + limit)\n        .then(getContributorsComplete)\n        .catch(getContributorsFailed);\n\n      function getContributorsComplete(response) {\n        return response.data;\n      }\n\n      function getContributorsFailed(error) {\n        $log.error('XHR Failed for getContributors.\\n' + angular.toJson(error.data, true));\n      }\n    }\n  }\n})();\n\n(function(app) {\n  'use strict';\n\n  app.component('esDictionaryAutocomplete', {\n    templateUrl: 'app/components/dictionaryAutocomplete/dictionary-autocomplete.html',\n    bindings: {\n      key: '@',\n      selected: '='\n    },\n    controller: DictionaryAutocompleteController,\n    controllerAs: 'vm'\n  });\n\n  /** @ngInject */\n  function DictionaryAutocompleteLink(scope, element, attrs, controller) {\n    controller.key = attrs[this.name];\n  }\n\n  /** @ngInject */\n  function DictionaryAutocompleteController($sce, dictionaries) {\n    var vm = this;\n\n    vm.items = [];\n\n    vm.trustAsHtml = function(value) {\n      return $sce.trustAsHtml(value);\n    };\n\n    vm.refreshItems = function(q) {\n      dictionaries.itemsByKey(vm.key, undefined, undefined, q).then(function(items) {\n        vm.items = items;\n      });\n    };\n\n    vm.refreshItems();\n  }\n\n} (angular.module('festima')));\n\n(function(app) {\n\n  app.component('esDictionary', {\n    templateUrl: 'app/components/dictionary/dictionary.html',\n    bindings: {\n      // dictionary: '<',\n      key: '<'\n    },\n    controllerAs: 'dictionaryVm',\n    controller: DictionaryComponentController\n  });\n\n  function DictionaryComponentController($q, dictionaries) {\n    var vm = this;\n\n    vm.items = [];\n    vm.newItem = {};\n    vm.currentPage = 1;\n    vm.itemsPerPage = 3;\n\n    vm.add = function(item) {\n      dictionaries.addItem(vm.key, item).then(function(item) {\n        vm.newItem = {};\n        vm.pageChanged();  // update items\n      });\n    };\n\n    vm.pageChanged = function() {\n      var items = dictionaries.itemsByKey(vm.key, (vm.currentPage - 1) * vm.itemsPerPage, vm.itemsPerPage);\n      var count = dictionaries.countItemsByKey(vm.key);\n\n      $q.all({items: items, count: count}).then(function(result) {\n        vm.items = result.items;\n        vm.totalItems = result.count;\n      });\n    };\n\n    vm.pageChanged();\n  }\n\n} (angular.module('festima')));\n\nangular.module('festima')\n  .controller('DealerPositionsController', function() {\n    var vm = this;\n\n    angular.extend(vm, {\n\n      addNewPosition: function() {\n        var newPosition = angular.copy(vm.newPosition);\n        angular.extend(newPosition, vm.inputPosition);\n        vm.inputPosition = {};\n        vm.onAddPosition({dealerId: newPosition.dealerId, position: newPosition});\n      },\n\n      removePosition: function(position) {\n        vm.onDeletePosition({dealerId: position.dealer.id, position: position});\n      },\n\n      activePosition: function(item) {\n          return item.removed === undefined;\n      }\n\n    });\n  }\n);\n\nangular.module('festima').component('esDealerPositions', {\n  templateUrl: 'app/components/dealerPositions/dealer-positions.html',\n  bindings: {\n    positions: '<',\n    newPosition: '<',\n    onAddPosition: '&',\n    onDeletePosition: '&'\n  },\n  controller: 'DealerPositionsController',\n  controllerAs: 'positionsVm',\n  transclude: true\n});\n\n(function(app){\r\n  'use strict';\r\n\r\n  app.component('esBuildingsNearby', {\r\n    templateUrl: 'app/components/buildingsNearby/buildings-nearby.html',\r\n    bindings: {\r\n      address: '<'\r\n    },\r\n    controllerAs: 'vm',\r\n    controller: BuildingsNearbyController\r\n  });\r\n\r\n  function BuildingsNearbyController(maps, addresses) {\r\n    var vm = this;\r\n\r\n    var findNearbyBuildings = function(address) {\r\n      var latLng;\r\n\r\n      if (address) {\r\n        latLng = maps.centroidToLatlng(address.geometry.centroid);\r\n        addresses.listWithinRadius(latLng, 1000).then(\r\n          function(buildings) {\r\n            vm.buildings = buildings;\r\n          }\r\n        );\r\n      }\r\n    };\r\n\r\n    Object.defineProperty(vm, 'address', {\r\n      get: function() {\r\n        return vm._address;\r\n      },\r\n      set: function(newVal) {\r\n        vm._address = newVal;\r\n        findNearbyBuildings(newVal);\r\n      }\r\n    });\r\n  }\r\n\r\n}(angular.module('festima')));\r\n\nangular.module('festima')\n  .controller('BuildingFormController', function() {\n    var vm = this;\n  }\n);\n\nangular.module('festima').component('esBuildingForm', {\n  templateUrl: 'app/components/buildingForm/building-form.html',\n  bindings: {\n    building: '<'\n  },\n  controller: 'BuildingFormController',\n  controllerAs: 'buildingFormVm',\n  transclude: true\n});\n\n'use strict';\r\n\r\nangular.module('festima')\r\n  .service('buildingDealersService1', function (dealers, positions) {\r\n      var buildingDealersMap = {};  // map dealer name and positions to their ids\r\n      var dealersMap = {};          // map dealers to their ids\r\n      var buildingPositions;\r\n      var dealerList;\r\n      var _dealers;\r\n\r\n      angular.extend(this, {\r\n        buildingDealersMap: buildingDealersMap,\r\n\r\n        loadPositions: function (buildingId) {\r\n          positions.list1(buildingId).then(function (response) {\r\n            buildingPositions = response.data;\r\n\r\n            var dealerId;\r\n            for (var i = 0; i < buildingPositions.length; i++) {\r\n              dealerId = buildingPositions[i].dealerId;\r\n\r\n              if (buildingDealersMap[dealerId] === undefined) {\r\n                buildingDealersMap[dealerId] = {name: dealersMap[dealerId].name, positions: []};\r\n              }\r\n\r\n              buildingDealersMap[dealerId].positions.push(buildingPositions[i]);\r\n            }\r\n          }, function (response) {\r\n            console.log(\"couldn't load positions\");\r\n          });\r\n        },\r\n\r\n        savePositions: function () {\r\n          var dealerMap;\r\n          var position;\r\n          // save changes in dealers positions\r\n          for (var dealerId in buildingDealersMap) {\r\n            dealerMap = buildingDealersMap[dealerId];\r\n\r\n            for (var i = 0; i < dealerMap.positions.length; i++) {\r\n              position = dealerMap.positions[i];\r\n\r\n              if (position.buildingId === undefined) {\r\n                position.buildingId = position.building.id;\r\n                delete position['building'];\r\n              }\r\n\r\n              if (position.id === undefined) {\r\n                positions.create1(position).then(function (resp) {\r\n                  position.id = resp.data.id;\r\n                  console.log('Saved position ' + position.id);\r\n                });\r\n              }\r\n\r\n              if (position.removed === true) {\r\n                positions.delete(position.id).then(function (resp) {\r\n                  var index = dealerMap.positions.map(function (e) {\r\n                    return e.id;\r\n                  }).indexOf(position.id);\r\n                  dealerMap.positions.splice(index, 1);\r\n                });\r\n              }\r\n            }\r\n          }\r\n        },\r\n\r\n        addDealerPosition: function (dealerId, position) {\r\n          buildingDealersMap[dealerId].positions.push(position);\r\n        },\r\n\r\n        removeDealerPosition: function (dealerId, position) {\r\n          var dealerMap = buildingDealersMap[dealerId];\r\n\r\n          if (position.id === undefined) {\r\n            var index = dealerMap.positions.indexOf(position);\r\n            if (index !== -1) {\r\n              dealerMap.positions.splice(index, 1);\r\n            }\r\n          } else {\r\n            position.removed = true;\r\n          }\r\n        },\r\n\r\n        dealers: _dealers,\r\n\r\n        loadDealers: function () {\r\n          dealers.list().then(function (resp) {\r\n            dealerList = resp.data;\r\n\r\n            var dealer;\r\n            // todo: If dealers not loaded yet?\r\n            for (var i = 0; i < dealerList.length; i++) {\r\n              dealer = dealerList[i];\r\n              if (dealersMap[dealer.id] === undefined) {\r\n                dealersMap[dealer.id] = dealer;\r\n              }\r\n            }\r\n          })\r\n        },\r\n\r\n        refreshDealers: function (q) {\r\n          dealers.list().then(function (resp) {\r\n            _dealers = resp.data;\r\n            // angular.copy(_dealers, resp.data);\r\n\r\n            var dealer;\r\n            for (var i = 0; i < _dealers.length; i++) {\r\n              dealer = _dealers[i];\r\n              if (dealersMap[dealer.id] === undefined) {\r\n                dealersMap[dealer.id] = dealer;\r\n              }\r\n            }\r\n          })\r\n        },\r\n        \r\n        addDealer: function(dealer) {\r\n          var index = Object.keys(buildingDealersMap).indexOf(dealer.id);\r\n\r\n          if (index === -1) {\r\n            buildingDealersMap[dealer.id] = {name: dealer.name, positions: []};\r\n          }\r\n        }\r\n      });\r\n    }\r\n  );\r\n\nangular.module('festima')\r\n  .controller('BuildingAddressController', function(maps) {\r\n    var vm = this;\r\n\r\n    var latLng;\r\n\r\n    if (angular.isDefined(vm.building)) {\r\n      vm.asyncSelected = vm.building.address;\r\n    }\r\n\r\n    DG.then(function() {\r\n\r\n      if (angular.isDefined(vm.building) && angular.isDefined(vm.building.location)) {\r\n        latLng = maps.centroidToLatlng(vm.building.location);\r\n      }\r\n\r\n      maps.initMap(latLng).then(function(map) {\r\n        vm.map = map;\r\n\r\n        vm.map.on('click', function (e) {\r\n          var latLng = [e.latlng.lat, e.latlng.lng];\r\n          console.log(latLng);\r\n\r\n          maps.searchCoords(latLng).then(function (location) {\r\n            vm.location = location;\r\n            vm.address = location.name;\r\n\r\n            if (typeof vm.marker !== 'undefined') {\r\n              vm.map.removeLayer(vm.marker);\r\n            }\r\n\r\n            vm.marker = maps.getMarker(latLng);\r\n            var text = location.name + '.<br />';\r\n\r\n            text += location.attributes.buildingname;\r\n            vm.marker.bindPopup(text);\r\n            vm.marker.addTo(vm.map);\r\n          });\r\n        });\r\n      });\r\n    });\r\n\r\n    vm.searchAddress = function(q) {\r\n      maps.searchAddress(q).then(function(latLng){\r\n\r\n        if (typeof vm.marker !== 'undefined') {\r\n          vm.map.removeLayer(vm.marker);\r\n        }\r\n\r\n        // создаем и добавляем маркер на карту\r\n        vm.marker = maps.getMarker(latLng);\r\n        vm.map.addLayer(vm.marker);\r\n\r\n        // центрируем карту в координаты маркера\r\n        vm.map.panTo(latLng);\r\n      });\r\n    };\r\n\r\n    vm.getLocation = function(q) {\r\n      return maps.suggestions(q).then(function(items){\r\n        return items.map(function(item){\r\n          return item;\r\n        });\r\n      });\r\n    };\r\n\r\n    vm.onSelect = function(itemData, model, label) {\r\n      maps.search(itemData.hint.text).then(function(items) {\r\n        var item = items[0];\r\n\r\n        if (typeof vm.marker !== 'undefined') {\r\n          vm.map.removeLayer(vm.marker);\r\n        }\r\n\r\n        var latLng = maps.centroidToLatlng(item.geometry.centroid);\r\n\r\n        // создаем и добавляем маркер на карту\r\n        vm.marker = maps.getMarker(latLng);\r\n        vm.map.addLayer(vm.marker);\r\n\r\n        // центрируем карту в координаты маркера\r\n        vm.map.panTo(latLng);\r\n\r\n        vm.asyncSelected = item.full_name;\r\n        vm.onAddressSelected({address: item});\r\n      });\r\n    };\r\n  }\r\n);\r\n\nangular.module('festima')\n  .component('esBuildingAddress', {\n    templateUrl: 'app/components/buildingAddress/building-address.html',\n    bindings: {\n      building: '<',\n      onAddressSelected: '&'\n    },\n    controllerAs: 'addressVm',\n    controller: 'BuildingAddressController'\n  }\n);\n\nangular.module('festima')\n  .controller('AddDealerButtonController', function(dealers){\n    var vm = this;\n\n    vm.addDealer = function() {\n      if ( !vm.onCheckAdded({dealer: vm.dealer})) {\n        vm.onAddDealer({dealer: vm.dealer});\n      }\n\n      vm.dealer = undefined;\n    };\n\n    vm.refreshDealers = function (q) {\n      dealers.findAllByQuery().then(function (dealers) {\n        vm.dealers = dealers;\n      })\n    };\n\n  }\n);\n\nangular.module('festima').component('esAddDealerButton', {\n  templateUrl: 'app/components/addDealerButton/add-dealer-button.html',\n  bindings: {\n    onAddDealer: '&',\n    onCheckAdded: '&'\n  },\n  controller: 'AddDealerButtonController',\n  controllerAs: 'addDealerVm'\n});\n\nangular.module('festima')\r\n  .factory('usersManager', ['$http', '$q', 'appConfig', 'User', function ($http, $q, appConfig, User) {\r\n    var cachedPromises = {};\r\n    var usersManager = {\r\n      _pool: {},\r\n      _retrieveInstance: function (id, data) {\r\n        var instance = this._pool[id];\r\n\r\n        if (instance) {\r\n          instance.setData(data);\r\n        } else {\r\n          instance = new User(data);\r\n          this._pool[id] = instance;\r\n        }\r\n\r\n        return instance;\r\n      },\r\n\r\n      _search: function (id) {\r\n        return this._pool[id];\r\n      },\r\n\r\n      getUser: function (id) {\r\n        if (angular.isUndefined(cachedPromises[id])) {\r\n          cachedPromises[id] = $http.get(appConfig.apiUrl + '/users/' + id).then(function(response) {\r\n              return response.data;\r\n            })\r\n        }\r\n\r\n        return cachedPromises[id];\r\n      },\r\n\r\n      loadAllUsers: function () {\r\n        var deferred = $q.defer();\r\n        var scope = this;\r\n        $http.get(appConfig.apiUrl + '/users')\r\n          .success(function (itemsArray) {\r\n            var items = [];\r\n            itemsArray.forEach(function (itemData) {\r\n              var item = scope._retrieveInstance(itemData.id, itemData);\r\n              items.push(item);\r\n            });\r\n\r\n            deferred.resolve(items);\r\n          })\r\n          .error(function () {\r\n            deferred.reject();\r\n          });\r\n        return deferred.promise;\r\n      },\r\n\r\n      setUser: function (data) {\r\n        var scope = this;\r\n        var item = this._search(data.id);\r\n        if (item) {\r\n          item.setData(data);\r\n        } else {\r\n          item = scope._retrieveInstance(data);\r\n        }\r\n        return item;\r\n      }\r\n    };\r\n\r\n    return usersManager;\r\n  }]);\r\n\nangular.module('festima')\r\n  .factory('User', ['$http', 'appConfig', function ($http, appConfig) {\r\n      function User(data) {\r\n        if (data) {\r\n          this.setData(data);\r\n        }\r\n        // some init\r\n      };\r\n\r\n      User.prototype = {\r\n        setData: function (data) {\r\n          angular.extend(this, data);\r\n        },\r\n        save: function () {\r\n          return $http.post(appConfig.apiUrl + '/users', this);\r\n        },\r\n        delete: function () {\r\n          $http.delete(appConfig.apiUrl + '/users/' + this.id);\r\n        },\r\n        update: function () {\r\n          $http.put(appConfig.apiUrl + '/users/' + this.id, this);\r\n        },\r\n      };\r\n      return User;\r\n    }]\r\n  );\r\n\nangular.module('festima')\r\n  .factory('messagesManager', ['$http', '$q', 'Message', 'usersManager', 'appConfig', function ($http, $q, Message, usersManager, appConfig) {\r\n    var messagesManager = {\r\n      _pool: {},\r\n      _retrieveInstance: function (id, data) {\r\n        var instance = this._pool[id];\r\n\r\n        if (instance) {\r\n          instance.setData(data);\r\n        } else {\r\n          instance = new Message(data);\r\n          this._pool[id] = instance;\r\n        }\r\n\r\n        return instance;\r\n      },\r\n      _search: function (id) {\r\n        return this._pool[id];\r\n      },\r\n      _load: function (id, deferred) {\r\n        var scope = this;\r\n\r\n        $http.get(appConfig.apiUrl + '/messages/' + id)\r\n          .success(function (data) {\r\n            var itemData = data;\r\n            var item;\r\n\r\n            usersManager.getUser(itemData.author.id).then(function(data) {\r\n              // delete itemData.authorId;\r\n              itemData.author = data;\r\n              item = scope._retrieveInstance(itemData.id, itemData);\r\n              deferred.resolve(item);\r\n            });\r\n          })\r\n          .error(function () {\r\n            deferred.reject();\r\n          });\r\n      },\r\n\r\n      getMessage: function (id) {\r\n        var deferred = $q.defer();\r\n        var item = this._search(id);\r\n        if (item) {\r\n          deferred.resolve(item);\r\n        } else {\r\n          this._load(id, deferred);\r\n        }\r\n        return deferred.promise;\r\n      },\r\n\r\n      loadAllMessages: function (positionId) {\r\n        var deferred = $q.defer();\r\n        var scope = this;\r\n        $http.get(appConfig.apiUrl + '/messages', {params: {positionId: positionId}})\r\n          .success(function (itemsArray) {\r\n            var items = [];\r\n            var item;\r\n\r\n            if (itemsArray.length == 0) {\r\n              deferred.resolve([]);\r\n              return;\r\n            }\r\n\r\n            itemsArray.forEach(function (itemData) {\r\n              usersManager.getUser(itemData.author.id).then(function(data) {\r\n                // delete itemData.authorId;\r\n                itemData.author = data;\r\n                item = scope._retrieveInstance(itemData.id, itemData);\r\n                items.push(item);\r\n              }).then(function() {\r\n                deferred.resolve(items);\r\n              });\r\n            });\r\n          })\r\n          .error(function () {\r\n            deferred.reject();\r\n          });\r\n        return deferred.promise;\r\n      },\r\n\r\n      setMessage: function (data) {\r\n        var scope = this;\r\n        var item = this._search(data.id);\r\n        if (item) {\r\n          item.setData(data);\r\n        } else {\r\n          item = scope._retrieveInstance(data);\r\n        }\r\n        return item;\r\n      }\r\n    };\r\n\r\n    return messagesManager;\r\n  }]);\r\n\nangular.module('festima')\r\n  .service('messages', function($http) {\r\n    angular.extend(this, {\r\n      // list: function(positionId) {\r\n        // return $http.get('http://localhost:3000/api/messages', {params: {positionId: positionId}});\r\n      // }\r\n    });\r\n  }\r\n);\r\n\nangular.module('festima')\r\n  .factory('Message', ['$http', '$q', 'appConfig', function ($http, $q, appConfig) {\r\n      function Message(data) {\r\n        if (data) {\r\n          this.setData(data);\r\n        }\r\n        // some init\r\n      };\r\n\r\n      Message.prototype = {\r\n        setData: function (data) {\r\n          angular.extend(this, data);\r\n        },\r\n        save: function () {\r\n          var deferred = $q.defer();\r\n          var self = this;\r\n\r\n          if (this.id === undefined) {\r\n            $http.post(appConfig.apiUrl + '/messages', this).then(\r\n              function(response) {\r\n                angular.extend(self, response.data);\r\n                deferred.resolve(self.id)\r\n              },\r\n              function(response) {\r\n                deferred.reject();\r\n              }\r\n            );\r\n          } else {\r\n            this.update();\r\n            deferred.resolve(this.id);\r\n          }\r\n\r\n          return deferred.promise;\r\n        },\r\n        delete: function () {\r\n          $http.delete(appConfig.apiUrl + '/messages/' + this.id);\r\n        },\r\n        update: function () {\r\n          $http.put(appConfig.apiUrl + '/messages/' + this.id, this);\r\n        },\r\n      };\r\n      return Message;\r\n    }]\r\n  );\r\n\n'use strict';\r\n\r\n(function() {\r\n  angular.module('festima')\r\n    .service('maps', function($q) {\r\n      var dgis;\r\n\r\n      angular.extend(this, {\r\n        dgis: dgis,\r\n\r\n        initMap: function (latLng) {\r\n          var deferred = $q.defer();\r\n          \r\n          if (angular.isUndefined(latLng)) {\r\n            latLng = [54.981, 82.891];\r\n          }\r\n\r\n          DG.then(function () {\r\n            dgis = DG;\r\n            var map = dgis.map('map', {\r\n              center: latLng,\r\n              zoom: 16,\r\n              geoclicker: true,\r\n              showPhotos: false,\r\n              showBooklet: false\r\n            });\r\n\r\n            dgis.marker(latLng).addTo(map).bindPopup('Clicked!');\r\n\r\n            deferred.resolve(map);\r\n          }, function() {\r\n            deferred.reject();\r\n          });\r\n\r\n          return deferred.promise;\r\n        },\r\n\r\n        suggestions: function(q) {\r\n          var deferred = $q.defer();\r\n\r\n          dgis.ajax({\r\n            url: 'http://catalog.api.2gis.ru/2.0/suggest/list',\r\n            data: {\r\n              key: 'ruczoy1743',\r\n              output: 'json',\r\n              region_id: 32,\r\n              q: q\r\n            },\r\n            type: 'GET',\r\n            success: function(data) {\r\n              deferred.resolve(data.result.items);\r\n            },\r\n            error: function(error) {\r\n              console.log(error);\r\n              deferred.reject();\r\n            }\r\n          });\r\n\r\n          return deferred.promise;\r\n        },\r\n\r\n        getById: function(id) {\r\n          var deferred = $q.defer();\r\n\r\n          dgis.ajax({\r\n            url: 'http://catalog.api.2gis.ru/2.0/geo/get',\r\n            data: {\r\n              key: 'ruczoy1743',\r\n              id: id,\r\n              fields: 'items.geometry.centroid'\r\n            },\r\n            type: 'GET',\r\n            success: function(data) {\r\n              deferred.resolve(data.result.items[0]);\r\n            },\r\n            error: function(error) {\r\n              console.log(error);\r\n              deferred.reject();\r\n            }\r\n          });\r\n\r\n          return deferred.promise;\r\n        },\r\n\r\n        searchAddress: function (q) {\r\n          var point, lng, lat;\r\n          var deferred = $q.defer();\r\n\r\n          dgis.ajax({\r\n            url: 'http://catalog.api.2gis.ru/geo/search',\r\n            data: {\r\n              key: 'ruczoy1743',\r\n              version: 1.3,\r\n              q: q\r\n            },\r\n            type: 'GET',\r\n            success: function (data) {\r\n              // считываем строку в WKT-формате и возвращаем объект Point\r\n              point = dgis.Wkt.toPoints(data.result[0].centroid);\r\n\r\n              // извлекаем координаты для маркера\r\n              lng = point[0];\r\n              lat = point[1];\r\n\r\n              deferred.resolve([lat, lng]);\r\n            },\r\n            error: function (error) {\r\n              console.log(error);\r\n              deferred.reject();\r\n            }\r\n          });\r\n\r\n          return deferred.promise;\r\n        },\r\n\r\n        searchCoords: function (latLng) {\r\n          var deferred = $q.defer();\r\n\r\n          dgis.ajax({\r\n            url: 'http://catalog.api.2gis.ru/geo/search',\r\n            data: {\r\n              key: 'ruczoy1743',\r\n              version: 1.3,\r\n              q: latLng[1] + ',' + latLng[0]\r\n            },\r\n            success: function (data) {\r\n\r\n              deferred.resolve(data.result[0]);\r\n            },\r\n            error: function (error) {\r\n              console.log(error);\r\n              deferred.reject();\r\n            }\r\n          });\r\n\r\n          return deferred.promise;\r\n        },\r\n\r\n        getMarker: function(latLng) {\r\n          return dgis.marker(latLng);\r\n        },\r\n\r\n        centroidToLatlng: function(wkt) {\r\n          var point = DG.Wkt.toPoints(wkt);\r\n\r\n          return [point[1], point[0]];\r\n        },\r\n\r\n        search: function(q) {\r\n          var deferred = $q.defer();\r\n\r\n          dgis.ajax({\r\n            url: 'http://catalog.api.2gis.ru/2.0/geo/search',\r\n\r\n            data: {\r\n              key: 'ruewin2963',\r\n              q: q,\r\n              region_id: 32,\r\n              fields: 'hash,search_attributes,items.address,items.adm_div,items.geometry.centroid,items.geometry.selection,items.geometry.style,items.floors,items.group'\r\n            },\r\n            success: function (data) {\r\n\r\n              deferred.resolve(data.result.items);\r\n            },\r\n            error: function (error) {\r\n              console.log(error);\r\n              deferred.reject();\r\n            }\r\n          });\r\n\r\n          return deferred.promise;\r\n        }\r\n      });\r\n    }\r\n  );\r\n})();\r\n\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('festima')\r\n    .controller('MainController', MainController);\r\n\r\n  /** @ngInject */\r\n  function MainController($timeout, webDevTec, toastr) {\r\n    var vm = this;\r\n\r\n    vm.awesomeThings = [];\r\n    vm.classAnimation = '';\r\n    vm.creationDate = 1457814815376;\r\n    vm.showToastr = showToastr;\r\n\r\n    activate();\r\n\r\n    function activate() {\r\n      getWebDevTec();\r\n      $timeout(function() {\r\n        vm.classAnimation = 'rubberBand';\r\n      }, 4000);\r\n    }\r\n\r\n    function showToastr() {\r\n      toastr.info('Уведомление...');\r\n      vm.classAnimation = '';\r\n    }\r\n\r\n    function getWebDevTec() {\r\n      vm.awesomeThings = webDevTec.getTec();\r\n\r\n      angular.forEach(vm.awesomeThings, function(awesomeThing) {\r\n        awesomeThing.rank = Math.random();\r\n      });\r\n    }\r\n  }\r\n})();\r\n\n'use strict';\n\n/**\n * @ngdoc function\n * @name festimaApp.controller:AboutController\n * @description\n * # AboutController\n * Controller of the festimaApp\n */\nangular.module('festima')\n  .controller('AboutController', function () {\n\n  });\n\n(function(app) {\r\n  'use strict';\r\n\r\n  app.service('session', function($http, $log, $q, $state, $rootScope, $timeout, $cookies, appConfig, OAuth, OAuthToken) {\r\n    var currentUserPromise;\r\n    var userEmail;\r\n    var userId;\r\n\r\n    function fetchUser(email) {\r\n      return $http.get(appConfig.apiUrl + '/users', {params: {email: email}}).then(function(response) {\r\n        var user = response.data[0];\r\n\r\n        userId = user.id;\r\n        return user;\r\n      });\r\n    }\r\n\r\n    // $rootScope.$on('$stateChangeError', function () {\r\n    //   $state.go('public.login');\r\n    // });\r\n\r\n    angular.extend(this, {\r\n      login: function(credentials) {\r\n        var options = {};\r\n\r\n        angular.extend(credentials, {scope: 'read'});\r\n\r\n        return OAuth.getAccessToken(credentials, options).then(function(response) {\r\n          userEmail = credentials.username;\r\n          currentUserPromise = fetchUser(userEmail);\r\n\r\n        }).catch(function(e) {\r\n          $log.error('Auth error: ', e);\r\n        });\r\n      },\r\n\r\n      logout: function() {\r\n        // OAuth.revokeToken();\r\n        $cookies.remove('token');\r\n        return $timeout(function () {\r\n          $state.go('public.login');\r\n        });\r\n      },\r\n\r\n      userId: function() {\r\n        return userId;\r\n      },\r\n\r\n      profile: function() {\r\n        if (!currentUserPromise) {\r\n          currentUserPromise = fetchUser(userEmail);\r\n        }\r\n        return currentUserPromise;\r\n      },\r\n\r\n      isAuthenticated: function() {\r\n        return OAuth.isAuthenticated();\r\n      },\r\n\r\n      checkLoggedIn: function() {\r\n        var deferred = $q.defer();\r\n\r\n        if (this.isAuthenticated()) {\r\n          deferred.resolve();\r\n        } else {\r\n          $timeout(function () {\r\n            $state.go('public.login');\r\n          });\r\n          deferred.reject();\r\n        }\r\n\r\n        return deferred.promise;\r\n      },\r\n\r\n      skipLoggedIn: function() {\r\n        var deferred = $q.defer();\r\n\r\n        if (this.isAuthenticated()) {\r\n          deferred.reject();\r\n        } else {\r\n          deferred.resolve();\r\n        }\r\n\r\n        return deferred.promise;\r\n      }\r\n    });\r\n  });\r\n\r\n} (angular.module('festima')));\r\n\n(function(app) {\r\n  'use strict';\r\n\r\n  app.controller('LoginController', function($http, $state, appConfig, OAuth, OAuthToken, spinnerService, session) {\r\n    var vm = this;\r\n\r\n    vm.login = function() {\r\n      var credentials = {username: vm.email, password: vm.password};\r\n\r\n      // spinnerService.show(\"authSpinner\");\r\n\r\n      session.login(credentials).then(function() {\r\n        $state.go('private.main');\r\n      }).finally(function() {\r\n        // spinnerService.hide('authSpinner');\r\n      });\r\n    };\r\n\r\n    vm.logout = function() {\r\n      session.logout();\r\n    };\r\n  });\r\n\r\n\r\n} (angular.module('festima')));\r\n\n(function(app) {\n  'use strict';\n\n  app.controller('DictionaryShowController', function($stateParams, dictionaries) {\n    var vm = this;\n\n    console.log(\"State params: \", $stateParams.key);\n    vm.key = $stateParams.key;\n    dictionaries.loadByKey($stateParams.key).then(function(dictionary) {\n      vm.dictionary = dictionary;\n    });\n  });\n\n} (angular.module('festima')));\n\n(function(app) {\n  'use strict';\n\n  app.service('dictionaries', function($q, $http, appConfig) {\n\n    angular.extend(this, {\n      listAll: function() {\n        return $http.get(appConfig.apiUrl + '/dictionaries').then(function(response) {\n          return response.data;\n        });\n      },\n\n      loadByKey: function(key) {\n        return $http.get(appConfig.apiUrl + '/dictionaries/' + key).then(function(response) {\n          return response.data;\n        });\n      },\n\n      itemsByKey: function(key, offset, max, q) {\n        return $http.get(appConfig.apiUrl + '/dictionaries/' + key + '/items', {params: {offset: offset, max: max, q: q}}).then(function(response) {\n          return response.data;\n        });\n      },\n\n      countItemsByKey: function(key) {\n        return $http.get(appConfig.apiUrl + '/dictionaries/' + key + '/count').then(function(response) {\n          return response.data;\n        });\n      },\n\n      addItem: function(key, item) {\n        return $http.post(appConfig.apiUrl + '/dictionaries/' + key + '/items', {data: item}).then(function(response) {\n          return response.data;\n        });\n      },\n\n      loadItem: function(id) {\n        return $http.get(appConfig.apiUrl + '/dictionaries/items/' + id).then(function(response) {\n          return response.data;\n        });\n      }\n    });\n  });\n\n} (angular.module('festima')));\n\n(function(app) {\n  'use strict';\n\n  app.controller('DictionaryListController', function(dictionaries) {\n    var vm = this;\n\n    dictionaries.listAll().then(function(dictionaries) {\n      vm.dictionaries = dictionaries;\n    });\n  });\n\n} (angular.module('festima')));\n\n'use strict';\n\nangular.module('festima')\n  .service('positions', function($http, appConfig) {\n    angular.extend(this, {\n      listAllByBuilding: function(buildingId) {\n        return $http.get(appConfig.apiUrl + '/positions', {params: {buildingId: buildingId}});\n      },\n      createPosition: function(positionData) {\n        return $http.post(appConfig.apiUrl + '/positions', positionData).then(function(resp) { return resp.data; });\n      },\n      delete: function(positionId) {\n        return $http.delete(appConfig.apiUrl + '/positions/' + positionId);\n      }\n    });\n  }\n);\n\n'use strict';\n\nangular.module('festima')\n  .service('dealers', function($http, appConfig) {\n    angular.extend(this, {\n      \n      findAllByQuery: function(q) {\n        return $http.get(appConfig.apiUrl + '/dealers', {params: {q: q}}).then(function(resp) { return resp.data; });\n      },\n      \n      listAll: function() {\n        return $http.get(appConfig.apiUrl + '/dealers').then(function(response) { return response.data; });\n      },\n      \n      mapAll: function() {\n        return this.listAll().then(function(dealerList) {\n          var dealersMap = {};\n          var dealer;\n          \n          for (var i = 0; i < dealerList.length; i++) {\n            dealer = dealerList[i];\n            if (angular.isUndefined(dealersMap[dealer.id])) {\n              dealersMap[dealer.id] = dealer;\n            }\n          }          \n          \n          return dealersMap;\n        });\n      },\n\n      listByIds: function(ids) {\n        var params = '?';\n\n        for(var i=0; i<ids.length; i++) {\n          params += '&id=' + ids[i];\n        }\n\n        return $http.get(appConfig.apiUrl + '/dealers' + params);\n      }\n    });\n});\n\nangular.module('festima')\n  .factory('buildingsManager', ['$http', '$q', 'appConfig', 'Building', 'usersManager', 'dictionaries', function($http, $q, appConfig, Building, usersManager, dictionaries) {\n  var buildingsManager = {\n    _pool: {},\n    _retrieveInstance: function(id, data) {\n      var instance = this._pool[id];\n\n      if (instance) {\n        instance.setData(data);\n      } else {\n        instance = new Building(data);\n        this._pool[id] = instance;\n      }\n\n      return instance;\n    },\n    _search: function(id) {\n      return this._pool[id];\n    },\n    _load: function(id, deferred) {\n      var scope = this;\n\n      $http.get(appConfig.apiUrl + '/buildings/' + id)\n        .success(function(data) {\n          var itemData = data;\n          var item = scope._retrieveInstance(itemData.id, itemData);\n\n          deferred.resolve(item);\n        })\n        .error(function() {\n          deferred.reject();\n        });\n    },\n\n    getBuilding: function(id) {\n      var deferred = $q.defer();\n      var item = this._search(id);\n      if (item) {\n        deferred.resolve(item);\n      } else {\n        if (id === undefined) {\n          deferred.resolve(this._retrieveInstance(null));\n        } else {\n          this._load(id, deferred);\n        }\n      }\n      return deferred.promise;\n    },\n\n    loadAllBuildings: function() {\n      var deferred = $q.defer();\n      var scope = this;\n      $http.get(appConfig.apiUrl + '/buildings')\n        .success(function(itemsArray) {\n          var items = [];\n          var item;\n\n            if (itemsArray.length == 0) {\n              deferred.resolve([]);\n              return;\n            }\n\n            itemsArray.forEach(function (itemData) {\n              item = scope._retrieveInstance(itemData.id, itemData);\n              items.push(item);\n              deferred.resolve(items);\n            });\n        })\n        .error(function() {\n          deferred.reject();\n        });\n      return deferred.promise;\n    },\n\n    setBuilding: function(data) {\n      var scope = this;\n      var item = this._search(data.id);\n      if (item) {\n        item.setData(data);\n      } else {\n        item = scope._retrieveInstance(data);\n      }\n      return item;\n    }\n  };\n\n  return buildingsManager;\n}]);\n\nangular.module('festima')\r\n  .factory('buildingDealersManager', ['$http', '$q', 'BuildingDealer', 'dealers', function ($http, $q, BuildingDealer, dealers) {\r\n\r\n    var buildingDealersManager = {\r\n      _pool: {},\r\n      _retrieveInstance: function (id, data) {\r\n        var instance = this._pool[id];\r\n\r\n        if (instance) {\r\n          instance.setData(data);\r\n        } else {\r\n          instance = new BuildingDealer(data);\r\n          if (id) {\r\n            this._pool[id] = instance;\r\n          } else {\r\n            var unsavedId = Math.min(-1, Math.min(Object.keys(this._pool)));\r\n            instance.id = unsavedId;\r\n            this._pool[unsavedId] = instance;\r\n          }\r\n\r\n        }\r\n\r\n        return instance;\r\n      },\r\n      _unsaved: function() {\r\n        var unsaved = [];\r\n        var scope = this;\r\n\r\n        Object.keys(this._pool).forEach(function(id) {\r\n          if (Number(id) < 0) {\r\n            unsaved.push(scope._pool[id]);\r\n          }\r\n        });\r\n\r\n        return unsaved;\r\n      },\r\n      _search: function (id) {\r\n        return this._pool[id];\r\n      },\r\n      _load: function (id, deferred) {\r\n        var scope = this;\r\n\r\n        $http.get('http://localhost:3000/api/buildingDealers/' + id)\r\n          .success(function (data) {\r\n            var item = scope._retrieveInstance(data.id, data);\r\n\r\n            $http.get('http://localhost:3000/api/dealers/' + data.dealerId).then(\r\n              function (response) {\r\n                item.dealer = response.data;\r\n              }\r\n            );\r\n\r\n            deferred.resolve(item);\r\n          })\r\n          .error(function () {\r\n            deferred.reject();\r\n          });\r\n      },\r\n\r\n      getBuildingDealer: function (id) {\r\n        var deferred = $q.defer();\r\n        var item = this._search(id);\r\n        if (item) {\r\n          deferred.resolve(item);\r\n        } else {\r\n          this._load(id, deferred);\r\n        }\r\n        return deferred.promise;\r\n      },\r\n      loadAllBuildingDealers: function (id) {\r\n        var deferred = $q.defer();\r\n        var scope = this;\r\n        $http.get('http://localhost:3000/api/buildingDealers', {params: {buildingId: id}})\r\n          .success(function (itemsArray) {\r\n            var items = [];\r\n            var map = {};\r\n            itemsArray.forEach(function (itemData) {\r\n              var item = scope._retrieveInstance(itemData.id, itemData);\r\n              items.push(item);\r\n              map[item.dealerId] = item;\r\n            });\r\n\r\n            return dealers.listByIds(Object.keys(map)).then(\r\n              function (response) {\r\n                var list = response.data;\r\n\r\n                list.forEach(function (item) {\r\n                  map[item.id].dealer = item;\r\n                });\r\n\r\n                deferred.resolve(items);\r\n              }\r\n            )\r\n          })\r\n          .error(function () {\r\n            deferred.reject();\r\n          });\r\n        return deferred.promise;\r\n      },\r\n      setBuildingDealer: function (data) {\r\n        var scope = this;\r\n        var item = this._search(data.id);\r\n        if (item) {\r\n          item.setData(data);\r\n        } else {\r\n          item = scope._retrieveInstance(null, data);\r\n        }\r\n        return item;\r\n      }\r\n    };\r\n\r\n    return buildingDealersManager;\r\n  }]);\r\n\n'use strict';\n\nangular.module('festima')\n  .service('buildingDealersService', function (dealers, positions) {\n\n      angular.extend(this, {\n\n        getDealersPositionsMap: function(buildingId) {\n          return positions.listAllByBuilding(buildingId).then(function(response) {\n            var dealerPositionsMap = {};\n            var buildingPositions = response.data;\n\n            return dealers.mapAll().then(function(mapOfDealers) {\n\n              var dealerId;\n              for (var i = 0; i < buildingPositions.length; i++) {\n                dealerId = buildingPositions[i].dealer.id;\n\n                if (angular.isUndefined(dealerPositionsMap[dealerId])) {\n                  dealerPositionsMap[dealerId] = {name: mapOfDealers[dealerId].name, positions: []};\n                }\n\n                dealerPositionsMap[dealerId].positions.push(buildingPositions[i]);\n              }\n\n              return dealerPositionsMap;\n            });\n          })\n        },\n\n        saveDealerPositions: function(dealerId, positionsList) {\n          var position;\n\n          for (var i = 0; i < positionsList.length; i++) {\n            position = positionsList[i];\n\n            if (position.removed === true) {\n              positions.delete(position.id).then(function () {\n                var index = positionsList.map(function (e) {\n                  return e.id;\n                }).indexOf(position.id);\n                positionsList.splice(index, 1);\n              });\n            }\n\n            if (angular.isUndefined(position.buildingId)) {\n              position.buildingId = position.building.id;\n              delete position['building'];\n            }\n\n            if (angular.isUndefined(position.id)) {\n              positions.createPosition(position).then(function (savedPosition) {\n                position.id = savedPosition.id;\n                console.log('Saved position ' + position.id);\n              });\n            }\n\n          }\n\n          // return changedPositions;\n        },\n\n      });\n    }\n  );\n\nangular.module('festima').factory('BuildingDealer', ['$http', function($http) {\r\n  function BuildingDealer(data) {\r\n    if (data) {\r\n      this.setData(data);\r\n    }\r\n    // Some other initializations related to book\r\n  };\r\n  BuildingDealer.prototype = {\r\n    setData: function(data) {\r\n      angular.extend(this, data);\r\n    },\r\n    save: function() {\r\n      if (this.id === undefined) {\r\n        $http.post('http://localhost:3000/api/buildingDealers', this);\r\n        $http.get('http://localhost:3000/api/buildingDealers').then(\r\n          function(response) {\r\n            angular.extend(this, response.data);\r\n          }\r\n        )\r\n      } else {\r\n        this.update();\r\n      }\r\n    },\r\n    delete: function() {\r\n      $http.delete('http://localhost:3000/api/buildingDealers/' + id);\r\n    },\r\n    update: function() {\r\n      $http.put('http://localhost:3000/api/buildingDealers/' + id, this);\r\n    },\r\n    // getImageUrl: function(width, height) {\r\n    //   return 'our/image/service/' + this.book.id + '/width/height';\r\n    // },\r\n    // isAvailable: function() {\r\n    //   if (!this.book.stores || this.book.stores.length === 0) {\r\n    //     return false;\r\n    //   }\r\n    //   return this.book.stores.some(function(store) {\r\n    //     return store.quantity > 0;\r\n    //   });\r\n    // }\r\n  };\r\n  return BuildingDealer;\r\n}]);\r\n\n'use strict';\r\n\r\nangular.module('festima')\r\n  .controller('BuildingShowController', function ($stateParams, buildingsManager, maps) {\r\n    var id = $stateParams.buildingId;\r\n    var vm = this;\r\n\r\n    buildingsManager.getBuilding(id).then(function(building) {\r\n        vm.building = building;\r\n\r\n        DG.then(function () {\r\n          var map, point, lat, lng, marker;\r\n\r\n          var latLng = maps.centroidToLatlng(vm.building.location);\r\n          lat = latLng[0];\r\n          lng = latLng[1];\r\n\r\n          map = DG.map('map', {\r\n            center: latLng,\r\n            zoom: 16\r\n          });\r\n\r\n          DG.marker(latLng).addTo(map).bindPopup('Вы кликнули по мне!');\r\n\r\n\r\n\r\n          // DG.ajax({\r\n          //   url: 'http://catalog.api.2gis.ru/geo/search',\r\n          //   data: {\r\n          //     key: 'ruczoy1743',\r\n          //     version: 1.3,\r\n          //     q: 'Москва, Красная площадь, 2'\r\n          //   },\r\n          //   type: 'GET',\r\n          //   success: function(data) {\r\n          //     if (typeof marker !== 'undefined') {\r\n          //       map.removeLayer(marker);\r\n          //     }\r\n          //\r\n          //     // считываем строку в WKT-формате и возвращаем объект Point\r\n          //     point = DG.Wkt.toPoints(data.result[0].centroid);\r\n          //\r\n          //     // извлекаем координаты для маркера\r\n          //     lng = point[0];\r\n          //     lat = point[1];\r\n          //\r\n          //     // создаем и добавляем маркер на карту\r\n          //     marker = DG.marker([lat, lng]);\r\n          //     map.addLayer(marker);\r\n          //\r\n          //     // центрируем карту в координаты маркера\r\n          //     map.panTo([lat, lng]);\r\n          //   },\r\n          //   error: function(error) {\r\n          //     console.log(error);\r\n          //   }\r\n          // });\r\n        });\r\n      }\r\n    );\r\n  }\r\n);\r\n\nangular.module('festima').factory('Building', ['$http', 'appConfig', function($http, appConfig) {\n  \n  function Building(data) {\n    if (data) {\n      this.setData(data);\n    }\n    // some init\n  };\n  Building.prototype = {\n    setData: function(data) {\n      angular.extend(this, data);\n    },\n    save: function() {\n      return $http.post(appConfig.apiUrl + '/buildings', this).then(function(resp) {\n        return resp.data;\n      });\n    },\n    delete: function() {\n      $http.delete(appConfig.apiUrl + '/buildings/' + this.id);\n    },\n    update: function() {\n      $http.put(appConfig.apiUrl + '/buildings/' + this.id, this);\n    },\n  };\n  return Building;\n}]);\n\n'use strict';\n\n/**\n * @ngdoc function\n * @name festimaApp.controller:MainCtrl\n * @description\n * # MainCtrl\n * Controller of the festimaApp\n */\nangular.module('festima')\n  .controller('BuildingListController', function ($scope, buildingsManager) {\n    var vm = this;\n    angular.extend(vm, {\n      buildings: []\n    });\n\n    buildingsManager.loadAllBuildings().then(\n      function(buildings) {\n        vm.buildings = buildings;\n      }\n    )\n  });\n\n'use strict';\r\n\r\nangular.module('festima')\r\n  .controller('BuildingEditController', function ($stateParams, $location, toastr, buildingsManager, buildingDealersService) {\r\n    var vm = this;\r\n\r\n    vm.buildingId = $stateParams.buildingId;\r\n\r\n    buildingsManager.getBuilding(vm.buildingId).then(\r\n      function (building) {\r\n        vm.building = building;\r\n      },\r\n      function () {\r\n        toastr.info('Объект не найден');\r\n        $location.url('/building/list');\r\n      }\r\n    );\r\n\r\n    buildingDealersService.getDealersPositionsMap(vm.buildingId).then(function (mapOfDealersPositions) {\r\n      vm.dealersPositionsMap = mapOfDealersPositions;\r\n    });\r\n\r\n    vm.addDealerPosition = function (dealerId, position) {\r\n      vm.dealersPositionsMap[dealerId].positions.push(position);\r\n    };\r\n\r\n    vm.removeDealerPosition = function (dealerId, position) {\r\n      var dealerPositions = vm.dealersPositionsMap[dealerId].positions;\r\n\r\n      if (position.id === undefined) {\r\n        var index = dealerPositions.indexOf(position);\r\n        if (index !== -1) {\r\n          dealerPositions.splice(index, 1);\r\n        }\r\n      } else {\r\n        position.removed = true;\r\n      }\r\n    };\r\n\r\n    vm.addDealer = function (dealer) {\r\n      if (!vm.isAddedDealer(dealer)) {\r\n        vm.dealersPositionsMap[dealer.id] = {name: dealer.name, positions: []};\r\n      }\r\n    };\r\n\r\n    vm.isAddedDealer = function (dealer) {\r\n      var index = Object.keys(vm.dealersPositionsMap).indexOf(String(dealer.id));\r\n\r\n      return index >= 0;\r\n    };\r\n\r\n    vm.saveChanges = function () {\r\n      vm.building.update();\r\n\r\n      for (var dealerId in vm.dealersPositionsMap) {\r\n        buildingDealersService.saveDealerPositions(dealerId, vm.dealersPositionsMap[dealerId].positions);\r\n      }\r\n\r\n      $location.path('/building/show/' + vm.building.id);\r\n    };\r\n\r\n    vm.onSelectAddress = function(address) {\r\n      vm.building.address = address.full_name;\r\n      vm.building.location = address.geometry.centroid;\r\n    };\r\n  }\r\n);\r\n\n'use strict';\r\n\r\nangular.module('festima')\r\n  .controller('BuildingCreateController', function($location, Building, toastr) {\r\n    var vm = this;\r\n\r\n    vm.building = new Building();\r\n\r\n    vm.saveChanges = function () {\r\n      vm.building.save().then(function (building) {\r\n        vm.buildingId = building.id;\r\n        vm.building = building;\r\n        $location.path('/building/show/' + vm.building.id);\r\n      });\r\n\r\n      toastr.success('Новый объект \"' + vm.building.name + '\" добавлен!');\r\n    };\r\n\r\n    vm.onSelectAddress = function(address) {\r\n      vm.addressObject = address;\r\n      vm.building.address = address.full_name;\r\n      vm.building.location = address.geometry.centroid;\r\n    };\r\n  }\r\n);\r\n\n(function(app) {\r\n  'use strict';\r\n\r\n  app.service('addresses', function($q, $http, appConfig) {\r\n\r\n    angular.extend(this, {\r\n      listWithinRadius: function(latlng, radius) {\r\n        var deferred = $q.defer();\r\n\r\n        $http.get(appConfig.apiUrl + '/buildings', {params: {latlng: latlng, radius: radius}}).then(\r\n          function(response) {\r\n            console.log('Found addresses:', response.data);\r\n            deferred.resolve(response.data);\r\n          },\r\n          function() {\r\n            deferred.reject();\r\n          }\r\n        );\r\n        // deferred.resolve([{name: 'one'}, {name: 'two'}]);\r\n\r\n        return deferred.promise;\r\n      }\r\n\r\n    });\r\n  });\r\n}) (angular.module('festima'));\r\n\n(function(app) {\r\n  'use strict';\r\n\r\n  app.controller('AddressListController', function(_, maps, addresses) {\r\n    var vm = this;\r\n\r\n    // vm.buildings = [];\r\n\r\n    vm.onSelectAddress = function(address) {\r\n      vm.addressObject = address;\r\n    };\r\n  });\r\n\r\n}) (angular.module('festima'));\r\n\n(function() {\n  'use strict';\n\n  angular\n    .module('festima')\n    .run(runBlock)\n    .run(['$rootScope', '$window', 'OAuth', function($rootScope, $window, OAuth) {\n      $rootScope.$on('oauth:error', function(event, rejection) {\n        // Ignore `invalid_grant` error - should be catched on `LoginController`.\n        if ('invalid_grant' === rejection.data.error) {\n          return;\n        }\n\n        // Refresh token when a `invalid_token` error occurs.\n        if ('invalid_token' === rejection.data.error) {\n          return OAuth.getRefreshToken();\n        }\n\n        // Redirect to `/login` with the `error_reason`.\n        return $window.location.href = '/login?error_reason=' + rejection.data.error;\n      });\n    }]);\n\n  /** @ngInject */\n  function runBlock($log) {\n\n    $log.debug('runBlock end');\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('festima')\n    .config(routerConfig);\n\n  /** @ngInject */\n  function routerConfig($stateProvider, $urlRouterProvider) {\n\n    $stateProvider\n      .state('private',{\n        url: '',\n        abstract: true,\n        views: {\n          app: {templateUrl: 'app/layouts/private-layout.html'}\n        },\n        resolve: {\n          loggedin: function(session) { return session.checkLoggedIn(); }\n        }\n      })\n      .state(\"private.logout\", {\n        url: \"/logout\",\n        resolve: {\n          loggedout: function(session) { return session.logout(); }\n        }\n      })\n      .state(\"private.main\", {\n        url: \"/\",\n        views: {\n          'container@private': { templateUrl: \"app/main/main.html\", controller: 'MainController', controllerAs: 'main' }\n        }\n      })\n      .state(\"private.buildinglist\", {\n        url: \"/building/list\",\n        views: {\n          'container@private': {templateUrl: 'app/building/building-list.html', controller: 'BuildingListController', controllerAs: 'vm'}\n        }\n      })\n      .state(\"private.buildingshow\", {\n        url: \"/building/show/:buildingId\",\n        views: {\n          'container@private': { templateUrl: 'app/building/building-show.html', controller: 'BuildingShowController', controllerAs: 'buildingVm' }\n        }\n      })\n      .state(\"private.buildingedit\", {\n        url: \"/building/edit/:buildingId\",\n        views: {\n          'container@private': { templateUrl: 'app/building/building-edit.html', controller: 'BuildingEditController', controllerAs: 'vm' }\n        }\n      })\n      .state(\"private.buildingcreate\", {\n        url: \"/building/create\",\n        views: {\n          'container@private': { templateUrl: 'app/building/building-create.html', controller: 'BuildingCreateController', controllerAs: 'vm' }\n        }\n      })\n      .state(\"private.addresslist\", {\n        url: \"/address/list\",\n        views: {\n          'container@private': { templateUrl: 'app/address/address-list.html', controller: 'AddressListController', controllerAs: 'vm' }\n        }\n      })\n      .state(\"private.dictionarieslist\", {\n        url: \"/dictionaries/list\",\n        views: {\n          'container@private': { templateUrl: 'app/dictionary/dictionary-list.html', controller: 'DictionaryListController', controllerAs: 'vm' }\n        }\n      })\n      .state(\"private.dictionaryshow\", {\n        url: \"/dictionaries/:key\",\n        views: {\n          'container@private': { templateUrl: 'app/dictionary/dictionary-show.html', controller: 'DictionaryShowController', controllerAs: 'vm' }\n        }\n      })\n      .state(\"public\", {\n        url: '',\n        abstract: true,\n        views: {\n          app: {templateUrl: 'app/layouts/public-layout.html'}\n        }\n      })\n      .state(\"public.login\", {\n        url: \"/login\",\n        views: {\n          'container@public': {templateUrl: \"app/login/login.html\", controller: \"LoginController\", controllerAs: 'vm'}\n        },\n        resolve: {\n          skipLoggedIn: function(session) { return session.skipLoggedIn(); }\n        }\n      })\n      .state(\"public.about\", {\n        url: \"/about\",\n        views: {\n          'container@public': {templateUrl: 'app/main/about.html', controller: 'AboutController', controllerAs: 'about'}\n        }\n      });\n\n    $urlRouterProvider.otherwise('/');\n  }\n\n})();\n\n/* global malarkey:false, moment:false */\n(function() {\n  'use strict';\n\n  angular\n    .module('festima')\n    .constant('malarkey', malarkey)\n    .constant('moment', moment)\n    .constant('_', window._)\n    .constant('appConfig', {\n      'apiUrl': 'http://localhost:8080/api'\n    });\n\n})();\n\n(function() {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('festima')\r\n    .config(config)\r\n    .config(['OAuthProvider', function(OAuthProvider) {\r\n      OAuthProvider.configure({\r\n        grantPath: '/oauth/token',\r\n        revokePath: '/oauth/revoke',\r\n        baseUrl: 'http://localhost:8080',\r\n        clientId: 'estima-client',\r\n        options: {\r\n          secure: false\r\n        }\r\n      });\r\n    }])\r\n    .config(['OAuthTokenProvider', function(OAuthTokenProvider) {\r\n      OAuthTokenProvider.configure({\r\n        name: 'token',\r\n        options: {\r\n          secure: false\r\n        }\r\n      });\r\n    }]).config(['$httpProvider', function($httpProvider) {\r\n      $httpProvider.interceptors.push([\r\n        '$injector',\r\n        function ($injector) {\r\n          return $injector.get('AuthInterceptor');\r\n        }\r\n      ]);\r\n    }]).factory('AuthInterceptor', authInterceptor);\r\n\r\n  /** @ngInject */\r\n  function config($logProvider, toastrConfig) {\r\n    // Enable log\r\n    $logProvider.debugEnabled(true);\r\n\r\n    // Set options third-party lib\r\n    toastrConfig.allowHtml = true;\r\n    toastrConfig.timeOut = 3000;\r\n    toastrConfig.positionClass = 'toast-top-right';\r\n    toastrConfig.preventDuplicates = true;\r\n    toastrConfig.progressBar = true;\r\n  }\r\n\r\n  function authInterceptor($q, $location) {\r\n    return {\r\n      response: function (response) {\r\n        // do something on success\r\n        return response;\r\n      },\r\n      responseError: function (response) {\r\n        if (response.status === 401) {\r\n          $location.url('/login');\r\n        }\r\n        return $q.reject(response);\r\n      }\r\n    };\r\n  }\r\n\r\n})();\r\n\nangular.module(\"test\").run([\"$templateCache\", function($templateCache) {$templateCache.put(\"app/address/address-list.html\",\"<div class=\\\"page-header\\\"><h1>Адреса</h1></div><es-building-address on-address-selected=\\\"vm.onSelectAddress(address)\\\"></es-building-address><es-buildings-nearby address=\\\"vm.addressObject\\\"></es-buildings-nearby>\");\n$templateCache.put(\"app/building/building-create.html\",\"<h1>Новый объект</h1><es-building-form building=\\\"vm.building\\\"><es-building-address building=\\\"vm.building\\\" on-address-selected=\\\"vm.onSelectAddress(address)\\\"></es-building-address></es-building-form><es-buildings-nearby address=\\\"vm.addressObject\\\"></es-buildings-nearby><hr><div class=\\\"panel panel-default\\\"><div class=\\\"panel-body\\\"><button class=\\\"btn btn-lg btn-success\\\" ng-click=\\\"vm.saveChanges()\\\">Создать</button> <a ng-href=\\\"#/building/list\\\" class=\\\"btn\\\">Отмена</a></div></div>\");\n$templateCache.put(\"app/building/building-edit.html\",\"<h1 ng-bind=\\\"vm.building.name\\\">&nbsp;</h1><es-building-form building=\\\"vm.building\\\"><es-building-address building=\\\"vm.building\\\" on-address-selected=\\\"vm.onSelectAddress(address)\\\"></es-building-address></es-building-form><h2>Позиции</h2><div ng-repeat=\\\"(dealerId, dealerMap) in vm.dealersPositionsMap\\\"><es-dealer-positions positions=\\\"dealerMap.positions\\\" new-position=\\\"{building: vm.building, dealerId: dealerId}\\\" on-delete-position=\\\"vm.removeDealerPosition(dealerId, position)\\\" on-add-position=\\\"vm.addDealerPosition(dealerId, position)\\\"><h4 ng-bind=\\\"dealerMap.name\\\"></h4></es-dealer-positions></div><es-add-dealer-button on-add-dealer=\\\"vm.addDealer(dealer)\\\" on-check-added=\\\"vm.isAddedDealer(dealer)\\\"></es-add-dealer-button><hr><div class=\\\"panel panel-default\\\"><div class=\\\"panel-body\\\"><button class=\\\"btn btn-lg btn-success\\\" ng-click=\\\"vm.saveChanges()\\\">Сохранить изменения</button> <a ng-href=\\\"#/building/show/{{vm.building.id}}\\\" class=\\\"btn\\\">Отмена</a></div></div>\");\n$templateCache.put(\"app/building/building-list.html\",\"<div class=\\\"page-header\\\"><div class=\\\"btn-toolbar pull-right\\\"><div class=\\\"btn-group\\\"><a ng-href=\\\"#/building/create\\\" class=\\\"btn btn-primary\\\"><i class=\\\"fa fa-plus-square\\\"></i> Добавить объект</a></div></div><h1>Список объектов</h1></div><table class=\\\"table table-bordered table-striped\\\"><thead><tr><th class=\\\"col-md-3\\\">Название</th><th class=\\\"col-md-3\\\">Адрес</th><th class=\\\"col-md-3\\\">Заказчик</th><th class=\\\"col-md-2\\\">Проектная организация</th><th class=\\\"col-md-1\\\">Менеджер</th></tr></thead><tbody><tr ng-repeat=\\\"building in vm.buildings track by $index\\\"><th scope=\\\"row\\\"><a href=\\\"#/building/show/{{building.id}}\\\">{{building.name}}</a></th><td>{{building.address}}</td><td>{{building.client.title}}</td><td>{{building.project.title}}</td><td>{{building.author.name}}</td></tr></tbody></table>\");\n$templateCache.put(\"app/building/building-show.html\",\"<div class=\\\"page-header\\\"><div class=\\\"btn-toolbar pull-right\\\"><div class=\\\"btn-group\\\"><a href=\\\"#/building/edit/{{buildingVm.building.id}}\\\" class=\\\"btn btn-primary\\\"><i class=\\\"fa fa-edit\\\"></i> Редактировать</a></div></div><h1 ng-bind=\\\"buildingVm.building.name\\\">&nbsp;</h1></div><div class=\\\"row\\\"><div class=\\\"col-md-6\\\"><dl class=\\\"dl-horizontal no-margin\\\"><dt>Заказчик</dt><dd ng-bind=\\\"buildingVm.building.client.title\\\">&nbsp;</dd><dt>Проект</dt><dd ng-bind=\\\"buildingVm.building.project.title\\\">&nbsp;</dd><dt>Менеджер</dt><dd ng-bind=\\\"buildingVm.building.author.name\\\">&nbsp;</dd></dl></div><div class=\\\"col-md-6\\\"><dl class=\\\"dl-horizontal\\\"><dt>Генподрядчик</dt><dd></dd><dt>Субподрядчик</dt><dd></dd></dl></div></div><div class=\\\"jumbotron\\\"><address><strong ng-bind=\\\"buildingVm.building.name\\\">&nbsp;</strong><br>{{buildingVm.building.address}}</address><div id=\\\"map\\\" style=\\\"width:500px; height:400px\\\"></div></div><div class=\\\"panel panel-default\\\"><div class=\\\"panel-body\\\"><a class=\\\"btn btn-lg btn-success\\\" ng-href=\\\"#/building/list\\\">Отлично!<span class=\\\"glyphicon glyphicon-ok\\\"></span></a></div></div>\");\n$templateCache.put(\"app/dictionary/dictionary-list.html\",\"<div class=\\\"page-header\\\"><h1>Справочники</h1></div><table class=\\\"table table-bordered table-striped\\\"><thead><tr><th class=\\\"col-md-4\\\">Название</th><th class=\\\"col-md-8\\\"></th></tr></thead><tbody><tr ng-repeat=\\\"dictionary in vm.dictionaries\\\"><td><a href=\\\"#/dictionaries/{{::dictionary.key}}\\\" ng-bind=\\\"dictionary.name\\\"></a></td><td>hello</td></tr></tbody></table>\");\n$templateCache.put(\"app/dictionary/dictionary-show.html\",\"<div class=\\\"page-header\\\"><h1 ng-bind=\\\"vm.dictionary.name\\\"></h1></div><es-dictionary key=\\\"vm.key\\\"></es-dictionary>\");\n$templateCache.put(\"app/layouts/private-layout.html\",\"<div><acme-navbar creation-date=\\\"main.creationDate\\\"></acme-navbar></div><div ui-view=\\\"container\\\"></div>\");\n$templateCache.put(\"app/layouts/public-layout.html\",\"<div ui-view=\\\"container\\\"></div>\");\n$templateCache.put(\"app/login/login.html\",\"<div class=\\\"container\\\"><form class=\\\"form-signin\\\"><h2 class=\\\"form-signin-heading\\\">Please sign in</h2><label for=\\\"inputEmail\\\" class=\\\"sr-only\\\">Email address</label> <input type=\\\"email\\\" id=\\\"inputEmail\\\" class=\\\"form-control\\\" placeholder=\\\"Email address\\\" required=\\\"\\\" autofocus=\\\"\\\" ng-model=\\\"vm.email\\\" ng-click=\\\"$event.stopPropagation()\\\"> <label for=\\\"inputPassword\\\" class=\\\"sr-only\\\">Password</label> <input type=\\\"password\\\" id=\\\"inputPassword\\\" class=\\\"form-control\\\" placeholder=\\\"Password\\\" required=\\\"\\\" ng-model=\\\"vm.password\\\" ng-click=\\\"$event.stopPropagation()\\\"><div class=\\\"checkbox\\\"><label><input type=\\\"checkbox\\\" value=\\\"remember-me\\\"> Remember me</label></div><button class=\\\"btn btn-lg btn-primary btn-block\\\" type=\\\"submit\\\" ng-click=\\\"vm.login()\\\">Sign in</button></form></div>\");\n$templateCache.put(\"app/main/about.html\",\"<p>О системе</p>\");\n$templateCache.put(\"app/main/main.html\",\"<div class=\\\"jumbotron text-center\\\"><h1>Estima application</h1><p class=\\\"lead\\\"></p><button type=\\\"button\\\" class=\\\"btn btn-lg btn-success\\\" ng-click=\\\"main.showToastr()\\\">Уведомление</button><p></p></div><div class=\\\"row\\\"></div>\");\n$templateCache.put(\"app/components/addDealerButton/add-dealer-button.html\",\"<div class=\\\"input-group\\\"><ui-select ng-model=\\\"addDealerVm.dealer\\\" theme=\\\"bootstrap\\\" ng-disabled=\\\"disabled\\\" reset-search-input=\\\"false\\\"><ui-select-match placeholder=\\\"Выбрать дилера...\\\">{{$select.selected.name}}</ui-select-match><ui-select-choices repeat=\\\"dealer in addDealerVm.dealers track by $index\\\" refresh=\\\"addDealerVm.refreshDealers($select.search)\\\" refresh-delay=\\\"0\\\"><div ng-bind-html=\\\"dealer.name | highlight: $select.search\\\"></div></ui-select-choices></ui-select><div class=\\\"input-group-btn\\\"><button class=\\\"btn btn-primary\\\" ng-click=\\\"addDealerVm.addDealer()\\\" ng-disabled=\\\"!addDealerVm.dealer\\\">Добавить</button></div></div>\");\n$templateCache.put(\"app/components/buildingAddress/building-address.html\",\"<input type=\\\"text\\\" id=\\\"address\\\" ng-model=\\\"addressVm.asyncSelected\\\" placeholder=\\\"Адрес объекта...\\\" class=\\\"form-control\\\" ng-model-options=\\\"{ debounce: { default: 500, blur: 100 } }\\\" uib-typeahead=\\\"address.hint.text for address in addressVm.getLocation($viewValue)\\\" typeahead-loading=\\\"loadingLocations\\\" typeahead-no-results=\\\"noResults\\\" typeahead-on-select=\\\"addressVm.onSelect($item, $model, $label)\\\"> <i ng-show=\\\"loadingLocations\\\" class=\\\"glyphicon glyphicon-refresh\\\"></i><div ng-show=\\\"noResults\\\"><i class=\\\"glyphicon glyphicon-remove\\\"></i> No Results Found</div><br><div id=\\\"map\\\" style=\\\"width:500px; height:400px\\\"></div>\");\n$templateCache.put(\"app/components/buildingForm/building-form.html\",\"<div class=\\\"well\\\"><div class=\\\"row\\\"><div class=\\\"col-sm-12 col-md-6\\\"><div class=\\\"form-group\\\"><label for=\\\"name\\\">Название</label> <input type=\\\"text\\\" class=\\\"form-control\\\" ng-model=\\\"buildingFormVm.building.name\\\" id=\\\"name\\\" placeholder=\\\"Название\\\"></div><div class=\\\"form-group\\\"><label>Заказчик</label><es-dictionary-autocomplete key=\\\"customers\\\" selected=\\\"buildingFormVm.building.client\\\"></es-dictionary-autocomplete></div><div class=\\\"form-group\\\"><label>Проектная организация</label><es-dictionary-autocomplete key=\\\"designers\\\" selected=\\\"buildingFormVm.building.project\\\"></es-dictionary-autocomplete></div></div><div class=\\\"col-sm-12 col-md-6\\\"><div class=\\\"form-group\\\"><label for=\\\"address\\\">Адрес</label><ng-transclude></ng-transclude></div></div></div></div>\");\n$templateCache.put(\"app/components/buildingsNearby/buildings-nearby.html\",\"<div ng-if=\\\"vm.buildings.length > 0\\\"><h2>Найдены объекты в радиусе 1 км</h2><div class=\\\"row\\\"></div><ul><li ng-repeat=\\\"building in vm.buildings\\\">{{building.name}} ({{building.address}})</li></ul></div><div ng-if=\\\"vm.buildings.length == 0\\\"><h2>Ничего не найдено в радиусе 1 км</h2></div>\");\n$templateCache.put(\"app/components/dealerPositions/dealer-positions.html\",\"<div class=\\\"panel panel-default\\\"><div class=\\\"panel-heading\\\"><ng-transclude></ng-transclude></div><div class=\\\"panel-body\\\"><table class=\\\"table table-striped table-condensed table-vcenter\\\"><thead><tr><th class=\\\"col-md-2 text-center\\\">Контакт</th><th class=\\\"col-md-1 text-center\\\">Тип</th><th class=\\\"col-md-2 text-center\\\">Спецификация</th><th class=\\\"col-md-1 text-center\\\">Цена</th><th class=\\\"col-md-1 text-center\\\">Сделка</th><th class=\\\"col-md-1 text-center\\\">Статус</th><th class=\\\"col-md-1 text-center\\\">Отгрузка</th><th class=\\\"col-md-2 text-center\\\"></th></tr></thead><tbody><tr ng-form=\\\"\\\" class=\\\"table-bordered\\\"><td class=\\\"col-md-2\\\"><input class=\\\"col-md-12\\\" type=\\\"text\\\" ng-model=\\\"positionsVm.inputPosition.contactName\\\"></td><td class=\\\"col-md-1\\\"><input class=\\\"col-md-12\\\" type=\\\"text\\\" ng-model=\\\"positionsVm.inputPosition.type\\\"></td><td class=\\\"col-md-2\\\"><input class=\\\"col-md-12\\\" type=\\\"text\\\" ng-model=\\\"positionsVm.inputPosition.spec\\\"></td><td class=\\\"col-md-1\\\"><input class=\\\"col-md-12\\\" type=\\\"text\\\" ng-model=\\\"positionsVm.inputPosition.grossPrice\\\"></td><td class=\\\"col-md-1\\\"><input class=\\\"col-md-12\\\" type=\\\"text\\\" ng-model=\\\"positionsVm.inputPosition.total\\\"></td><td class=\\\"col-md-1\\\"><input class=\\\"col-md-12\\\" type=\\\"text\\\" ng-model=\\\"positionsVm.inputPosition.status\\\"></td><td class=\\\"col-md-1\\\"><input class=\\\"col-md-12\\\" type=\\\"text\\\" ng-model=\\\"positionsVm.inputPosition.dateShipped\\\"></td><td class=\\\"col-md-2\\\"><input class=\\\"col-md-12 btn btn-success\\\" type=\\\"submit\\\" value=\\\"Добавить\\\" ng-click=\\\"positionsVm.addNewPosition()\\\"></td></tr><tr ng-repeat-start=\\\"position in positionsVm.positions | filter:positionsVm.activePosition\\\" ng-repeat-end=\\\"\\\"><td class=\\\"col-md-2 text-center\\\" ng-bind=\\\"position.contactName\\\">&nbsp;</td><td class=\\\"col-md-1 text-center\\\" ng-bind=\\\"position.type\\\">&nbsp;</td><td class=\\\"col-md-2 text-center\\\" ng-bind=\\\"position.spec\\\">&nbsp;</td><td class=\\\"col-md-1 text-center\\\" ng-bind=\\\"position.grossPrice\\\">&nbsp;</td><td class=\\\"col-md-1 text-center\\\" ng-bind=\\\"position.total\\\">&nbsp;</td><td class=\\\"col-md-1 text-center\\\" ng-bind=\\\"position.status\\\">&nbsp;</td><td class=\\\"col-md-1 text-center\\\" ng-bind=\\\"position.dateShipped\\\">&nbsp;</td><td class=\\\"col-md-2 text-center\\\"><messages-button position=\\\"position\\\"></messages-button><a class=\\\"btn text-warning\\\"><i class=\\\"fa fa-pencil\\\"></i></a> <a class=\\\"btn text-danger\\\" ng-click=\\\"positionsVm.removePosition(position)\\\"><i class=\\\"fa fa-remove\\\"></i></a></td></tr></tbody></table></div></div>\");\n$templateCache.put(\"app/components/dictionary/dictionary.html\",\"<div class=\\\"container-fluid\\\"><div class=\\\"panel panel-default\\\"><div class=\\\"panel-body\\\"><form class=\\\"form-inline\\\"><div class=\\\"form-group\\\"><label class=\\\"sr-only\\\" for=\\\"title\\\">Название</label> <input type=\\\"text\\\" class=\\\"form-control\\\" id=\\\"title\\\" ng-model=\\\"dictionaryVm.newItem.title\\\" placeholder=\\\"Название\\\"></div><div class=\\\"form-group\\\"><label class=\\\"sr-only\\\" for=\\\"contact\\\">Контактное лицо</label> <input type=\\\"text\\\" class=\\\"form-control\\\" id=\\\"contact\\\" ng-model=\\\"dictionaryVm.newItem.contact\\\" placeholder=\\\"Контактное лицо\\\"></div><div class=\\\"form-group\\\"><label class=\\\"sr-only\\\" for=\\\"contactPosition\\\">Должность</label> <input type=\\\"text\\\" class=\\\"form-control\\\" id=\\\"contactPosition\\\" ng-model=\\\"dictionaryVm.newItem.contactPosition\\\" placeholder=\\\"Должность\\\"></div><div class=\\\"form-group\\\"><label class=\\\"sr-only\\\" for=\\\"phone\\\">Телефон</label> <input type=\\\"text\\\" class=\\\"form-control\\\" id=\\\"phone\\\" ng-model=\\\"dictionaryVm.newItem.phone\\\" placeholder=\\\"Телефон\\\"></div><button type=\\\"submit\\\" class=\\\"btn btn-success pull-right\\\" ng-click=\\\"dictionaryVm.add(dictionaryVm.newItem)\\\">Добавить</button></form></div></div><table class=\\\"table table-bordered table-striped\\\"><thead><tr><th class=\\\"col-md-3\\\">Название</th><th class=\\\"col-md-3\\\">Контактное лицо</th><th class=\\\"col-md-3\\\">Должность</th><th class=\\\"col-md-3\\\">Телефон</th></tr></thead><tbody><tr ng-repeat=\\\"item in dictionaryVm.items\\\"><td class=\\\"col-md-3\\\" ng-bind=\\\"item.title\\\"></td><td class=\\\"col-md-3\\\" ng-bind=\\\"item.contact\\\"></td><td class=\\\"col-md-3\\\" ng-bind=\\\"item.contactPosition\\\"></td><td class=\\\"col-md-3\\\" ng-bind=\\\"item.phone\\\"></td></tr></tbody></table><ul uib-pagination=\\\"\\\" total-items=\\\"dictionaryVm.totalItems\\\" items-per-page=\\\"dictionaryVm.itemsPerPage\\\" ng-model=\\\"dictionaryVm.currentPage\\\" ng-change=\\\"dictionaryVm.pageChanged()\\\"></ul></div>\");\n$templateCache.put(\"app/components/dictionaryAutocomplete/dictionary-autocomplete.html\",\"<ui-select ng-model=\\\"vm.selected\\\" theme=\\\"bootstrap\\\" ng-disabled=\\\"false\\\" reset-search-input=\\\"true\\\"><ui-select-match placeholder=\\\"Выбрать...\\\">{{$select.selected.title}}</ui-select-match><ui-select-choices repeat=\\\"item in vm.items track by $index\\\" refresh=\\\"vm.refreshItems($select.search)\\\" refresh-delay=\\\"0\\\"><div ng-bind-html=\\\"vm.trustAsHtml((item.title | highlight: $select.search))\\\"></div></ui-select-choices></ui-select>\");\n$templateCache.put(\"app/components/messagesButton/messages-button.html\",\"<button class=\\\"btn btn-default\\\" ng-click=\\\"messagesButtonVm.openMessages()\\\"><span class=\\\"fa fa-comments\\\"></span></button>\");\n$templateCache.put(\"app/components/messagesButton/messages-modal.html\",\"<div class=\\\"modal-header\\\"><button type=\\\"button\\\" class=\\\"close\\\" data-dismiss=\\\"modal\\\" ng-click=\\\"messagesModalVm.cancel()\\\">&times;</button><h4 class=\\\"modal-title\\\">Заметки по позиции</h4></div><div class=\\\"modal-body\\\"><div class=\\\"form-group\\\"><div class=\\\"input-group\\\"><textarea class=\\\"form-control\\\" row=\\\"3\\\" placeholder=\\\"Новое сообщение\\\" ng-model=\\\"messagesModalVm.newMessage.text\\\"></textarea> <span class=\\\"input-group-addon btn btn-primary input-lg\\\" ng-click=\\\"messagesModalVm.addNewMessage()\\\">Добавить</span></div></div><div ng-repeat=\\\"message in messagesModalVm.messages | orderBy:\\'dateCreated\\':true\\\" class=\\\"media\\\"><div class=\\\"media-left\\\"></div><div class=\\\"media-body\\\"><h4 class=\\\"media-heading\\\"><span ng-bind=\\\"message.author.name\\\"></span> <small>{{::message.dateCreated | date: \\'dd.MM.yyyy HH:mm\\'}}</small></h4>{{::message.text}}</div></div></div><div class=\\\"modal-footer\\\"><button type=\\\"button\\\" class=\\\"btn btn-default\\\" data-dismiss=\\\"modal\\\" ng-click=\\\"messagesModalVm.cancel()\\\">Close</button> <button type=\\\"button\\\" class=\\\"btn btn-primary\\\" data-dismiss=\\\"modal\\\" ng-click=\\\"messagesModalVm.ok()\\\">OK</button></div>\");\n$templateCache.put(\"app/components/navbar/navbar.html\",\"<nav class=\\\"navbar navbar-static-top navbar-inverse\\\"><div class=\\\"container-fluid\\\"><div class=\\\"navbar-header\\\"><a class=\\\"navbar-brand\\\" href=\\\"#/\\\">Estima</a></div><div class=\\\"collapse navbar-collapse\\\" id=\\\"bs-example-navbar-collapse-6\\\"><ul class=\\\"nav navbar-nav\\\"><li><a href=\\\"#/\\\" class=\\\"glyphicon glyphicon-home\\\"></a></li><li><a ng-href=\\\"#/building/list\\\">Объекты</a></li><li><a ng-href=\\\"#/address/list\\\">Адреса</a></li><li><a ng-href=\\\"#/dictionaries/list\\\">Справочники</a></li><li><a ng-href=\\\"#/about\\\">О системе</a></li></ul><ul class=\\\"nav navbar-nav navbar-right\\\"><li class=\\\"dropdown\\\" uib-dropdown=\\\"\\\"><a href=\\\"#\\\" class=\\\"dropdown-toggle\\\" uib-dropdown-toggle=\\\"\\\" role=\\\"button\\\" aria-haspopup=\\\"true\\\" aria-expanded=\\\"false\\\"><span ng-bind=\\\"vm.user.name\\\"></span> <span class=\\\"caret\\\"></span></a><ul class=\\\"dropdown-menu\\\" uib-dropdown-menu=\\\"\\\"><li><a href=\\\"#\\\">Личный кабинет</a></li><li role=\\\"separator\\\" class=\\\"divider\\\"></li><li><a href=\\\"#/logout\\\">Выход</a></li></ul></li></ul><span class=\\\"nav navbar-nav navbar-right\\\" style=\\\"padding-top: 10px;\\\"><spinner name=\\\"authSpinner\\\" img-src=\\\"assets/images/ajax-loader.gif\\\"></spinner></span></div></div></nav>\");}]);"],"sourceRoot":"/source/"}